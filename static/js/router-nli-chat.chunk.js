(window.webpackJsonp=window.webpackJsonp||[]).push([[17,35],[,function(t,e,n){"use strict";var i=n(0),o=n(5),r=n(7).basePath,a={triggerParent:function(){var t=Array.prototype.slice.call(arguments,0);"undefined"!=typeof window&&window.postMessage(JSON.stringify({child_window_event:t}),r)}};i.extend(a,o.Events),"undefined"!=typeof window&&window.addEventListener("message",function(t){if(t.origin===r){var e;try{e=JSON.parse(t.data)}catch(t){return}e.child_window_event&&(e.child_window_event.push(t),a.trigger.apply(a,e.child_window_event))}},!1),t.exports=a},function(t,e,n){"use strict";var o=n(5),r=n(20),a=n(0),s=n(9),l=n(7),i=n(6)("app:client-context"),c=window.troupeContext||{},u=c.snapshots||{};function h(){var t;return c.troupe?t=c.troupe:c.troupeId?t={id:c.troupeId}:r.troupeId&&(t={id:r.troupeId}),new o.Model(t)}function d(){var t;return c.user?t=c.user:c.userId&&(t={id:c.userId}),new o.Model(t)}i("window.troupeContext",c);var p,m,f,g,v=(c.group?p=c.group:c.troupe&&c.troupe.group&&(p=c.troupe.group),new o.Model(p)),_=h(),b=d(),w=(m=_,f=b,(g=new o.Model).set({userId:f.id,troupeId:m.id}),g.listenTo(f,"change:id",function(t,e){g.set({userId:e})}),g.listenTo(m,"change:id",function(t,e){g.set({troupeId:e})}),g),y=function(){return c};function x(e,t){return Object.keys(t.attributes).forEach(function(t){e.hasOwnProperty(t)||(e[t]=null)}),e}y.group=function(){return v},y.troupe=function(){return _},y.getGroupId=function(){return v.id},y.getTroupeId=function(){return _.id},y.contextModel=function(){return w},y.delayedContextModel=function(t){return function(t,e){var n=new o.Model;n.set({userId:t.get("userId"),troupeId:t.get("troupeId")});var i=a.debounce(function(){n.set({troupeId:t.get("troupeId")})},e);return n.listenTo(t,"change:userId",function(t,e){n.set({userId:e})}),n.listenTo(t,"change:troupeId",function(){n.set({troupeId:null}),i()}),n}(w,t)},y.setTroupeId=function(t){_.set(x({id:t},_))},y.setTroupe=function(t){t.group?v.set(x(t.group,v)):i("Troupe data contains no group: %j",t),_.set(x(t,_))},y.getUserId=function(){return b.id},y.setUser=function(t){b.set(x(t,b))},y.isAuthed=function(){return!!b.id},y.inTroupeContext=function(){return!!_.id},y.inOneToOneTroupeContext=function(){return!!y.inTroupeContext()&&!!_.get("oneToOne")},y.getUser=function(){return b.toJSON()},y.user=function(){return b},y.hasProvider=function(e){return b&&(b.get("providers")||[]).some(function(t){return t===e})},y.getTroupe=function(){return _.toJSON()},y.popEvent=function(t){var e=c.events;if(e){var n=e.indexOf(t);if(0<=n)return e.splice(n,1),!0}},y.getAccessToken=s.method(function(){var i=0;if(!l.anonymous)return function t(){var e=window.bearerToken||r.bearerToken||c.accessToken;if(e)return e;if(!(50<++i))return s.delay(100).then(t);if(window.sessionStorage){var n=parseInt(window.sessionStorage.getItem("forced_reload"),10);if(n&&Date.now()<n)return;window.sessionStorage.setItem("forced_reload",Date.now()+6e4)}window.location.reload(!0)}()}),y.isLoggedIn=function(){return!!l.loggedIn||!!b.id},y.isStaff=function(){return b.get("staff")},y.isTroupeAdmin=function(){var t=_.get("permissions");return!!t&&!!t.admin},y.lang=function(){return c.lang?c.lang:l.lang||[window.navigator.language]},y.isRoomMember=function(){return _.get("roomMember")},y.testOnly={resetTroupeContext:function(t){c=t,_=h(),b=d()}},y.hasFeature=function(t){return c.features&&0<=c.features.indexOf(t)},y.getFeatures=function(){return c.features||[]},y.getSnapshot=function(t){var e=u[t];return delete u[t],e},y.roomHasWelcomeMessage=function(){return c.roomHasWelcomeMessage},t.exports=y},,,,,function(t,e,n){"use strict";var i=n(20),o=window.gitterClientEnv||{};if(i.env){var r;try{r=JSON.parse(i.env)}catch(t){}r&&Object.keys(r).forEach(function(t){o[t]=r[t]})}t.exports=o},function(t,e,n){"use strict";var i=n(7),o=n(2),r=n(1),a=n(46),s={githubIssues:/^\/api\/private\/gh\/[^/]+\/[^/]+\/issues/,githubUsers:/^\/api\/private\/gh\/users\//};var l=new a({baseUrl:i.apiBasePath,accessToken:o.getAccessToken,getUserId:o.getUserId,getTroupeId:o.getTroupeId});l.on("error",function(t){!function(t,e,n,i){var o=function(t){for(var e=Object.keys(s),n=0;n<e.length;n++){var i=e[n];if(s[i].test(t))return i}}(i);if("error"===e&&404===t)r.trigger("bugreport","ajaxError: unreachable: "+n+" "+(o||i),{tags:{type:"ajax",subtype:"unreachable",url:i}});else{if(t<500)return;r.trigger("bugreport","ajaxError: HTTP "+t+" on "+n+" "+(o||i),{tags:{type:"ajax",subtype:"HTTP"+t,url:i}})}r.trigger("ajaxError")}(t.status,t.statusText,t.method,t.url)}),t.exports=l},function(t,e,n){"use strict";var i=n(135),o=function(){try{return{warnings:"1"===window.localStorage.BLUEBIRD_LONG_STACK_TRACES,longStackTraces:"1"===window.localStorage.BLUEBIRD_WARNINGS}}catch(t){return{warnings:!1,longStackTraces:!1}}}();i.config({warnings:o.warnings,longStackTraces:o.longStackTraces,cancellation:!0}),t.exports=i},,,function(t,e,n){"use strict";var i=n(158);try{window.gitterSetLogLevel=function(t){i.setLevel(t)}}catch(t){}t.exports=i},function(t,e,n){"use strict";var i,o=n(4);t.exports=(i={},o.Behaviors.behaviorsLookup=function(){return i},{register:function(t,e){i[t]=e}})},function(t,e,n){"use strict";var i,o;"undefined"!=typeof window&&(i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,o=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame),t.exports=i&&i.bind(window)||function(t){return window.setTimeout(t,1e3/60)},t.exports.cancel=o&&o.bind(window)||function(t){window.clearTimeout(t)}},function(t,e,n){"use strict";var i=n(25),o=n(2);i.locale(o.lang()),i.defaultFormat="YYYY-MM-DDTHH:mm:ss.SSSZ",t.exports=i},function(t,e,n){"use strict";var i;t.exports=function(){return void 0===i&&(i=document.body.classList.contains("mobile")),i}},function(t,e,n){"use strict";var o=!1;try{var i=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,i)}catch(t){}t.exports={addEventListener:function(t,e,n){var i;i=!!o&&{passive:!0},t.addEventListener(e,n,i)},removeEventListener:function(t,e,n){var i;i=!!o&&{passive:!0},t.removeEventListener(e,n,i)}}},function(t,e,n){"use strict";var i=n(8),o=n(78)(i);t.exports=o},function(t,e,n){"use strict";var i=n(7),o=i.cdns,r=i.assetTag,a=r?"/_s/"+r:"",s="file:"===window.location.protocol?n(55):o&&0!==o.length?1===o.length?n(57):n(58):n(56),l={emailBasePath:null,webBasepath:null,hosts:o,cdnPrefix:a};t.exports=s(l)},function(t,e,n){"use strict";var i,o="";"undefined"!=typeof window&&(o=window.location.search),t.exports=!(i=o)||i.length<=1?{}:i.substring(1).split("&").reduce(function(t,e){var n=e.split("=",2).map(decodeURIComponent);return t[n[0]]=n[1],t},{})},,,function(t,e,n){"use strict";var i=n(64),o=n(65),r=n(66),a=n(67);function s(t){return t?o("/group/i/"+t):null}t.exports={getForGitHubUsername:function(t){return o("/gh/u/"+t)},getForGravatarEmail:function(t){return o("/gravatar/e/"+t)},getForTwitterUrl:function(t){var e=r(t);return e?o("/tw/i/"+e.id+"/"+e.filename):a},getForGroupId:s,getForGroup:function(t){if(!t)return null;var e=t.id;return e?t.avatarVersion?o("/group/iv/"+t.avatarVersion+"/"+e):s(e):null},getForRoomUri:function(t){if(!t)return null;var e=t.split("/")[0];return o("/gh/u/"+e)},getForUser:function(t){if(!t)return null;var e=t.username;if(!e)return null;var n=t.gv;return i(t)?o(n?"/gh/uv/"+n+"/"+e:"/gh/u/"+e):o("/g/u/"+e)},getDefault:function(){return a}}},function(t,e,n){"use strict";var i=n(4),o=n(13),r=n(81),a=n(14),s=n(27);function l(t){a(function(){if(r(t,":hover")){var e;try{e=new MouseEvent("mouseover")}catch(t){(e=document.createEvent("MouseEvents")).initMouseEvent("mouseover",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null)}t.dispatchEvent(e)}})}n(49);var c=i.Behavior.extend({onRender:function(){if(!s()){this.destroyTooltips(),this.tooltips||(this.tooltips={}),this.handlers||(this.handlers={});var o=this;Object.keys(this.options).forEach(function(t){var e=""===t?o.$el:o.$el.find(t),n=e[0];if(n){var i=o.createHandler(e,n,t);n.addEventListener("mouseover",i,!1),o.handlers[t]=i,l(n)}})}},createHandler:function(t,e,n){var i=this;return{el:e,handleEvent:function(){e.removeEventListener("mouseover",this,!1),delete i.handlers[n],i.initTooltip(n,t,e)}}},initTooltip:function(t,e,n){var i=this.options[t],o=i.title||n.getAttribute("title");"function"==typeof i.titleFn?o=i.titleFn.bind(this.view)():i.titleFn&&(o=this.view[i.titleFn].bind(this.view)),(this.tooltips[t]=e).tooltip({html:i.html,title:o,placement:i.placement,container:i.container||"body"});var r=i.customUpdateEvent;r&&this.view.on(r,this.updateTooltip.bind(this,e)),l(n)},onDestroy:function(){this.destroyHandlers(),this.destroyTooltips()},destroyHandlers:function(){var n=this.handlers;delete this.handlers,n&&Object.keys(n).forEach(function(t){var e=n[t];e.el.removeEventListener("mouseover",e,!1)})},destroyTooltips:function(){var e=this.tooltips;delete this.tooltips,e&&Object.keys(e).forEach(function(t){e[t].tooltip("destroy")})},updateTooltip:function(t){t.tooltip("hide"),t.tooltip("show")}});o.register("Tooltip",c),t.exports=c},,function(t,e,n){"use strict";var l=n(0),i=n(4),o=n(13),r=i.Behavior.extend({onRender:function(){this.setupRegions()},onBeforeShow:function(){this.setupRegions()},setupRegions:function(){if(!this.setup){this.setup=1;var o=this.view,s=this.options;Object.keys(s).forEach(function(r){var t=s[r],e=t.el,a=o.addRegion(r,e),n=t.init;if(n){"string"==typeof n&&(n=o[n]);var i=n.call(o,function(t,e){var n=a.$el[0];if(!n)throw new Error("Region "+r+" does not exist.");var i,o=n.children.length;if(0===o)i={};else{if(1!==o)throw new Error("Region can have zero or one elements, but not more. Region "+r+" has "+o+". Are you sure you wrapped the region with a parent?");i=e&&e.rerender?{el:n.children[0]}:{template:!1,el:n.children[0]}}return t?l.extend(i,t):i},a);i&&o.showChildView(r,i)}})}}});o.register("Isomorphic",r),t.exports=r},function(t,e,n){"use strict";var i=!!navigator.userAgent.match(/(iPhone|iPod|Android|BlackBerry)/);t.exports=function(){return i}},function(t,e,n){"use strict";function i(t){return"data-"+t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).toLowerCase()}document.documentElement.dataset?t.exports={get:function(t,e){return t&&t.dataset&&t.dataset[e]},set:function(t,e,n){t.dataset[e]=n}}:t.exports={get:function(t,e){return t&&t.getAttribute(i(e))},set:function(t,e,n){return t.setAttribute(i(e),n)}}},,function(t,e,n){"use strict";var i=n(5),r=n(2),a=n(7),o=n(1),s=n(12),l=n(54),c=n(29).RealtimeClient,u=n(29).wrapExtension,h=n(6)("app:realtime"),d=n(85),p=n(0),m=n(163);function f(o){r.getAccessToken().then(function(t){var e=0<=navigator.userAgent.toLowerCase().indexOf("mobile"),n=d.getAuthDetails(),i=p.extend({token:t,version:a.version,connType:e?"mobile":"online",client:e?"mobweb":"web"},n);return o(i)})}var g,v={incoming:u(function(t,e){if("/meta/handshake"!==t.channel)return e(t);if(t.successful){var n=t.ext;if(n&&(n.appVersion&&m.reportServerVersion(n.appVersion),n.context)){var i=n.context;i.troupe&&r.setTroupe(i.troupe),i.user&&r.setUser(i.user)}}e(t)})},_=!1,b={incoming:u(function(t,e){t.error&&t.advice&&"none"===t.advice.reconnect&&(_||(_=!0,s.error("Access denied",t),window.alert("Realtime communications with the server have been disconnected. ".concat(t.error)),l())),e(t)})};function w(){if(g)return g;var t=a.websockets||{};return(g=new c({fayeUrl:t.fayeUrl,authProvider:f,fayeOptions:t.options,extensions:[v,b],websocketsDisabled:r.hasFeature("disable-websockets")})).on("stats",function(t,e,n){o.trigger("stats."+t,e,n)}),g.on("connection:up",function(){o.trigger("realtime-connectivity:up")}),g.on("connection:down",function(){o.trigger("realtime-connectivity:down")}),setInterval(function(){h("Performing ping"),g.testConnection("ping")},3e4),g.subscribeTemplate({urlTemplate:"/v1/user/:userId",contextModel:r.contextModel(),onMessage:function(t){var e=r.user();switch("patch"===t.operation&&t.model&&t.model.id===e.id&&e.set(t.model),t.notification){case"user_notification":r().desktopNotifications&&o.trigger("user_notification",p.extend(t,{notificationKey:t.chatId}));break;case"activity":o.trigger("activity",t)}}}),r.isLoggedIn()&&r.getAccessToken().then(function(t){var e=new i.Model({token:t}),n=!1;o.on("account.delete-start",function(){h("account.delete-start"),n=!0}),o.on("account.delete-stop",function(){h("account.delete-stop"),n=!1}),o.on("account.logout-start",function(){h("account.logout-start"),n=!0}),g.subscribeTemplate({urlTemplate:"/v1/token/:token",contextModel:e,onMessage:function(t){switch(t.notification){case"token_revoked":s.error("Token was revoked (preventTokenRevokedFlow=".concat(n,")"),t),n||(s.error("Token was revoked and logging out",t),l("/login/token-revoked"))}}}).on("subscriptionError",function(t,e){s.error("Token subscription error"+t,{exception:e}),401!==e.code&&403!==e.code||(s.error("Token subscription unathorized/forbidden (preventTokenRevokedFlow=".concat(n,"): ").concat(t),{exception:e}),n||(s.error("Token subscription unathorized/forbidden and logging out",{exception:e}),l("/login/token-revoked")))})}),g}function y(){return g&&g.getClientId()}function x(t){w().reset(t)}function k(t){w().testConnection(t)}o.on("eyeballsInvalid",function(t){h("Resetting connection after invalid eyeballs"),x(t)}),o.on("reawaken",function(){h("Recycling connection after reawaken"),x(y())}),document.addEventListener&&document.addEventListener("deviceReady",function(){document.addEventListener("online",function(){h("online"),k("device_ready")},!1)},!1),t.exports={getClientId:y,subscribe:function(t,e,n){return w().subscribe(t,e,n)},testConnection:k,reset:x,getClient:function(){return w()}},window._realtime=t.exports},function(t,e,n){"use strict";function i(e,n,i,o){e.addEventListener(n,this,!1),this.handleEvent=function(t){e.removeEventListener(n,this,!1),i.call(o,t)}}t.exports=function(t,e){new i(window,"DOMContentLoaded",t,e)}},function(t,e,n){"use strict";var i,r=n(10),o=n(0),a=n(4);"undefined"!=typeof window&&(i=n(74));var s=n(89),l={animation:!0,selector:!1,title:"",footerView:null,delay:300,container:!1,placement:"right",scroller:null,width:"",minHeight:""},c=a.ItemView.extend({template:s,className:"popover",initialize:function(t){o.bindAll(this,"leave","enter"),this.options=o.extend({},l,t),this.view=this.options.view,this.titleView=this.options.titleView,this.title=this.options.title,this.footerView=this.options.footerView,this.options.scroller&&(this.$scroller=r(this.options.scroller),this.scroller=this.$scroller[0]),this.targetElement=this.options.targetElement,this.$targetElement=r(this.targetElement),this.zIndex=function(t){for(var e=0;t&&t!=document;){var n=window.getComputedStyle(t,null);if(n){var i=n.getPropertyValue("z-index");i&&"auto"!==i&&(i=parseInt(i,10))>e&&(e=i)}t=t.parentNode}return e}(this.targetElement),this.$targetElement.on("mouseenter",this.enter),this.$targetElement.on("mouseleave",this.leave),this.once("destroy",function(){this.mutant&&this.mutant.disconnect()})},serializeData:function(){return this.options},onRender:function(){var t=this.$el;(this.view.parentPopover=this).zIndex&&(this.el.style.zIndex=this.zIndex+1),this.titleView?t.find(".popover-title").append(this.titleView.render().el):this.title?t.find(".popover-title").text(this.title):t.find(".popover-title").hide(),t.find(".popover-content").append(this.view.render().el),t.find(".popover-inner").css("width",this.options.width).css("min-height",this.options.minHeight);var e=this.footerView;e&&(e.parentPopover=this,t.find(".popover-footer-content").append(e.render().el)),t.on("mouseenter",this.enter),t.on("mouseleave",this.leave),t.addClass("popover-hidden"),t.removeClass("fade top bottom left right in")},enter:function(){this.timeout&&clearTimeout(this.timeout)},leave:function(){if(!this.options.delay)return t.hide();var t=this;this.timeout=setTimeout(function(){t.hide()},t.options.delay)},onDestroy:function(){this.$el.off("mouseenter",this.enter),this.$el.off("mouseleave",this.leave),this.$targetElement.off("mouseenter",this.enter),this.$targetElement.off("mouseleave",this.leave),this.titleView&&this.titleView.destroy(),this.view.destroy(),this.footerView&&this.footerView.destroy()},show:function(){var t=this.render().$el,e=this.el;t.detach().css({left:"auto",display:"block"}),t.appendTo(r("body")),this.reposition(),t.removeClass("popover-hidden"),i&&i.prototype&&i.prototype.constructor&&(this.mutant=new i(e,this.reposition,{scope:this,timeout:20,transitions:!0,observers:{attributes:!0,characterData:!0}}))},reposition:function(){try{var t=this.$el,e=this.el,n=this.getTargetPosition();if(0===n.top&&0===n.left&&0===n.height&&0===n.width)return;var i=e.offsetWidth,o=e.offsetHeight,r=this.options.placement;switch(r){case"vertical":r=this.selectBestVerticalPlacement(t,this.targetElement);break;case"horizontal":r=this.selectBestHorizontalPlacement(t,this.targetElement)}var a=function(t,e,n,i){var o;switch(r){case"bottom":o={top:e.top+e.height,left:e.left+e.width/2-n/2};break;case"top":o={top:e.top-i,left:e.left+e.width/2-n/2-2};break;case"left":o={top:e.top+e.height/2-i/2,right:document.body.clientWidth-e.left+10};break;case"right":o={top:e.top+e.height/2-i/2,left:e.left+e.width}}return o}(0,n,i,o);this.applyPlacement(a,r)}finally{this.mutant&&this.mutant.takeRecords()}},selectBestVerticalPlacement:function(t,e){var n=r(e);if(this.scroller){var i=(this.scroller.scrollTop+(this.scroller.scrollTop+this.scroller.clientHeight))/2;return e.offsetTop>i?"top":"bottom"}var o=n.offsetParent();return o&&n.offset().top+t.height()+20>=o[0].clientHeight?"top":"bottom"},selectBestHorizontalPlacement:function(t,e){return e.getBoundingClientRect().left<document.body.clientWidth/2?"right":"left"},applyPlacement:function(t,e){var n,i=this.$el,o=i[0],r=o.offsetWidth,a=o.offsetHeight,s=o.offsetWidth,l=o.offsetHeight,c=0;if("bottom"==e||"top"==e){if(t.left<0)c=-2*t.left,t.left=0;else if(t.left+s>window.innerWidth){var u=window.innerWidth-(t.left+s);c=2*u,t.left+=u}}else if(t.top<0)c=-2*t.top,t.top=0;else{var h=this.scroller?this.scroller.clientHeight:window.innerHeight;t.top+a>h&&(c=2*(h-t.top-a-10),t.top=h-a-10)}var d={top:t.top};t.right?(d.left="initial",d.right=t.right):(d.left=t.left,d.right="initial"),i.css(d).addClass(e).addClass("in"),"top"==e&&l!=a&&(t.top=t.top+a-l,n=!0),"bottom"==e||"top"==e?this.replaceArrow(c-r+s,s,"left"):this.replaceArrow(c-a+l,l,"top"),n&&i.offset(t)},replaceArrow:function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},hide:function(){this.timeout&&clearTimeout(this.timeout);var t=this.$el;return t.removeClass("in"),t.addClass("popover-hidden"),setTimeout(function(){t.detach()},350),t.trigger("hidden"),this.trigger("hide"),this.destroy(),this},getTargetPosition:function(){var t=this.targetElement,n={};return o.forIn(t.getBoundingClientRect(),function(t,e){return n[e]=t}),o.forIn(this.$targetElement.offset(),function(t,e){return n[e]=t}),n},getTitle:function(){return this.options.title},arrow:function(){return this.$arrow||(this.$arrow=this.$el.find(".arrow")),this.$arrow}});c.hoverTimeout=function(t,e,n){var i=setTimeout(function(){i&&e.call(n,t)},750);r(t.target).one("mouseout click",function(){clearTimeout(i),i=null})},c.singleton=function(t,e){t.popover=e,t.listenToOnce(e,"hide",function(){t.popover=null})},t.exports=c},,,,,,function(t,e,n){"use strict";t.exports=function(t,e,n){return t?e:n}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=n;if(t.classList)3===arguments.length?n?t.classList.add(e):t.classList.remove(e):i=t.classList.toggle(e);else if(t.getAttribute){var o=t.getAttribute("class"),r=o.replace(new RegExp("(^|\\s)"+e+"($|\\s)"),"");n||o===r?t.setAttribute("class",r+" "+e):t.setAttribute("class",r)}return i}},function(t,e,n){"use strict";var i=n(0),o=n(5),r=n(6)("app:eyeballs:detector"),a=n(159),s=n(160),l=n(161),c={};i.extend(c,o.Events);var u=!0,h=!0,d=!0,p=!0;function m(){var t=u&&h&&d;t!==p&&(r("Eyeballs change: %s",p=t),c.trigger("change",p))}var f=new a(function(t){r("Activity signal: %s",t),d=t,m()});new l(function(t){r("Visibility signal: %s",t),u=t,m()}),new s(function(t){r("Focus signal: %s",t),(h=t)?f.setInactive(!1):f.setInactive(!0),m()}),t.exports={getEyeballs:function(){return p},forceActivity:function(){f.setInactive(!1)},events:c}},function(t,e,n){"use strict";var i=n(5),o=n(4),l=n(2),r=n(16),a=n(88),s=n(60),c=n(52),u=n(70),h=n(59),d=n(23);n(24);var p=d.getDefault();t.exports=function(){var t=o.ItemView.extend({tagName:"div",className:"avatar",template:a,events:{mouseover:"showDetailIntent",click:"showDetail","error img":"onImageError"},ui:{tooltip:":first-child",wrapper:".trpDisplayPicture",image:"img"},modelEvents:{change:"update"},behaviors:function(){var t=this.options;if(!1!==t.showTooltip)return{Tooltip:{":first-child":{titleFn:"getTooltip",placement:t.tooltipPlacement||"vertical"}}}},initialize:function(t){t.user&&(this.model=new i.Model(t.user))},onRender:function(){var t=this.ui.image[0];t&&(t.onerror=this.onImageError.bind(this))},onDestroy:function(){var t=this.ui.image[0];t&&(t.onerror=null)},showDetailIntent:function(t){s.hoverTimeout(t,function(){this.showDetail(t)},this)},showDetail:function(t){if(!r()&&(t.preventDefault(),!this.popover)){this.ui.tooltip.tooltip("hide");var e=this.model,n=new s({model:e,targetElement:t.target});n.show(),s.singleton(this,n)}},update:function(){var t=this.serializeData();this.updatePresence(t),this.updateAvatar(t)},updatePresence:function(t){if(this.options.showStatus){var e=this.ui.wrapper;e.toggleClass("online",t.online),e.toggleClass("offline",!t.online)}},updateAvatar:function(t){var e=this.ui.image[0],n=t.avatarSrcSet;e.src=n.src,e.srcset=n.srcset},getUserId:function(){return this.model.id},serializeData:function(){var t=this.options||{};return n(this.model&&this.model.toJSON(),t)},getTooltip:function(){return this.model.get("displayName")},onImageError:function(t){var e=t.currentTarget;e.src!==p&&(e.src=p)},attachElContent:h.attachElContent});function n(t,e){t||(t=e.model?e.model.toJSON():e.user||{});var n,i=e.avatarSize||"s",o="m"===i?64:30,r=l.getUserId(),a=u(t,o),s=t.id===r||!!t.online;return n=e.showStatus?s?"online":"offline":"",{id:t.id,showStatus:e.showStatus,userDisplayName:t.displayName,alt:e.screenReadUsername?t.username:"",avatarSrcSet:a,avatarSize:i||"s",imgSize:o,presenceClass:n,online:s,offline:!s,role:t.role,removed:t.removed,inactive:t.removed}}return t.getPrerendered=function(t,e){return"<span class='widget' data-widget-id='"+e+"'>"+a(n(null,t))+"</span>"},c.register({avatar:t}),t}()},function(t,e,n){"use strict";var i="https:"===document.location.protocol;t.exports={get:function(t){return t&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},set:function(t,e){t&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(t)&&(document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; "+(i?"; secure; SameSite=None":""))}}},function(t,e,n){"use strict";var d=n(21),p=n(0),i=Object.prototype,m=i.toString,o=i.valueOf;function f(t){return p.isFunction(t)&&t!==o}p.isEqual=function(t,e){return function t(e,n,i,o){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return e===n;e instanceof p&&(e=e._wrapped),n instanceof p&&(n=n._wrapped);var r=m.call(e);if(r!==m.call(n))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return e!=+e?n!=+n:0==e?1/e==1/n:e==+n;case"[object Date]":case"[object Boolean]":return+e==+n}if("object"!==d(e)||"object"!==d(n))return!1;for(var a=i.length;a--;)if(i[a]===e)return o[a]===n;var s=e.constructor,l=n.constructor;if(s!==l&&"constructor"in e&&"constructor"in n&&!(p.isFunction(s)&&s instanceof s&&p.isFunction(l)&&l instanceof l))return!1;i.push(e),o.push(n);var c=0,u=!0;if("[object Array]"===r){if(u=(c=e.length)===n.length)for(;c--&&(u=t(e[c],n[c],i,o)););}else if(f(e.valueOf)&&f(n.valueOf))u=t(e.valueOf(),n.valueOf(),i,o);else{for(var h in e)if(p.has(e,h)&&(c++,!(u=p.has(n,h)&&t(e[h],n[h],i,o))))break;if(u){for(h in n)if(p.has(n,h)&&!c--)break;u=!c}}return i.pop(),o.pop(),u}(t,e,[],[])},t.exports=p},,function(t,e,n){"use strict";var u=n(0),h=n(2),d=n(30),p=n(8),b=n(6)("app:unread-items-client"),m=n(5),f=n(1),g=n(185),v=n(12),w=n(14),y=n(17),x=n(40);t.exports=function(){function l(t,e,n){return u.throttle(t.bind(e),n||30,{leading:!1})}function a(t,e){var n=h.user();n.id?t.call(e,n.id):n.once("change:id",function(){t.call(e,n.id)})}var i=function(t,e){this._store=t,this._chatCollection=e,this._eyeballState=!0,this._timers={},this._lastSeenItems={},t.on("reset",this._onStoreReset,this),t.on("itemMarkedRead",this._onItemMarkedRead,this),e.on("reset",this._onCollectionReset,this),this._clearActivityBadgeLimited=l(this._clearActivityBadge,this,100)};i.prototype={_activity:function(t){this._clearActivityBadgeLimited();var e=h.getTroupeId();(t||(t=this._findMostRecentId()))&&(this._lastSeenItems[e]>=t||(this._lastSeenItems[e]=t,this._timers[e]||(this._timers[e]=setTimeout(function(){b("_updateLastAccess: %s",e);var t=this._lastSeenItems[e];delete this._timers[e],p.user.put("/rooms/"+e+"/unreadItems/"+t,"",{dataType:"text"}).then(function(){b("_updateLastAccess done")})}.bind(this),1e3))))},_findMostRecentId:function(){return this._chatCollection.reduce(function(t,e){return t&&t>e.id?t:e.id},null)},_clearActivityBadge:function(){f.trigger("clearActivityBadge",h.getTroupeId())},_onItemMarkedRead:function(t,e,n){n&&this._activity(t)},_onStoreReset:function(){this._store.getLurkMode()&&x.getEyeballs()&&this._activity()},_onCollectionReset:function(){this._onStoreReset()}};var e=function(t){this._buffer={},this._sendLimited=l(this._send,this,1e3),t.on("itemMarkedRead",this._onItemMarkedRead.bind(this));var e=this._onWindowUnload.bind(this);["unload","beforeunload"].forEach(function(t){window.addEventListener(t,e,!1)})};e.prototype={_onItemMarkedRead:function(t,e,n){if(!n||e){var i=h.getTroupeId(),o=this._buffer[i];o||(o=this._buffer[i]={}),o[t]=!0,this._sendLimited()}},_onWindowUnload:function(){0<Object.keys(this._buffer)&&this._send({sync:!0})},_send:function(e){b("_send"),Object.keys(this._buffer).forEach(function(t){this._sendForRoom(t,e)},this)},_sendForRoom:function(e,t){b("_sendForRoom: %s",e);var n=Object.keys(this._buffer[e]);if(delete this._buffer[e],n.length){var i={chat:n},o=!t||!t.sync,r=0;a(function t(){p.user.post("/rooms/"+e+"/unreadItems",i,{async:o,global:!1}).catch(function(){b("Error posting unread items to server. Will attempt again in 5s"),++r<10&&setTimeout(t,5e3)})})}}};var n=function(t){this._store=t};u.extend(n.prototype,m.Events,{_subscribe:function(){var i=this._store;d.getClient().subscribeTemplate({urlTemplate:"/v1/user/:userId/rooms/:troupeId/unreadItems",contextModel:h.contextModel(),onMessage:function(t){switch(b("Realtime: Channel message: %j",t),t.notification){case"unread_items":i.add(t.items);break;case"unread_items_removed":i.remove(t.items);break;case"mark_all_read":i.markAllReadNotification();break;case"lurk_change":t.lurk?i.enableLurkMode():i.disableLurkMode()}},handleSnapshot:function(t){b("Realtime: Channel snapshot: %j",t);var e=h.troupe().get("roomMember"),n=t._meta&&t._meta.lurk||!e;i.reset(t,n)}}).on("resubscribe",function(){b("Realtime: resubscribe"),i.state="LOADING",i.reset()})}});var o,r=function(t,e,n){var i=this._getBounds.bind(this),o=l(this._getBounds,this,100),r=u.debounce(this._getBounds.bind(this),100);this._collectionView=n,this._scrollElement=t[0]||t,this._store=e,this._windowScrollLimited=l(this._windowScroll,this,50);var a=this._foldCountLimited=l(this._foldCount,this,50);x.events.on("change",this._eyeballStateChange,this),y.addEventListener(this._scrollElement,"scroll",function(){w(i)}),e.on("newcountvalue",a),["unreadItemRemoved","change:status","itemMarkedRead","add"].forEach(function(t){e.on(t,o)}),n.collection.on("add",r),setInterval(o,2e3);var s=this;n.listenTo(h.troupe(),"change:lastAccessTime",function(t){if(h.troupe().get("lurk")){var e=t.get("lastAccessTime");this.collection.forEach(function(t){t.get("sent")?t.get("sent").isBefore(e)&&t.get("unread")&&s._store.markItemRead(t.id):b("Chat is missing sent %j",t)})}})};function s(e,n){n.on("add",function(t){t.id&&t.get("unread")&&e.isMarkedAsRead(t.id)&&(b("item already marked as read"),t.set("unread",!1))}),e.on("unreadItemRemoved",function(t){b("CollectionSync: unreadItemRemoved: %s mention=%s",t),n.patch(t,{unread:!1,mentioned:!1},{fast:!0})}),e.on("itemMarkedRead",function(t,e){b("CollectionSync: itemMarkedRead: %s mention=%s",t,e),n.patch(t,{unread:!1,mentioned:e})}),e.on("change:status",function(t,e){b("CollectionSync: change:status: %s mention=%s",t),n.patch(t,{unread:!0,mentioned:e})}),e.on("add",function(t,e){b("CollectionSync: add: %s mention=%s",t,e),n.patch(t,{unread:!0,mentioned:e},null,function(t,e){e||n.atBottom&&n.length&&(t<n.at(0).id||(v.warn("An unread item does not exist in the chat collection: id="+t),f.trigger("stats.event","missing.chat.item")))})}),e.on("reset",function(){b("CollectionSync: reset");var o=e.getItemHash();n.each(function(t){var e=t.id,n=o[e],i={fast:!0};!1===n?t.set({unread:!0,mentioned:!1},i):!0===n?t.set({unread:!0,mentioned:!0},i):t.set({unread:!1,mentioned:!1},i)})})}function c(){var t=o||(h.troupe().id?((o=new g).on("newcountvalue",function(t){f.trigger("unreadItemsCount",h.troupe().id,t)}),new e(o),new n(o)._subscribe(),o):null);if(t)return t;throw new Error("Unable to create an unread items store without a user")}r.prototype={_viewReady:function(){var t=this._collectionView,e=t.collection,n=e.models.length===t.children.length;return n||b("Mismatch: collection.length=%s, collectionView.length=%s",e.models.length,t.children.length),n},_getBounds:function(){x.getEyeballs()?(this._scrollBounds(),this._windowScrollLimited()):this._foldCountLimited()},_scrollBounds:function(){var t=this._scrollElement.scrollTop,e=t+this._scrollElement.clientHeight;(!this._scrollTop||t<this._scrollTop)&&(this._scrollTop=t),(!this._scrollBottom||e>this._scrollBottom)&&(this._scrollBottom=e)},_windowScroll:function(){if(x.getEyeballs()){if(!this._viewReady())return b("Skipping windowScroll until view is ready...."),void this._windowScrollLimited();this._scrollBounds();var e=this,t=this._scrollTop,n=this._scrollBottom;delete this._scrollTop,delete this._scrollBottom,this.findModelsInViewport(t,n).forEach(function(t){t.get("unread")&&e._store.markItemRead(t.id)}),this._foldCount()}},findModelsInViewport:function(t,e){var n,i=this._collectionView,o=i.collection;o.models.length===i.children.length?n=o.models:(b("Mismatch between childCollection.models.length (%s) and cv.children.length (%s) resorting to oddness",o.models.length,i.children.length),n=o.models.filter(function(t){return i.children.findByModelCid(t.cid)}));var r=u.sortedIndex(n,t,function(t){return"number"==typeof t?t:i.children.findByModelCid(t.cid).el.offsetTop}),a=n.slice(r);if(e===Number.POSITIVE_INFINITY)return a;var s=u.sortedIndex(a,e,function(t){return"number"==typeof t?t:i.children.findByModelCid(t.cid).el.offsetTop});return a.slice(0,s).filter(function(t){return!t.get("parentId")})},_resetFoldModel:function(){_.set({unreadAbove:0,unreadBelow:0,hasUnreadBelow:!1,hasUnreadAbove:!1,oldestUnreadItemId:null,firstUnreadItemIdBelow:null,mentionsAbove:0,mentionsBelow:0,hasMentionsAbove:!1,hasMentionsBelow:!1,oldestMentionId:null,firstMentionIdBelow:null})},_foldCount:function(){if(!this._viewReady())return b("Skipping fold count until view is ready"),void this._foldCountLimited();var t=this._store,e=t.getItems();if(e.length){var n=this._scrollElement,i=n.scrollTop,o=i+n.clientHeight;o>=n.scrollHeight-10&&(o=Number.POSITIVE_INFINITY);var r=this.findModelsInViewport(i,o);if(r.length){var a=r[0].id,s=t.getMentions(),l=function(t){return t<a},c=e.filter(l),u=c.length,h=c[0],d=s.filter(l),p=d.length,m=d[0],f=function(t){return a<t},g=e.filter(f)[0],v=s.filter(f)[0];_.set({unreadAbove:u,unreadBelow:e.length-u,hasUnreadAbove:0<u,hasUnreadBelow:0<e.length-u,oldestUnreadItemId:h,firstUnreadItemIdBelow:g,mentionsAbove:p,mentionsBelow:s.length-p,hasMentionsAbove:0<p,hasMentionsBelow:0<s.length-p,oldestMentionId:m,firstMentionIdBelow:v})}else this._resetFoldModel()}else this._resetFoldModel()},_eyeballStateChange:function(t){t&&this._getBounds()}};var _=new m.Model({defaults:{unreadAbove:0,unreadBelow:0,hasUnreadBelow:!1,hasUnreadAbove:!1,belowItemId:null}}),t={acrossTheFold:function(){return _},markAllRead:function(){var t=c();a(function(){p.userRoom.delete("/unreadItems/all").then(function(){t.markAllRead()})})},markItemRead:function(t){c().markItemRead(t)},syncCollections:function(t){new s(c(),t.chat)},monitorViewForUnreadItems:function(t,e){var n=c();return new i(o,e.collection),new r(t,n,e)},_TestOnlyTroupeUnreadItemsViewportMonitor:r,getStore:function(){return o}};return t.UnreadItemStore=g,window._unreadItems=t}()},function(t,e,n){"use strict";var i=n(9),o=n(0),r=n(5),a=n(47),s={baseUrl:"https://api.gitter.im/",accessToken:"",getUserId:function(){return""},getTroupeId:function(){return""}};function l(t){this._config=t=o.extend({},s,t);var e=t.baseUrl,n=this.base=new a(this,t,e,"");Object.keys(a.prototype).forEach(function(t){if(0!==t.indexOf("_")){var e=n[t];"function"==typeof e&&(this[t]=e.bind(n))}},this),this.user=new a(this,t,e,this._getUserUrl),this.room=new a(this,t,e,this._getRoomUrl),this.userRoom=new a(this,t,e,this._getUserRoomUrl),this.priv=new a(this,t,e,"/private"),this.web=new a(this,t,"","")}o.extend(l.prototype,r.Events,{_getUserUrl:function(){return"/v1/user/"+this._config.getUserId()},_getRoomUrl:function(){return"/v1/rooms/"+this._config.getTroupeId()},_getUserRoomUrl:function(){return"/v1/user/"+this._config.getUserId()+"/rooms/"+this._config.getTroupeId()},_getAccessToken:i.method(function(){var t=this._config.accessToken;return"function"==typeof t?t():t})}),t.exports=l},function(t,e,n){"use strict";var o=n(9),u=n(10),r=n(0),h=n(6)("app:api-client"),a={timeout:6e4,dataType:"json"},s={timeout:6e4,dataType:"json",contentType:"application/json"};function d(t,e,n,i,o){var r=n.responseJSON,a=r&&(r.message||r.error),s=new Error(a||o||i||"AJAX error");return s.url=e,s.friendlyMessage=a,s.response=r,s.method=t,s.status=n.status,s.statusText=n.statusText,s}function i(t,e,n,i){this._client=t,this._config=e,this._urlRoot=n,this._baseUrlFn="string"==typeof i?function(){return i}:i.bind(t)}i.prototype={get:function(t,e,n){var i=r.extend({},a,n);return this._execute("get",t,e,i)},post:function(t,e,n){var i=r.extend({},s,n);return this._execute("post",t,e,i)},patch:function(t,e,n){var i=r.extend({},s,n);return this._execute("patch",t,e,i)},put:function(t,e,n){var i=r.extend({},s,n);return e||delete i.contentType,this._execute("put",t,e,i)},delete:function(t,e,n){var i=r.extend({},s,n);return e||delete i.contentType,this._execute("delete",t,e,i)},uri:function(t){return this.channel(t)},url:function(t){return this._urlRoot+this.channel(t)},channel:function(t){var e=this._baseUrlFn();return t?e+t:e},channelGenerator:function(t){return this.channel.bind(this,t)},_execute:function(s,i,t,l){var c;return c="application/json"===l.contentType?JSON.stringify(t):t,this._client._getAccessToken().bind(this).then(function(e){var a=this.url(i),n=!1!==l.global,t=new o(function(o,r){var t={};e&&(t["x-access-token"]=e),h("%s: %s",s,a),u.ajax({url:a,contentType:l.contentType,dataType:l.dataType,type:s,global:n,data:c,timeout:l.timeout,async:l.async,headers:t,success:function(t,e,n){var i=n.status;if(400<=i&&1223!==i)return r(d(s,a,n,e,"HTTP Status "+i));o(t)},error:function(t,e,n){return r(d(s,a,t,e,n))}})}).bind(this);return n&&t.catch(function(t){throw this._client.trigger("error",t),t}),t})}},t.exports=i},function(t,e,n){"use strict";var i=n(14);t.exports={debounce:function(t,e){var n;return function(){n&&i.cancel(n),n=i(function(){n=void 0,t.call(e)})}},throttle:function(t,e){var n;return function(){n||(n=i(function(){n=void 0,t.call(e)}))}},intervalUntil:function(e,t){var n=Date.now()+t;i(function t(){e(),Date.now()<n&&i(t)})}}},function(t,e,n){"use strict";var o=n(21),i=n(10),c=n(16),r=n(27);t.exports=(function(l){var s=function(t,e){this.init("tooltip",t,e)};s.prototype={constructor:s,init:function(t,e,n){var i,o,r,a,s;for(this.type=t,this.$element=l(e),this.options=this.getOptions(n),this.enabled=!c(),s=(r=this.options.trigger.split(" ")).length;s--;)"click"==(a=r[s])?this.$element.on("click."+this.type,this.options.selector,l.proxy(this.toggle,this)):"manual"!=a&&(i="hover"==a?"mouseenter":"focus",o="hover"==a?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,l.proxy(this.onenter,this)),this.$element.on(o+"."+this.type,this.options.selector,l.proxy(this.onleave,this)));this.options.selector?this._options=l.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return(t=l.extend({},l.fn[this.type].defaults,this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},onenter:function(t){this.enter(t.currentTarget)},enter:function(t){t=t||this.$element[0];var e,n=l.fn[this.type].defaults,i={};if(this._options&&l.each(this._options,function(t,e){n[t]!=e&&(i[t]=e)},this),(e=l(t)[this.type](i).data(this.type)).hoverState="in",!e.options.delay||!e.options.delay.show)return e.show();clearTimeout(this.timeout),this.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)},onleave:function(t){this.leave(t.currentTarget)},leave:function(t){t=t||this.$element[0];var e=l(t)[this.type](this._options).data(this.type);if("in"===e.hoverState){if(e.hoverState="out",this.timeout&&clearTimeout(this.timeout),!e.options.delay||!e.options.delay.hide)return e.hide();this.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)}},show:function(){var t,e,n,i,o,r,a=l.Event("show");if(s.prev&&s.prev!==this&&s.prev.hide(),(s.prev=this).hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),e=this.getPosition(),n=t[0].offsetWidth,i=t[0].offsetHeight,"vertical"===(o=this.options.placement)&&(o=this.selectBestVerticalPlacement(t,this.$element))}switch(o){case"bottom":r={top:e.top+e.height,left:e.left+e.width/2-n/2};break;case"top":r={top:e.top-i,left:e.left+e.width/2-n/2};break;case"left":r={top:e.top+e.height/2-i/2,left:e.left-n};break;case"right":r={top:e.top+e.height/2-i/2,left:e.left+e.width}}this.applyPlacement(r,o),this.$element.trigger("shown")},selectBestVerticalPlacement:function(t,e){return e[0].getBoundingClientRect().top<60?"bottom":"top"},applyPlacement:function(t,e){var n,i,o,r,a=this.tip(),s=a[0].offsetWidth,l=a[0].offsetHeight;a.offset(t).addClass(e).addClass("in"),n=a[0].offsetWidth,i=a[0].offsetHeight,"top"==e&&i!=l&&(t.top=t.top+l-i,r=!0),"bottom"==e||"top"==e?(o=0,t.left<0&&(o=-2*t.left,t.left=0,a.offset(t),n=a[0].offsetWidth,i=a[0].offsetHeight),this.replaceArrow(o-s+n,n,"left")):this.replaceArrow(i-l,i,"top"),r&&a.offset(t)},replaceArrow:function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();this.$element.attr("aria-label",e),t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){var t,e=this.tip(),n=l.Event("hide");if(this.$element.trigger(n),!n.isDefaultPrevented())return e.removeClass("in"),l.support.transition&&this.$tip.hasClass("fade")?(t=setTimeout(function(){e.off(l.support.transition.end).detach()},500),e.one(l.support.transition.end,function(){clearTimeout(t),e.detach()})):e.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var t=this.$element;t.attr("title")&&"string"!=typeof t.attr("data-original-title")&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return l.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var t=this.$element,e=this.options;return"function"==typeof e.title?e.title.call(t[0]):e.title},tip:function(){return this.$tip=this.$tip||l(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var e=t?l(t.currentTarget)[this.type](this._options).data(this.type):this;e.tip().hasClass("in")?e.hide():e.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var t=l.fn.tooltip,e=r();l.fn.tooltip=function(i){if(!e)return this.each(function(){var t=l(this),e=t.data("tooltip"),n="object"===o(i)&&i;e||t.data("tooltip",e=new s(this,n)),"string"==typeof i&&e[i]()})},l.fn.tooltip.Constructor=s,l.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},l.fn.tooltip.noConflict=function(){return l.fn.tooltip=t,this}}(i),i)},,function(t,e,n){"use strict";var i=n(3).default,o=n(19),r=n(62),a=n(63),s=n(68);i.registerHelper("cdn",o),i.registerHelper("widget",r),i.registerHelper("avatarSrcSet",a),i.registerHelper("sanitizeHref",s)},function(t,e,n){"use strict";var i=n(0),_=n(4),o=n(13),b=n(86),w={};function y(){this._widgets=[]}function r(t,e,n){return w[t].getPrerendered(e,n)}y.prototype.add=function(t){this._widgets.push(t)},y.prototype.destroy=function(){i.each(this._widgets,function(t){t.destroy()}),this._widgets=[]};var a=_.Behavior.extend({initialize:function(){if(this.view.templateHelpers)throw new Error("Cannot use templateHelpers with Widgets");this.view.templateHelpers=function(){return{_view:this,getPrerendered:r}}},onDestroy:function(){this.view.widgetManager&&(this.view.widgetManager.destroy(),this.view.widgetManager=null)}});_.Renderer={render:function(t,e,n){if(!t){var i="";if(n&&(i+=n.childViewContainer,0<n.$el.length)){var o=n.$el[0];o.id&&(i+="#"+o.id),0<o.classList.length&&(i+="."+Array.prototype.join(o.classList,"."))}throw new Error("Cannot render the template since it's false, null or undefined. For context, we tried to render into this element: "+i)}var r=("function"==typeof t?t:_.TemplateCache.get(t))(e),a=e.prerenderedViews;if(!a)return r;var s=b(r),l=n.widgetManager,c=s.querySelectorAll(".widget"),u=c.length;u&&!l&&(l=new y,n.widgetManager=l);for(var h=0;h<u;h++){var d=c[h],p=d.getAttribute("data-widget-id");if(p){var m=a[p];if(m){d.removeAttribute("data-widget-id");var f=w[m.widgetName],g=m.model;g.el=d,g.template=!1;var v=new f(g);v.render(),l.add(v)}}}return s}},o.register("Widgets",a),t.exports={register:function(n){var t=i.keys(n);i.each(t,function(t){var e=n[t];w[t]=e})},Behavior:a}},function(t,e,n){"use strict";var r=n(0),a=n(1);n(165),t.exports={initialize:function(){var t;if(t=r.result(this,"keyboardEvents")){var n=this,i=/\s+/,o=function(t,e){r.isFunction(e)||(e=n[e]),e&&n.listenTo(a,"keyboard."+t,e,n)};r.each(t,function(e,t){if(i.test(t)){var n=t.split(i);r.each(n,function(t){o(t,e)})}else o(t,e)})}}}},function(t,e,n){"use strict";var i=n(8),o=n(77),r=n(9),a=n(1);function s(t){window.location.href=t}t.exports=function(e){return a.trigger("account.logout-start"),r.all([i.web.post("/logout"),o.uninstall()]).spread(function(t){e?s(e):t&&t.redirect?s(t.redirect):s("/")}).catch(function(){s(e||"/")})}},function(t,e,n){"use strict";t.exports=function(){return function(t){return t||(t=""),"../"+t}}},function(t,e,n){"use strict";t.exports=function(n){var i=n.emailBasePath,o=n.webBasepath;return n.emailBasePath&&n.webBasepath?function(t,e){return t||(t=""),e&&e.email?i+"/_s/l/"+t:e&&e.nonrelative?o+"/_s/l/"+t:e&&e.notStatic?"/"+t:"/_s/l/"+t}:function(t,e){if(t||(t=""),e&&e.email)throw new Error("emailBasePath:".concat(n.emailBasePath," or webBasepath:").concat(n.webBasepath," not supplied"));return e&&e.notStatic?"/"+t:"/_s/l/"+t}}},function(t,e,n){"use strict";t.exports=function(t){var o=t.emailBasePath,r=t.hosts[0],a=t.cdnPrefix;return function(t,e){t||(t="");var n=e&&e.nonrelative;if(e&&e.email){if(!o)throw new Error("emailBasePath not supplied");return o+"/_s/l/"+t}var i=n?"https://":"//";return e&&e.longTermCache?i+r+"/_s/lt/"+e.longTermCache+"/"+t:e&&!0===e.notStatic?i+r+"/"+t:i+r+a+"/"+t}}},function(t,e,n){"use strict";t.exports=function(t){var a=t.emailBasePath,s=t.hosts,l=s.length,c=t.cdnPrefix;return function(t,e){if(t||(t=""),e&&e.email){if(!a)throw new Error("emailBasePath not supplied");return a+"/_s/l/"+t}for(var n=0,i=0;i<t.length;i+=3)n+=t.charCodeAt(i);var o=s[n%l],r=e&&e.nonrelative?"https://":"//";return e&&e.longTermCache?r+o+"/_s/lt/"+e.longTermCache+"/"+t:e&&!0===e.notStatic?r+o+"/"+t:r+o+c+"/"+t}}},function(t,e,n){"use strict";t.exports={attachElContent:function(t){var e,n=this.el;if("string"==typeof t)return n.innerHTML=t,this;if(t.length){n.innerHTML="";for(var i=t.length,o=0;o<i;o++){var r=t[o];3===r.nodeType&&1===r.textContent.length&&("\n"===(e=r.textContent[0])||" "===e||"\t"===e)||n.appendChild(r)}return this}return 1===t.nodeType?(n.innerHTML="",n.appendChild(t)):this.$el.html(t),this}}},function(t,e,n){"use strict";var o,r,i=n(4),a=n(5),s=n(32),l=n(90),c=n(91),u=n(1),h=n(2),d=n(18),p=n(23),m=n(92),f=n(93);t.exports=(o=i.ItemView.extend({template:l,modelEvents:{change:"render"},serializeData:function(){var t=this.model.toJSON();return t.inactive=t.removed,t.avatarUrl=t.avatarUrl||p.getForUser(t),t}}),r=i.ItemView.extend({template:c,modelEvents:{change:"render"},events:{"click #button-onetoone":function(){this.parentPopover.hide();var t=this.model.get("username");u.trigger("dispatchVueAction","changeDisplayedRoomByUrl","/".concat(t))},"click #button-matrix-dm":function(){this.parentPopover.hide();var t=h.user().get("id"),e="@".concat(this.model.get("username")),n=f(t,e);u.trigger("dispatchVueAction","changeDisplayedRoomByUrl","/".concat(n))},"click #button-mention":function(){this.parentPopover.hide();var t=this.model.get("username");u.trigger("input.append","@"+t+" ")},"click #button-remove":function(){this.parentPopover.hide();var t=this.model.get("username");u.trigger("command.room.remove",t)}},serializeData:function(){var t=this.model.toJSON(),e=t.username!==h.user().get("username"),n=t.removed,i=t.has_gitter_login&&e&&!n,o=m(t.username),r=e,a=e&&!m(t.username)&&h.isTroupeAdmin();return h.inOneToOneTroupeContext()&&h.troupe().get("user").username===t.username&&(i=!1),t.avatarUrl=t.avatarUrl||p.getForUser(t),t.inactive=t.removed,t.chatPrivately=i,t.chatPrivatelyMatrixDm=o,t.mentionable=r,t.removable=a,t.loaded=!!this.model.loaded,t}}),s.extend({initialize:function(t){var e;t.placement="horizontal",t.minHeight="88px";var n=(e=this.model?this.model.toJSON():{username:t.username,displayName:t.displayName}).username,i=new a.Model(e);m(n)||(i.sync=d.sync,i.url="/v1/users/"+n,i.fetch(function(){i.loaded=!0})),t.footerView=new r({model:i}),s.prototype.initialize.apply(this,arguments),this.view=new o({model:i,userCollection:t.userCollection})}}))},,function(t,e,n){"use strict";var o=n(3).default,r=1;t.exports=function(t,e){var n=r++,i=this.getPrerendered(t,e.hash,n);return this.prerenderedViews||(this.prerenderedViews={}),this.prerenderedViews[n]={widgetName:t,model:e.hash},new o.SafeString(i)}},function(t,e,n){"use strict";var o=n(44),r=n(23);t.exports=function(t,e){if(!t)return" height='"+e+"' width='"+e+"' src='"+r.getDefault()+"'";var n=o(t,!0);n.query.s=e;var i=o(t,!0);return i.query.s=2*e," height='"+e+"' width='"+e+"' src='"+n.toString()+"' srcset='"+i.toString()+" 2x' "}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.username||t.type&&"github"!==t.type||0<=t.username.indexOf("_"))}},function(t,e,n){"use strict";var i=n(7).avatarCdns;t.exports=function(t){if(i.length<2)return i[0]+t;var e=function(t){var e=0;if(!t.length)return e;var n=t.length-10;n<0&&(n=0);for(var i=n;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e&=e;return e<0?-e:e}(t);return i[e%i.length]+t}},function(t,e,n){"use strict";t.exports=function(t){if(0!==t.indexOf("https://pbs.twimg.com/profile_images/"))return null;var e=t.slice("https://pbs.twimg.com/profile_images/".length);return{id:e.slice(0,e.indexOf("/")),filename:e.slice(e.indexOf("/")+1)}}},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACABAMAAAAxEHz4AAAAKlBMVEX8/Pz19fXe39/x8fH////i4+Pq6+vm5+fq6urz8/Ph4uLn6Oj39/fk5eW+lbN7AAAAhklEQVR4Ae3YNwGCMRBH8SABJOCAIuFvgGKAYoCigA0Jt7KxMiPhJma80MtXqWPeS3K3/QQkVKr/FWr1/4oBAAAAAAAAaEtdAACABzCWpqc1l4an1Zea0QIAAAAAAAAAS7NVDlibLd4DzzLAtT8AAAAAAACArfvutPbuG77CAAAAAAAAPu0I3sfFo7DP7QUAAAAASUVORK5CYII="},function(t,e,n){"use strict";t.exports=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=t.toLowerCase();return 0===e.indexOf("http:")||0===e.indexOf("https:")?t:""}},function(t,e,n){"use strict";t.exports=function(){if(!window.Uint8Array)return!1;if(!("serviceWorker"in navigator))return!1;var t=window.ServiceWorkerRegistration;return!!t&&"pushManager"in t.prototype}},function(t,e,n){"use strict";var l=n(80),c=n(44);function u(t){return{src:"https://avatars1.githubusercontent.com/u/0?s="+t,size:t,srcset:"https://avatars1.githubusercontent.com/u/0?s="+2*t+" 2x"}}function h(t,e){var n,i=t.pathname;n=e<=24?"_mini":e<=48?"_normal":e<=73?"_bigger":"",t.pathname=t.pathname.replace("_normal",n);var o=t.toString();return t.pathname=i,o}function i(t,e,n){return-1===t.indexOf("_")?"https://avatars"+l(t)+".githubusercontent.com/"+t+"?"+(e?"v="+e:"")+"&s="+n:"/api/private/user-avatar/"+t+"?s="+n}t.exports=function(t,e){if(e=e||60,t){if(t.avatarUrlSmall)return{src:t.avatarUrlSmall.replace("=60","="+e),size:e,srcset:t.avatarUrlSmall.replace("=60","="+2*e)+" 2x"};if(t.gravatarImageUrl)return function(t,e){var n=c(t.gravatarImageUrl,!0);if(!n)return u(e);-1!==n.hostname.indexOf("github")&&t.username&&n.set("hostname","avatars"+l(t.username)+".githubusercontent.com");var i,o,r,a,s={size:e,srcSize:e};return"undefined"!=typeof window&&(s.srcSize=e*(window.devicePixelRatio||1)),"pbs.twimg.com"===n.hostname?{src:h(r=n,(a=s).srcSize),size:a.size,srcset:h(r,2*a.size)+" 2x"}:"media.licdn.com"===n.hostname?(o=s,{src:(i=n).toString(),size:o.size,srcset:i+" 2x"}):function(t,e){var n=-1!==t.hostname.indexOf("google")?"sz":"s";t.query[n]=e.srcSize;var i=t.toString();t.query[n]=2*e.size;var o=t.toString()+" 2x";return{src:i,size:e.size,srcset:o}}(n,s)}(t,e);if(t.username){var n=t.gravatarVersion||t.gv;return{src:i(t.username,n,e),size:e,srcset:i(t.username,n,2*e)+" 2x"}}}return u(e)}},,,function(t,e,n){"use strict";var i=n(10),s=n(2),l=n(7),c=n(6)("app:link-handler"),u=n(1),h=n(155),o=n(28);function r(t,e){var n=t.protocol+"//"+t.host===l.basePath,i=window.location;if(!(e&&e.appFrame||i.scheme!==t.scheme||i.host!==t.host||i.pathname!==t.pathname||i.search!==t.search))return c("routeLink hash change -> window.location=".concat(t.href)),window.location=t.href,!0;if(n&&h(t.pathname)){var o=t.pathname.substring(1),r="chat";o===s.user().get("username")&&(r="home");var a=t.pathname+t.search;return c("routeLink internal link navigation=".concat(a)),u.trigger("navigation",a,r,o),!0}}t.exports={installLinkHandler:function(){i(document).on("click","a",function(t){var e=t.currentTarget;o.get(e,"disableRouting")||r(e)&&t.preventDefault()})},routeLink:r}},,function(t,e,n){"use strict";var i=n(166);t.exports=function(){switch(i()){case"Mac":return{cmd:"",gitter:"ctrl"};case"Windows":return{cmd:"ctrl",gitter:""};default:return{cmd:"ctrl",gitter:"+alt"}}}()},function(t,e,n){"use strict";var i=n(0),o=n(5),r=n(2),a=n(15),s=n(180),l=n(181),c=n(35),u=n(12),h=n(29).LiveCollection,d=n(30),p=n(183),m=n(18),f=n(184),g=o.Model.extend({idAttribute:"id",initialize:function(){this.listenTo(this,"sync",this.triggerSynced),this.listenTo(this,"request",this.triggerSyncing),this.listenTo(this,"error",this.triggerSyncError),this.listenTo(this,"remove",function(){this.stopListening(this)})},triggerSynced:function(){this._syncErrorTime=null,this.trigger("syncStatusChange","synced")},triggerSyncing:function(){this.trigger("syncStatusChange","syncing")},triggerSyncError:function(){this._syncErrorTime=a(),this.trigger("syncStatusChange","syncerror")},parse:function(t){return t.sent&&(t.sent=a(t.sent,a.defaultFormat)),t.editedAt&&(t.editedAt=a(t.editedAt,a.defaultFormat)),t.unread&&t.fromUser&&t.fromUser.id===r.getUserId()&&(t.unread=!1),t},toJSON:function(){var t=i.clone(this.attributes),e=this.get("sent");return e?t.sent=e.format():delete t.sent,delete t.burstStart,delete t.fromUser,delete t.html,t},hasSyncError:function(){return!!this._syncErrorTime},sync:m.sync}),v=h.extend({model:g,modelName:"chat",client:function(){return d.getClient()},urlTemplate:"/v1/rooms/:troupeId/chatMessages",contextModel:r.contextModel(),comparator:function(t,e){var n=t.get("sent")||t._syncErrorTime,i=e.get("sent")||e._syncErrorTime;return n?i?n.valueOf()-i.valueOf():-1:i?1:0},initialize:function(){this.listenTo(this,"add",function(t,e){e.once("sort",function(){s.calc.call(this,t)})}),this.listenTo(this,"remove",function(){s.parse(this)}),this.listenTo(this,"sync",function(t){t instanceof o.Model&&this.checkClientClockSkew(t)}),this.listenTo(this,"change:sent",function(t){this.checkClientClockSkew(t)}),this.listenTo(this,"reset sync",function(){s.parse(this)}),this.listenTo(r.troupe(),"change:id",function(){this.setAtTop(!1)})},transformModel:function(t){if(t.unread){var e=t.id,n=this.get(e);n&&!1===n.unread&&delete t.unread}return t},getQuery:function(){return{lookups:["user"],includeThreads:p()}},getSnapshotExtras:function(){return{lookups:["user"],includeThreads:p()}},parse:function(t){if(t.lookups){var e=f.parseChats(t);return s.parse(e)}return s.parse(t)},findModelForOptimisticMerge:function(e){return this.find(function(t){return!t.id&&t.get("text")===e.get("text")})},checkClientClockSkew:function(t){var e=t.attributes.sent,n=t.previousAttributes().sent;if(e&&n){var i=e.valueOf()-n.valueOf();2e4<i&&u.warn("Clock skew is "+i+"ms")}},sync:m.sync});c.mixin(v,l);var _=o.Model.extend({idAttribute:"id"}),b=h.extend({model:_,modelName:"chatReadBy",client:function(){return d.getClient()},urlTemplate:"/v1/rooms/:troupeId/chatMessages/:chatId/readBy",contextModel:function(){return new o.Model({troupeId:r.getTroupeId(),chatId:this.chatMessageId})},initialize:function(t,e){var n=e.userCollection;n&&(this.transformModel=function(t){var e=n.get(t.id);return e?e.toJSON():t}),this.chatMessageId=e.chatMessageId},sync:m.sync});t.exports={ReadByModel:_,ReadByCollection:b,ChatModel:g,ChatCollection:v}},function(t,e,n){"use strict";var i=n(9),o=n(69);t.exports={uninstall:i.method(function(){return!!o()&&!!navigator.serviceWorker.controller&&i.resolve(navigator.serviceWorker.ready).then(function(t){return!!t&&t.pushManager.getSubscription()}).then(function(t){return!!t&&t.unsubscribe()})})}},function(t,e,n){"use strict";var a=n(0),s={create:"post",update:"put",patch:"patch",delete:"delete",read:"get"};t.exports=function(r){return{sync:function(t,e,n){var i=n.url||a.result(e,"url");if(!i)throw new Error("URL required");var o=function(t,e,n,i){switch(t){case"get":return r.get(e,i.data);case"patch":return i.attrs?r.patch(e,i.attrs):r.patch(e,n);default:return r[t](e,n)}}(s[t],i,e,n);return n.success&&(o=o.tap(n.success)),n.error&&(o=o.catch(n.error)),e.trigger("request",e,null,a.extend({},n,{method:t})),o}}}},function(t,e,n){"use strict";var m=n(15);t.exports=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.lang,i=e.tzOffset,o=e.compact,r=e.now,a=e.forceUtc;if(!t)return"";var s=m(t);n&&s.locale("en"===n?"en-gb":n);var l=a?0:i;void 0!==l&&s.utcOffset(-l);var c,u,h=m(r).utcOffset(s.utcOffset()),d=a?" [UTC]":"",p=o?"":" HH:mm";return u=h,(c=s).date()===u.date()&&c.month()===u.month()&&c.year()===u.year()?s.format("HH:mm".concat(d)):s.year()===h.year()?s.format("MMM DD".concat(p).concat(d)):s.format("MMM DD YYYY".concat(p).concat(d))}},function(t,e,n){"use strict";t.exports=function(t){if(!t||!t.length)return 1;for(var e=5381,n=0;n<t.length&&n<8;n++)e=(e<<5)+e+t.charCodeAt(n);return(0<e?e:-e)%3}},function(t,e,n){"use strict";var i=Element.prototype,o=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector;t.exports=function(t,e){return o.call(t,e)}},,function(t,e,n){"use strict";var s=window.Notification,l=n(19);t.exports=function(t,e){var n=t.title,i=t.text,o=t.icon||l("images/icon-logo-red-64.png"),r=new s(n,{body:i,icon:o}),a=setTimeout(function(){r.onclick=null,r.close()},1e4);r.onclick=function(){clearTimeout(a),r.onclick=null,r.close(),window.focus(),e(t)}}},,function(t,e,n){"use strict";var i=n(2),o=n(40),r=!1;t.exports={track:function(){r||(r=!0)},getAuthDetails:function(){return r?{troupeId:i.getTroupeId(),eyeballs:o.getEyeballs()?1:0}:{}},getEyeballs:function(){return r&&o.getEyeballs()?1:0}}},function(t,e,n){"use strict";t.exports=function(t){var e=document.createElement("DIV");e.innerHTML=t.trim();var n=e.children,i=n.length;if(1===i)return n[0];for(var o=document.createDocumentFragment(),r=0;r<i;r++)o.appendChild(n[0]);return o}},function(t,e,n){"use strict";t.exports={currentView:null,show:function(t){this.currentView&&this.currentView.hideInternal(),(this.currentView=t).navigable=!0,t.show(),this.currentView.listenTo(this.currentView,"hide-modal",this.destroy.bind(this))},destroy:function(){this.currentView&&(this.currentView.navigationalHide(),this.currentView=null)}}},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o;return this.escapeExpression("function"==typeof(o=null!=(o=e.role||(null!=t?t.role:t))?o:e.helperMissing)?o.call(t,{name:"role",hash:{},data:i}):o)},3:function(t,e,n,i){return"inactive"},5:function(t,e,n,i){return'<div class="trpStatus" id="status"> </div>'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a,s=e.helperMissing,l="function",c=this.escapeExpression,u=this.lambda,h='<div\n  class="trpDisplayPicture avatar-'+c(typeof(r=null!=(r=e.id||(null!=t?t.id:t))?r:s)===l?r.call(t,{name:"id",hash:{},data:i}):r)+" avatar-"+c(typeof(r=null!=(r=e.avatarSize||(null!=t?t.avatarSize:t))?r:s)===l?r.call(t,{name:"avatarSize",hash:{},data:i}):r)+" "+c(typeof(r=null!=(r=e.presenceClass||(null!=t?t.presenceClass:t))?r:s)===l?r.call(t,{name:"presenceClass",hash:{},data:i}):r)+" "+(null!=(o=e.if.call(t,null!=t?t.role:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+" "+(null!=(o=e.if.call(t,null!=t?t.inactive:t,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+'">\n  <img src="'+c(u(null!=(o=null!=t?t.avatarSrcSet:t)?o.src:o,t))+'" srcset="'+c(u(null!=(o=null!=t?t.avatarSrcSet:t)?o.srcset:o,t))+'" height="'+c(typeof(r=null!=(r=e.imgSize||(null!=t?t.imgSize:t))?r:s)===l?r.call(t,{name:"imgSize",hash:{},data:i}):r)+'" width="'+c(typeof(r=null!=(r=e.imgSize||(null!=t?t.imgSize:t))?r:s)===l?r.call(t,{name:"imgSize",hash:{},data:i}):r)+'" class="avatar__image" alt="'+c(typeof(r=null!=(r=e.alt||(null!=t?t.alt:t))?r:s)===l?r.call(t,{name:"alt",hash:{},data:i}):r)+'">\n  ';return r=null!=(r=e.showStatus||(null!=t?t.showStatus:t))?r:s,a={name:"showStatus",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i},o=typeof r===l?r.call(t,a):r,e.showStatus||(o=e.blockHelperMissing.call(t,o,a)),null!=o&&(h+=o),h+"\n</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){return'<div class="popover-footer">\n  <div class="popover-footer-content"></div>\n</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o;return'<div>\n  <div class="arrow"></div>\n  <div class="popover-inner">\n    <h5 class="popover-title"></h5>\n    <div class="popover-content"></div>\n  </div>\n</div>\n'+(null!=(o=e.if.call(t,null!=t?t.footerView:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o;return"  <div class='inactive'>\n    <p><small>"+this.escapeExpression("function"==typeof(o=null!=(o=e.username||(null!=t?t.username:t))?o:e.helperMissing)?o.call(t,{name:"username",hash:{},data:i}):o)+" is not active on Gitter.</small></p>\n  </div>\n"},3:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression;return'    <h3><a href="'+a("function"==typeof(o=null!=(o=e.profile||(null!=t?t.profile:t))?o:r)?o.call(t,{name:"profile",hash:{},data:i}):o)+'" target="_blank" rel="nofollow noopener noreferrer">'+a("function"==typeof(o=null!=(o=e.username||(null!=t?t.username:t))?o:r)?o.call(t,{name:"username",hash:{},data:i}):o)+"</a></h3>\n"},5:function(t,e,n,i){var o;return"    <h3>"+this.escapeExpression("function"==typeof(o=null!=(o=e.username||(null!=t?t.username:t))?o:e.helperMissing)?o.call(t,{name:"username",hash:{},data:i}):o)+"</h3>\n"},7:function(t,e,n,i){var o,r=this.lambda,a=this.escapeExpression;return'    <div class="vcard-stats">\n        <strong class="vcard-stat-count">'+a(r(null!=(o=null!=t?t.github:t)?o.followers:o,t))+'</strong>\n        followers &nbsp;\n        <strong class="vcard-stat-count">'+a(r(null!=(o=null!=t?t.github:t)?o.public_repos:o,t))+'</strong>\n        repos &nbsp;\n        <strong class="vcard-stat-count">'+a(r(null!=(o=null!=t?t.github:t)?o.following:o,t))+"</strong>\n        following &nbsp;\n    </div>\n"},9:function(t,e,n,i){var o;return"      <li>\n        <div class='trpUserDetails__icon'>\n          <i class='octicon octicon-organization'></i>\n        </div>\n        <div class=\"trpUserDetails__text\">"+this.escapeExpression("function"==typeof(o=null!=(o=e.company||(null!=t?t.company:t))?o:e.helperMissing)?o.call(t,{name:"company",hash:{},data:i}):o)+"</div>\n      </li>\n"},11:function(t,e,n,i){var o;return"      <li>\n        <div class='trpUserDetails__icon'>\n          <i class='octicon octicon-location'></i>\n        </div>\n        <div class=\"trpUserDetails__text\">"+this.escapeExpression("function"==typeof(o=null!=(o=e.location||(null!=t?t.location:t))?o:e.helperMissing)?o.call(t,{name:"location",hash:{},data:i}):o)+"</div>\n      </li>\n"},13:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression;return'      <li>\n        <div class=\'trpUserDetails__icon\'>\n          <i class=\'octicon octicon-mail\'></i>\n        </div>\n        <div class="trpUserDetails__text"><a class="email" href="mailto:'+a("function"==typeof(o=null!=(o=e.email||(null!=t?t.email:t))?o:r)?o.call(t,{name:"email",hash:{},data:i}):o)+'">'+a("function"==typeof(o=null!=(o=e.email||(null!=t?t.email:t))?o:r)?o.call(t,{name:"email",hash:{},data:i}):o)+"</a></div>\n      </li>\n"},15:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression;return'      <li>\n        <div class=\'trpUserDetails__icon\'>\n          <i class=\'octicon octicon-link\'></i>\n        </div>\n        <div class="trpUserDetails__text"><a target="_blank" href="'+a("function"==typeof(o=null!=(o=e.website||(null!=t?t.website:t))?o:r)?o.call(t,{name:"website",hash:{},data:i}):o)+'" class="url" rel="nofollow noreferrer noopener me">'+a("function"==typeof(o=null!=(o=e.website||(null!=t?t.website:t))?o:r)?o.call(t,{name:"website",hash:{},data:i}):o)+"</a></div>\n      </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r;return(null!=(o=e.if.call(t,null!=t?t.inactive:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'<div style="float: left"><img '+(null!=(o=e.avatarSrcSet.call(t,null!=t?t.avatarUrl:t,128,{name:"avatarSrcSet",hash:{},data:i}))?o:"")+' class="avatar-l"/></div>\n<div class="trpPopoverDetails">\n  <h2>'+this.escapeExpression("function"==typeof(r=null!=(r=e.displayName||(null!=t?t.displayName:t))?r:e.helperMissing)?r.call(t,{name:"displayName",hash:{},data:i}):r)+"</h2>\n\n"+(null!=(o=e.if.call(t,null!=t?t.profile:t,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.program(5,i,0),data:i}))?o:"")+"\n"+(null!=(o=e.if.call(t,null!=t?t.github:t,{name:"if",hash:{},fn:this.program(7,i,0),inverse:this.noop,data:i}))?o:"")+'\n  <ul class="trpUserDetails">\n'+(null!=(o=e.if.call(t,null!=t?t.company:t,{name:"if",hash:{},fn:this.program(9,i,0),inverse:this.noop,data:i}))?o:"")+"\n"+(null!=(o=e.if.call(t,null!=t?t.location:t,{name:"if",hash:{},fn:this.program(11,i,0),inverse:this.noop,data:i}))?o:"")+"\n"+(null!=(o=e.if.call(t,null!=t?t.email:t,{name:"if",hash:{},fn:this.program(13,i,0),inverse:this.noop,data:i}))?o:"")+"\n"+(null!=(o=e.if.call(t,null!=t?t.website:t,{name:"if",hash:{},fn:this.program(15,i,0),inverse:this.noop,data:i}))?o:"")+"  </ul>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){return'  <button class="trpBtnRed trpButtonSmall" id="button-remove">\n    Remove\n  </button>\n'},3:function(t,e,n,i){var o;return'  <button class="trpBtnLightGrey trpButtonSmall" id="button-mention">\n    Mention\n  </button>\n'+(null!=(o=e.if.call(t,null!=t?t.profile:t,{name:"if",hash:{},fn:this.program(4,i,0),inverse:this.noop,data:i}))?o:"")},4:function(t,e,n,i){var o;return'  <a href="'+this.escapeExpression("function"==typeof(o=null!=(o=e.profile||(null!=t?t.profile:t))?o:e.helperMissing)?o.call(t,{name:"profile",hash:{},data:i}):o)+'" target="_blank" class="trpBtnLightGrey trpButtonSmall open-profile">Open Profile</a>\n'},6:function(t,e,n,i){return'  <button class="trpBtnGreen trpButtonSmall" id="button-onetoone">\n    Chat Privately\n  </button>\n'},8:function(t,e,n,i){return'  <button class="trpBtnGreen trpButtonSmall" id="button-matrix-dm">\n    Chat Privately\n  </button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o;return(null!=(o=e.if.call(t,null!=t?t.removable:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+(null!=(o=e.if.call(t,null!=t?t.mentionable:t,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+(null!=(o=e.if.call(t,null!=t?t.chatPrivately:t,{name:"if",hash:{},fn:this.program(6,i,0),inverse:this.noop,data:i}))?o:"")+(null!=(o=e.if.call(t,null!=t?t.chatPrivatelyMatrixDm:t,{name:"if",hash:{},fn:this.program(8,i,0),inverse:this.noop,data:i}))?o:"")+"\n"},useData:!0})},function(t,e,n){"use strict";t.exports=function(t){return 0<=t.indexOf(":")}},function(t,e,n){"use strict";var i=n(233);t.exports=function(t,e){return i(t),i(e),"matrix/".concat(t,"/").concat(e)}},function(t,e,n){"use strict";var i=n(8),o=n(6)("app:ping");window.setInterval(function(){i.web.get("/api_web/private/ping",void 0,{global:!1}).catch(function(t){o("An error occurred pinging the server: %j",t)})},6e5)},function(t,e,n){"use strict";var a=n(15),s=n(137),l=n(7);t.exports=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=l.basePath;if(i){var r=a(n).format("YYYY/MM/DD");return s(o,t,"archives",r,"?at=".concat(e))}return s(o,t,"?at=".concat(e))}},function(t,e,n){"use strict";t.exports=function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var t=["("," -webkit- -moz- -o- -ms- ".split(" ").join("touch-enabled),("),"heartz",")"].join("");return window.matchMedia(t).matches}},function(t,e,n){"use strict";var o;try{o=window.localStorage}catch(t){}function i(){this.values={}}function r(){}i.prototype={get:function(t){return this.values[t]||""},set:function(t,e){this.values[t]=e},remove:function(t){delete this.values[t]},getKeys:function(){return Object.keys(this.values)}},r.prototype={get:function(t){try{return o[t]||""}catch(t){return""}},set:function(t,e){try{o[t]=e}catch(t){}},remove:function(t){try{o.removeItem(t)}catch(t){}},getKeys:function(){try{for(var t=o.length,e=[],n=0;n<t;n++){var i=o.key(n);e.push(i)}return e}catch(t){return[]}}},t.exports=function(){if(!o)return!1;try{return o._drafty_test_key=1,o.removeItem("_drafty_test_key"),!0}catch(t){return!1}}()?new r:new i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(12),o=n(1);t.exports=function(t,e,n){o.trigger("stats.event","live.collection.error"),o.trigger("stats.event","live.collection.error."+t),i.error(t+" live collection error",n)}},,function(t,e,n){"use strict";var i=n(247),o=n(14),r=n(42);new i("source-sans-pro",{weight:"normal"}).load().then(function(){o(function(){document.documentElement.className+=" fonts-loaded",r.set("webfontsLoaded",!0)})})},,,,function(t,e,n){"use strict";var s=n(0),l=n(9),c=n(12);t.exports=function(t,e,n){var i,o,r=e.reduce(function(t,e){return t[e]=!0,t},{}),a=(i=t,o=n,s.throttle(function(){return l.try(function(){return o.call(i)}).catch(function(t){c.error("Auto model save failed: "+t)})},1500,{leading:!1}));t.listenTo(t,"change",function(){t.changed&&Object.keys(t.changed).some(function(t){return r[t]})&&a()})}},function(t,e,n){"use strict";t.exports=function(){var t=new Date,e=t.toTimeString().match(/\(([^\)]+)\)/),n=e&&e[1]||"",i=t.getTimezoneOffset(),o=0<=i?"+":"-";i=Math.abs(i);var r=Math.floor(i/60),a=Math.round(i%60);return{offset:o+(9<r?r:"0"+r)+(9<a?a:"0"+a),iso:o+(9<r?r:"0"+r)+":"+(9<a?a:"0"+a),abbr:n,iana:function(){try{return(new window.Intl.DateTimeFormat).resolvedOptions().timeZone}catch(t){return}}()}}},function(t,e,n){"use strict";n(41)},function(t,e,n){"use strict";var i=n(2),o=n(1),r=n(144),a=i.user(),s=r({username:a&&a.get("username"),captureUnhandledRejections:!1});window.addEventListener("unhandledrejection",function(t){var e=t.detail?t.detail.reason:t.reason;s(e)}),o.on("bugreport",function(t,e){o.trigger("stats.event","error"),s(t,e)})},function(t,e,n){"use strict";var i=n(7),o=n(260);function r(t){return t.replace(/\/_s\/\w+\//,"/_s/l/")}var a={username:null,captureUnhandledRejections:!0};t.exports=function(t){var e=i.ravenUrl,n=Object.assign({},a,t);return e?(o.config(e,{release:i.version,captureUnhandledRejections:n.captureUnhandledRejections,dataCallback:function(t){try{t.stacktrace.frames.forEach(function(t){t.filename&&(t.filename=r(t.filename))}),t.culprit&&(t.culprit=r(t.culprit))}catch(t){}return t},ignoreErrors:["TransportError","BayeuxError","NoConnections","top.GLOBALS","originalCreateNotification","canvas.contentDocument","MyApp_RemoveAllHighlights","http://tt.epicplay.com","Can't find variable: ZiteReader","jigsaw is not defined","ComboSearch is not defined","http://loading.retry.widdit.com/","atomicFindClose","fb_xd_fragment","bmi_SafeAddOnload","EBCallBackMessageReceived","conduitPage"],ignoreUrls:[/graph\.facebook\.com/i,/connect\.facebook\.net\/en_US\/all\.js/i,/eatdifferent\.com\.woopra-ns\.com/i,/static\.woopra\.com\/js\/woopra\.js/i,/extensions\//i,/^chrome:\/\//i,/127\.0\.0\.1:4001\/isrunning/i,/webappstoolbarba\.texthelp\.com\//i,/metrics\.itunes\.apple\.com\.edgesuite\.net\//i]}).install(),o.setUserContext({username:n.username}),function(t,e){return o.captureException(t,e)}):function(){}}},,function(t,e,n){"use strict";t.exports={getBackendForRoom:function(t){var e=t.get&&t.get("backend")||t.backend;return e&&"GROUP"===e.type&&(e=(t.get&&t.get("group")||t.group).backedBy),e},getLinkPathCond:function(t,e){var n=e.get&&e.get("backend")||e.backend;if(n)return n.type===t?n.linkPath:void 0}}},,,function(t,e,n){"use strict";var i;t.exports=function(){return void 0!==i?i:i=function(){var t=document.createElement("div");t.className="scrollbar-measure",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),0<e}()}},function(t,e,n){"use strict";var o=n(15);t.exports=function(t,e){return t?(e&&(n=e.lang,i=e.tzOffset),t=o(t),n&&t.locale("en"===n?"en-gb":n),void 0!==i&&t.utcOffset(-i),t.format("LLL")):"";var n,i}},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o;return'<button class="trpBtnLightGrey trpButtonSmall mention">Mention</button> <a href="'+this.escapeExpression("function"==typeof(o=null!=(o=e.html_url||(null!=t?t.html_url:t))?o:e.helperMissing)?o.call(t,{name:"html_url",hash:{},data:i}):o)+'" target="_blank" class="trpBtnBlue trpButtonSmall open-in-github">Open</a>\n'},useData:!0})},function(t,e,n){"use strict";var i=n(191),o=n(19);t.exports=(i.setConfig({img_dir:o("images/emoji"),ignore_emoticons:!0}),{emojify:i,named:i.emojiNames})},,,function(t,e,n){"use strict";var i=n(156).hash,o=n(157).hash;t.exports=function(t){if(!t)return!1;var e=t.slice(1).split("/");return!i[e[0]]&&!(1<e.length&&o[e[1]])&&!/\/archives\/(all|\d{4}\/\d{2}\/\d{2})/.test(t)&&!/^\/orgs\//.test(t)&&/\/[^]+/.test(t)}},function(t,e,n){"use strict";var i=["_s","about","api","explore","home","login","mobile","settings","logout","apps","topic","topics","archive","archives","integration","integrations","-","x","learn","org","orgs","team","teams","developer","developers","job","jobs","support","contact","app","private","c","u"];t.exports={list:i,hash:i.reduce(function(t,e){return t[e.toLowerCase()]=!0,t},{})}},function(t,e,n){"use strict";var i=["topics","archive","archives","integration","integrations","home"];t.exports={list:i,hash:i.reduce(function(t,e){return t[e.toLowerCase()]=!0,t},{})}},,function(t,e,n){"use strict";var i=n(0),o=n(17);function r(t){this._callback=t,this._inactivityTimer=null,this.inactive=null,this._lastUserInteraction=null;var e=i.debounce(this._registerInteraction.bind(this),500);o.addEventListener(document,"keydown",e),o.addEventListener(document,"mousemove",e),o.addEventListener(document,"touchstart",e),o.addEventListener(window,"scroll",e),this.setInactive(!1)}r.prototype.setInactive=function(t){this.inactive!==t&&((this.inactive=t)?this._stopInactivityPoller():(this._lastUserInteraction=Date.now(),this._startInactivityPoller()),this._callback(!t))},r.prototype._registerInteraction=function(){this.setInactive(!1)},r.prototype._startInactivityPoller=function(){var t=this;t._inactivityTimer||(t._inactivityTimer=setInterval(function(){setTimeout(function(){5e4<Date.now()-t._lastUserInteraction&&t.setInactive(!0)},5)},1e4))},r.prototype._stopInactivityPoller=function(){this._inactivityTimer&&(clearTimeout(this._inactivityTimer),this._inactivityTimer=null)},t.exports=r},function(t,e,n){"use strict";var h=n(17),i=n(48),o=n(31);t.exports=function(e){var s=[document.hasFocus()],l=i.debounce(function(){var t=s.some(function(t){return t});e(!!t)});function c(t){return function(){s[t]=!0,l()}}function u(t){return function(){s[t]=!1,l()}}function n(e){var n=e.contentWindow,t=n.document.hasFocus(),i=s.push(t)-1,o=c(i),r=u(i);function a(){n&&(h.removeEventListener(n,"focus",o),h.removeEventListener(n,"blur",r),h.removeEventListener(n,"unload",a),n=null)}h.addEventListener(n,"focus",o),h.addEventListener(n,"blur",r),h.addEventListener(n,"unload",a),h.addEventListener(e,"load",function(){if(n!==e.contentWindow){n=e.contentWindow,h.addEventListener(n,"focus",o),h.addEventListener(n,"blur",r),h.addEventListener(n,"unload",a);var t=n.document.hasFocus();s[i]=t,l()}})}h.addEventListener(window,"focus",c(0)),h.addEventListener(window,"blur",u(0)),o(function(){for(var t=document.querySelectorAll("iframe"),e=0;e<t.length;e++)n(t[e]);l()})}},function(t,e,n){"use strict";var i=n(162),o=n(17);t.exports=function(t){o.addEventListener(window,"pageshow",function(){t(!0)}),o.addEventListener(window,"pagehide",function(){t(!1)}),i.events.on("change",function(){i.isHidden()?t(!1):t(!0)})}},function(t,e,n){"use strict";var i=n(0),o=n(5),r={};i.extend(r,o.Events);var a=["moz","ms","webkit"],s=function(){if(void 0!==document.hidden)return{prop:"hidden",eventName:"visibilitychange"};for(var t=0;t<a.length;t++){var e=a[t];if(void 0!==document[e+"Hidden"])return{prop:e+"Hidden",eventName:e+"visibilitychange"}}}(),l=s&&s.prop,c=s&&s.eventName;c&&document.addEventListener(c,function(){r.trigger("change")},!1),t.exports={events:r,isHidden:function(){if(l)return document[l]}}},function(t,e,n){"use strict";var i,o,r=n(7).version,a=n(6)("app:reload-on-update"),s=n(164),l=n(40);function c(){a("The time has come. To say fair's fair. To pay the rent. To pay our share."),window.location.reload(!0)}function u(){this.onlineChangeBound=this.onlineChange.bind(this),this.eyeballsChangeBound=this.eyeballsChange.bind(this),this.listen()}u.prototype={listen:function(){var t={eyeballsOff:!l.getEyeballs()};Navigator.prototype.hasOwnProperty("onLine")&&(t.online=window.navigator.onLine,window.addEventListener("online",this.onlineChangeBound),window.addEventListener("offline",this.onlineChangeBound)),l.events.on("change",this.eyeballsChangeBound),this.conditionalDebouncer=new s(t,12e4,c)},onlineChange:function(t){if(this.conditionalDebouncer){var e="online"===t.type;this.conditionalDebouncer.set("online",e)}},eyeballsChange:function(t){this.conditionalDebouncer&&this.conditionalDebouncer.set("eyeballsOff",!t)},destroy:function(){this.conditionalDebouncer.cancel(),this.conditionalDebouncer=null,Navigator.prototype.hasOwnProperty("onLine")&&(window.removeEventListener("online",this.onlineChangeBound),window.removeEventListener("offline",this.onlineChangeBound)),l.events.off("change",this.eyeballsChangeBound)}},t.exports={reportServerVersion:function(t){t===r?(i&&(clearTimeout(i),i=null),o&&(o.destroy(),o=null)):function(){if(!i&&!o){var t=Math.round(60*(30+30*Math.random())*1e3);a("Application version mismatch. Will restart after %s ms",t),i=setTimeout(function(){o||(o=new u)},t)}}()}}},function(t,e,n){"use strict";var i=n(6)("app:conditional-debounce");function o(t,e,n){this.conditions=t,this.timeout=e,this.timer=null,this.fn=n,this.checkConditions()}o.prototype.set=function(t,e){this.conditions[t]=e,i("set: %s=%s",t,e),this.checkConditions()},o.prototype.checkConditions=function(){i("check conditions: %j",this.conditions);var e=this.conditions;Object.keys(e).every(function(t){return e[t]})?this.timer||(i("All signals go. Commencing countdown sequence."),this.timer=setTimeout(this.fire.bind(this),this.timeout)):this.timer&&(i("Some signals no go. Cancelling timeout function"),clearTimeout(this.timer),this.timer=null)},o.prototype.fire=function(){this.timer=null,i("Debounced timeout, firing debounced function"),this.fn()},o.prototype.cancel=function(){clearTimeout(this.timer),this.timer=null},t.exports=o},function(t,e,n){"use strict";var r=n(1),a=n(75),s=n(0),l=n(267);t.exports=function(){var e=a.cmd,n=a.gitter;l.filter=function(t){var e=t.target||t.srcElement;if("on"===e.getAttribute("data-prevent-keys"))return!1;var n,i="chat-input-textarea"===(n=e).id?"input.chat":"list-search-input"===n.id||n.classList.contains("js-search-input")?"input.search":/^trpChatInput/.test(n.className)?"input.chat.edit":/^(INPUT|TEXTAREA|SELECT)$/.test(n.tagName)?"input.other":n.classList.contains("js-room-topic-edit-activator")?"button.room-topic-edit":n.classList.contains("js-profile-menu-toggle")?"button.profile-menu":n.classList.contains("room-menu-options__item-button")?"minibar.item":n.classList.contains("room-item__container")?"room-list.item":"other";return l.setScope(i),!0};var i={backspace:{name:"backspace",scope:"other"},esc:[{name:"chat.escape",scope:"input.chat"},{name:"chat.edit.escape",scope:"input.chat.edit"},{name:"search.escape",scope:"input.search"},{name:"maininput.escape",scope:["input.chat","input.search"]},{name:"input.escape",scope:"input.other"},{name:"document.escape",scope:"other"}],space:[{name:"room-topic.edit",scope:"button.room-topic-edit"},{name:"profile-menu.toggle",scope:"button.profile-menu"}],enter:[{name:"search.go",scope:"input.search"},{name:"chat.compose.auto",scope:"input.chat"},{name:"room-topic.edit",scope:"button.room-topic-edit"},{name:"profile-menu.toggle",scope:"button.profile-menu"}],"shift+enter":[{name:"chat.compose.auto",scope:"input.chat"}],up:[{name:"room.up",scope:"minibar.item"},{name:"room.up",scope:"room-list.item"},{name:"chat.edit.openLast",scope:"input.chat"},{name:"search.prev",scope:"input.search"}],down:[{name:"room.down",scope:"minibar.item"},{name:"room.down",scope:"room-list.item"},{name:"search.next",scope:"input.search"}],right:[{name:"room.next",scope:"minibar.item"},{name:"room.next",scope:"room-list.item"}],left:[{name:"room.prev",scope:"minibar.item"},{name:"room.prev",scope:"room-list.item"}],tab:[{name:"room.tab",scope:"minibar.item"},{name:"room.tab",scope:"room-list.item"}],"+tab":[{name:"room.prev.tab",scope:"minibar.item"},{name:"room.prev.tab",scope:"room-list.item"}],pageup:"pageUp",pagedown:"pageDown","q, r":{name:"quote",scope:"other"},"shift+/,?":[{name:"help.keyboard",scope:"other"}]};i["enter, "+e+"+enter"]=[{name:"chat.send",scope:"input.chat"},{name:"chat.edit.send",scope:"input.chat.edit"}],i[e+"+/, "+e+"+"+n+"+/"]={name:"chat.toggle"},i[e+"++s"]="focus.search",i[e+"+"+n+"+c"]={name:"focus.chat",scope:"other"},i[e+"+"+n+"+m"]="help.markdown",i[e+"+"+n+"+k"]="help.keyboard",i[e+"+"+n+"+up"]={name:"room.up",scope:"other"},i[e+"+"+n+"+down"]={name:"room.down",scope:"other"},i[e+"+"+n+"+left"]={name:"room.prev",scope:"other"},i[e+"+"+n+"+right"]={name:"room.next",scope:"other"},i[e+"+"+n+"+enter"]={name:"room.enter",scope:"other"},s.each("123456789".split(""),function(t){i[e+"+"+n+"+"+t]="room."+t}),i[e+"+"+n+"+0"]="room.10";var o=function(e,n,t){s.isObject(n)&&(t=n.scope,n=n.name),t=t||"all";var i=function(t){l(e,t,function(t,e){r.trigger("keyboard."+n,t,e),r.trigger("keyboard.all",n,t,e)})};s.isArray(t)?s.each(t,i):i(t)};s.each(i,function(t,e){s.isArray(t)?s.each(t,function(t){o(e,t)}):o(e,t)})}()},function(t,e,n){"use strict";t.exports=function(){var t=navigator.platform;return-1<t.indexOf("Mac")?"Mac":-1<t.indexOf("Win")?"Windows":-1<t.indexOf("Linux")?"Linux":void 0}},function(t,e,n){"use strict";var c=n(138),i=n(139),o=function(){function l(t,e){var n=t.id,i=t.fromUser,o=t.sent,r=t.text,a=e.currentUserId,s=e.isTroupeAdmin;c(this,l),this.id=n,this.fromUser=i,this.sent=new Date(o),this.text=r,this.environment={currentUserId:a,isTroupeAdmin:s}}return i(l,[{key:"canDelete",value:function(){var t=this.environment.isTroupeAdmin;return this.id&&(this.isOwnMessage()||t)}},{key:"isOwnMessage",value:function(){return!!this.fromUser&&this.fromUser.id===this.environment.currentUserId}},{key:"canEdit",value:function(){return this.id&&this.text&&this.isOwnMessage()&&this._isInEditablePeriod}},{key:"canReport",value:function(){return!this.isOwnMessage()}},{key:"_isInEditablePeriod",get:function(){if(!this.sent)return!1;var t=new Date(this.sent.valueOf()+6e5);return new Date<t}}]),l}();t.exports=o},function(t,e,n){"use strict";var i=n(19),o=n(1);t.exports=function(t){if(o.trigger("dispatchVueAction","toggleDarkTheme",t),t)return(e=document.createElement("link")).rel="stylesheet",e.id="gitter-dark",e.href=i("styles/dark-theme.css"),document.head.appendChild(e);var e=document.getElementById("gitter-dark");e&&e.remove()}},function(t,e,n){"use strict";var i,o,r=n(141),a=n(42),s=r(),l=function(t){if(t){var e=t.split(":");return{offset:e[0],abbr:e[1],iana:e[2]}}}(a.get("gitter_tz"));s.iana||l&&l.offset===s.offset&&l.abbr===s.abbr&&(s.iana=l.iana),l&&l.offset===s.offset&&l.abbr===s.abbr&&l.iana===s.iana||a.set("gitter_tz",(o=(i=s).offset,i.abbr&&(o+=":"+i.abbr),i.iana&&(o+=":"+i.iana),o))},,,,,function(t,e,n){"use strict";function r(t){return decodeURIComponent(t.replace(/\+/g," "))}t.exports={parse:function(t){var e=document.createElement("a");return e.href=t,{protocol:e.protocol,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search,hash:e.hash,host:e.host,href:e.href}},parseSearch:function(t){var e={};if(!t)return e;for(var n,i=t.substring(1),o=/([^&=]+)=?([^&]*)/g;n=o.exec(i);)e[r(n[1])]=r(n[2]);return e},format:function(e){var n=document.createElement("a");return n.href=document.location.href,["href","protocol","hostname","search","hash","pathname"].forEach(function(t){if(e.hasOwnProperty(t)&&void 0!==e[t]){if(("protocol"===t||"hostname"===t)&&""===e[t])return;n[t]=e[t]}}),n.href}}},,,function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o;return null!=(o=e.if.call(t,null!=t?t.disabled:t,{name:"if",hash:{},fn:this.program(2,i,0),inverse:this.program(4,i,0),data:i}))?o:""},2:function(t,e,n,i){var o;return'    <div class="popover-item__action-disabled">\n      '+this.escapeExpression("function"==typeof(o=null!=(o=e.description||(null!=t?t.description:t))?o:e.helperMissing)?o.call(t,{name:"description",hash:{},data:i}):o)+"\n    </div>\n"},4:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression;return'    <div class="popover-item__action js-chat-action-'+a("function"==typeof(o=null!=(o=e.name||(null!=t?t.name:t))?o:r)?o.call(t,{name:"name",hash:{},data:i}):o)+'">\n      '+a("function"==typeof(o=null!=(o=e.description||(null!=t?t.description:t))?o:r)?o.call(t,{name:"description",hash:{},data:i}):o)+"\n    </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o;return null!=(o=e.each.call(t,null!=t?t.actions:t,{name:"each",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:""},useData:!0})},,,function(t,e,n){"use strict";var a=n(0),s=n(5);t.exports=function(){function n(t,e,n){var i,o=(i=t,a.isArray(i)?new s.Collection(i):i);if(o){e=void 0!==e?e:0,n=void 0!==n?n:o.length-1;var r={user:null,burstStart:!1,status:!1,time:null,parentId:null};return o.slice(e,n+1).forEach(function(t){t.get("parentId")||(function(t,e){var n=t.get("fromUser"),i=t.get("sent"),o=n&&n.username,r=i&&new Date(i).valueOf()||Date.now();if(t.get("status"))return e.burstStart=!0,e.status=!0,e.time=r;var a=3e5<r-e.time;if(e.status||o!==e.user||a)return e.burstStart=!0,e.user=o,e.time=r,e.status=!1;e.burstStart=!1,e.user=o}(t,r),t.set("burstStart",r.burstStart))}),o.toJSON()}}return{calc:function(t){if(!("burstStart"in t.attributes)){var e=this.indexOf(t);n(this,function(t){if(0===t)return t;for(;t--&&!this.at(t).get("burstStart"););return t}.call(this,e),function(t){if(t===this.length-1)return t;for(;t<this.length&&!this.at(t).get("burstStart");)t++;return t}.call(this,e))}},parse:n}}()},function(t,e,n){"use strict";var l=n(0),c=n(182),o=n(2),i=n(1),u=n(6)("app:infinite-mixin");t.exports={initialize:function(){this.atTop=!1,this.atBottom=!0,this._currentFetchCount=0},getLoadLimit:function(){return Math.round((window.screen.height-150)/20)},getCollectionLimit:function(){return 5*this.getLoadLimit()},ignoreDataChange:function(t){return"create"===t.operation&&!this.atBottom},fetchLatest:function(t,i,o){var r=this;if(!(this.atBottom||0<this._currentFetchCount)){var a=this.getLoadLimit(),e=this.getQuery&&this.getQuery()||{};e=l.defaults(e,{limit:a});var s=c.index(this.pluck("id"),c.identityTransform);u("Fetch latest: options=%j data=%j",t,e),this.trigger("fetch:latest"),this._currentFetchCount+=1,this.fetch({remove:"remove"in t&&t.remove,add:!("add"in t)||t.add,merge:!("merge"in t)||t.merge,data:e,success:function(t,e){if(r.trigger("fetch:latest:complete"),r.setAtBottom(!0),!(e&&e.items||e||[]).map(c.idTransform).some(function(t){return s[t]})){var n=Object.keys(s).map(function(t){return r.get(t)});r.remove(n)}e.length<a?r.setAtTop(!0):r.trimTop(),i&&i.call(o),r._currentFetchCount-=1},error:function(t){r.trigger("fetch:latest:complete"),i&&i.call(o||null,t),r._currentFetchCount-=1}})}},fetchMoreBefore:function(t,n,i){if(!(this.atTop||0<this._currentFetchCount)){var e;this.length&&(e=c.min(this.pluck("id")));var o=this.getLoadLimit(),r=this.getQuery&&this.getQuery()||{};r=l.defaults(r,{beforeId:e,limit:o});var a=this;u("Fetch before: options=%j data=%j",t,r),this.trigger("fetch:before"),this._currentFetchCount+=1,this.fetch({remove:"remove"in t&&t.remove,add:!("add"in t)||t.add,merge:!("merge"in t)||t.merge,data:r,success:function(t,e){a.trigger("fetch:before:complete"),e.length<o&&a.setAtTop(!0),a.trimBottom(),n&&n.call(i),a._currentFetchCount-=1},error:function(t){a.trigger("fetch:before:complete"),n&&n.call(t),a._currentFetchCount-=1}})}},fetchMoreAfter:function(t,n,i){var o=this;if(!(this.atBottom||0<this._currentFetchCount)){var e;this.length&&(e=c.max(this.pluck("id")));var r=this.getLoadLimit(),a=this.getQuery&&this.getQuery()||{};a=l.defaults(a,{afterId:e,limit:r}),u("Fetch after: options=%j data=%j",t,a),this.trigger("fetch:after"),this._currentFetchCount+=1,this.fetch({remove:"remove"in t&&t.remove,add:!("add"in t)||t.add,merge:!("merge"in t)||t.merge,data:a,success:function(t,e){o.trigger("fetch:after:complete"),e.length<r&&o.setAtBottom(!0),o.trimTop(),n&&n.call(i),o._currentFetchCount-=1},error:function(t){o.trigger("fetch:after:completed"),n&&n.call(t),o._currentFetchCount-=1}})}},fetchAtPoint:function(t,e,i,o){if(e||(e={}),!(1<this._currentFetchCount)){var n=this.getLoadLimit(),r=c.index(this.pluck("id"),c.identityTransform),a=this.getQuery&&this.getQuery()||{};a=l.defaults(a,t,{limit:n});var s=this;u("Fetch around: options=%j data=%j",e,a),this.trigger("fetch:at"),this._currentFetchCount+=1,this.fetch({remove:"remove"in e&&e.remove,add:!("add"in e)||e.add,merge:!("merge"in e)||e.merge,data:a,success:function(t,e){if(s.trigger("fetch:at:complete"),!(e&&e.items||e||[]).map(c.idTransform).some(function(t){return r[t]})){s.setAtBottom(!1),s.setAtTop(!1);var n=Object.keys(r).map(function(t){return s.get(t)});s.remove(n)}s.trimBottom(),i&&i.call(o),s._currentFetchCount-=1},error:function(t){s.trigger("fetch:at:complete"),i&&i.call(t),s._currentFetchCount-=1}})}},fetchFromMarker:function(t,e,n,i){return this.fetchAtPoint({marker:t},e,n,i)},ensureLoaded:function(e,n,i){function o(t,e){n&&n.call(i,t,e)}var t=this.get(e);if(t)return o(null,t);this.fetchAtPoint({aroundId:e},{},function(t){return t?o(t):o(null,this.get(e))},this)},trimTop:function(){var t=this.getCollectionLimit();if(this.length>t){var e=this.slice(0,-t);this.remove(e),this.setAtTop(!1)}},trimBottom:function(){var t=this.getCollectionLimit();if(this.length>t){var e=this.slice(t);this.remove(e),this.setAtBottom(!1)}},getSnapshotState:function(){var t;this.getSnapshotExtras&&(t=this.getSnapshotExtras());var e=o().snapshots;if(e){var n=e[this.modelName];if(n&&this.contextModel.get("troupeId")===o.getTroupeId())return this.setAtTop(!1),this.setAtBottom(!n.aroundId),this.listenToOnce(this,"snapshot",function(){delete e[this.modelName]}),l.extend(n,t)}if(!this.length)return t;if(this.atBottom)return l.extend({limit:this.length},t);var i=this.at(this.length-1).get("id");return l.extend({limit:this.length,beforeInclId:i},t)},setAtTop:function(t){!!t!=!!this.atTop&&(this.atTop=!!t,this.trigger("atTopChanged",this.atTop))},setAtBottom:function(t){!!t!=!!this.atBottom&&(this.atBottom=!!t,this.trigger("atBottomChanged",this.atBottom),i.trigger("atBottomChanged",this.atBottom))}}},function(t,e,n){"use strict";t.exports=function(){function r(t,e){return t===e?0:e<t?1:-1}function a(t){return t&&t.id}return{naturalComparator:r,identityTransform:function(t){return t},idTransform:a,index:function(t,e){e||(e=a);for(var n={},i=0;i<t.length;i++){var o=t[i],r=e(o);n[r]?n[r].push(o):n[r]=[o]}return n},extractDateFromDateTime:function(t){return t?new Date(t.getFullYear(),t.getMonth(),t.getDate()):null},extractTimeFromDateTime:function(t){return t?t.getHours()+":"+t.getMinutes():null},formatDate:function(t){return t?t.toLocaleDateString():""},max:function(t,e){e||(e=r);for(var n=t[0],i=1;i<t.length;i++){var o=t[i];0<e(o,n)&&(n=o)}return n},min:function(t,e){e||(e=r);for(var n=t[0],i=1;i<t.length;i++){var o=t[i];0<e(n,o)&&(n=o)}return n}}}()},function(t,e,n){"use strict";var i;t.exports=function(){return void 0===i&&(i=document.body.classList.contains("mobile-embedded")),i}},function(t,e,n){"use strict";var o=n(0);function i(n,t){var e=Object.keys(n.lookups),i={};return o.each(e,function(t){var e=o.indexBy(n.lookups[t],"id");i[t]=e}),o.each(n.items,function(n){o.each(t,function(t,e){n[e]=i[t][n[e]]})}),n.items}(e=t.exports).parseLookups=i,e.parseChats=function(t){return i(t,{fromUser:"users"})}},function(t,e,n){"use strict";var a=n(0),i=n(5),r=n(6)("app:unread-items-client-store");function o(t,n,i){var e=t.chat,o=t.mention,r={};e&&e.forEach(function(t){r[t]=!1}),o&&o.forEach(function(t){r[t]=!0}),Object.keys(r).forEach(function(t){var e=r[t];n.call(i,t,e)})}var s=function(){this._items={},this._timer=setInterval(this._gc.bind(this),6e4)};s.prototype={add:function(t){this._items[t]=Date.now()},remove:function(t){delete this._items[t]},contains:function(t){return!!this._items[t]},reset:function(){this._items={}},_gc:function(){var e=Date.now()-3e5,n=this._items;Object.keys(n).forEach(function(t){n[t]<e&&delete n[t]})}};var l=function(){var t;this.length=0,this._lurkMode=!1,this._items={},this._read=new s,this.state="LOADING",this.notifyCountLimited=(t=this.notifyCount,this,30,a.throttle(t.bind(this),30,{leading:!1}))};a.extend(l.prototype,i.Events,{_unreadItemAdded:function(t,e,n){r("_unreadItemAdded",t,e,n);var i=n&&n.silent,o=this._lurkMode;return this._read.contains(t)?(i||this.trigger("itemMarkedRead",t,e,o),!1):this._items.hasOwnProperty(t)?this._items[t]!==e&&(this._items[t]=e,i||this.trigger("change:status",t,e),!0):(this._items[t]=e,this.length++,i||(this.notifyCountLimited(),this.trigger("add",t,e)),!0)},_unreadItemRemoved:function(t){r("_unreadItemRemoved",t),this._items.hasOwnProperty(t)&&(delete this._items[t],this.length--,this.notifyCountLimited(),this.trigger("unreadItemRemoved",t))},_mentionRemoved:function(t){r("_mentionRemoved",t),this._items.hasOwnProperty(t)&&(this._items[t]=!1,this.notifyCountLimited(),this.trigger("change:status",t,!1))},markItemRead:function(t){r("markItemRead",t);var e,n=this._items.hasOwnProperty(t),i=this._lurkMode;n?(e=this._items[t],delete this._items[t],this.length--,this.notifyCountLimited()):e=!1,this._read.add(t),this.trigger("itemMarkedRead",t,e,i)},add:function(t){o(t,function(t,e){this._unreadItemAdded(t,e)},this)},remove:function(t){function e(t){return t?t.reduce(function(t,e){return t[e]=!0,t},{}):{}}var n=e(t.chat),i=e(t.mention),o=a.extend({},n,i),r=this;Object.keys(o).forEach(function(t){n[t]?r._unreadItemRemoved(t):r._mentionRemoved(t)})},notifyCount:function(){this.trigger("newcountvalue",this.length)},getItems:function(){return Object.keys(this._items)},getItemHash:function(){return this._items},getMentions:function(){return Object.keys(this._items).reduce(function(t,e){return this._items[e]&&t.push(e),t}.bind(this),[])},getLurkMode:function(){return this._lurkMode},enableLurkMode:function(){this._lurkMode=!0,this.markAllReadNotification()},disableLurkMode:function(){this._lurkMode=!1},markAllRead:function(){r("markAllRead");var n=this._lurkMode;Object.keys(this._items).forEach(function(t){var e=this._items[t];this._read.add(t),this.trigger("itemMarkedRead",t,e,n)},this),this._items={},this.length=0,this.notifyCountLimited()},markAllReadNotification:function(){r("markAllReadNotification"),Object.keys(this._items).forEach(function(t){this.trigger("unreadItemRemoved",t)},this),this._items={},this.length=0,this.notifyCountLimited()},getFirstItem:function(){return Object.keys(this._items).reduce(function(t,e){return null===t?e:t<e?t:e},null)},isMarkedAsRead:function(t){return this._read.contains(t)},reset:function(t,e){this.length=0,this._lurkMode=!!e,this._read.reset(),this._items={},t?(this.state="LOADED",o(t,function(t,e){this._unreadItemAdded(t,e,{silent:!0})},this),this.trigger("reset"),this.notifyCountLimited()):"LOADED"===this.state&&this.notifyCountLimited()}}),t.exports=l},function(t,e,n){"use strict";var i=function(){this._tapCount=0,this._timeout=null};i.prototype.registerTap=function(){var t=this;return this._tapCount++,clearTimeout(this._timeout),this._timeout=setTimeout(function(){t._tapCount=0},350),this._tapCount},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return"matrix"===t.type?"https://matrix.to/#/@".concat(t.externalId,"?utm_source=gitter"):null}},function(t,e,n){"use strict";var i=n(4),o=n(13),r=n(79),a=i.Behavior.extend({defaults:{modelAttribute:null,el:null},ui:function(){return{time:this.options.el}},modelEvents:function(){var t={};return t["change:"+this.options.modelAttribute]="onTimeChange",t},initialize:function(){this.timer=null},onTimeChange:function(t){this.timer&&(clearTimeout(this.timer),this.timer=null);var e=t.get(this.options.modelAttribute),n=function(t){if(!t)return 0;var e=new Date,n=e.getFullYear(),i=e.getMonth(),o=e.getDate();return t instanceof Date&&t.getDate()===o&&t.getMonth()===i&&t.getFullYear()===n?864e5-36e5*t.getHours()+6e4*t.getMinutes()+1e3*t.getSeconds()+t.getMilliseconds():t.date&&t.date()===o&&t.month()===i&&t.year()===n?864e5-36e5*t.hour()+6e4*t.minute()+1e3*t.second()+t.millisecond():0}(e);0<n&&(this.timer=setTimeout(this.onTimeChange.bind(this,t),n+1)),this.renderTime(e)},renderTime:function(t){var e=this.ui.time[0];if(e){var n=r(t,{compact:this.options.compact});e.textContent=n}},onDestroy:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}});o.register("TimeAgo",a),t.exports=a},function(t,e,n){"use strict";var i=n(9),o=n(5),r=n(4),h=n(12),d=n(2),p=n(8),a=n(1),s=n(15),c=n(32),l=n(224),u=n(225),m=n(151),f=n(18);function g(t){return t&&(t.providers||t.get("providers")).some(function(t){return"github"===t})}var v=r.ItemView.extend({className:"issue-popover-body",template:l,modelEvents:{change:"render"},serializeData:function(){var t=this.model.toJSON();return t.date=s(t.created_at).format("LLL"),t}}),_=r.ItemView.extend({className:"issue-popover-title",modelEvents:{change:"render"},template:u}),b=r.ItemView.extend({className:"commit-popover-footer",template:m,events:{"click button.mention":"onMentionClick"},modelEvents:{change:"render"},onMentionClick:function(){var o=this;y().then(function(t){var e=o.model.get("repo"),n=o.model.get("number"),i=e===t?"#"+n:e+"#"+n;a.trigger("input.append",i)}).catch(function(t){h.error("Problem getting room repo",{exception:t})}),this.parentPopover.hide()}}),w=null;function y(){var o=d.troupe();if(!o)return i.reject("No current room");if(w)return w;var r,a=o.get("id");return w=new i(function(n,i){var t=o.get("associatedRepo");if(t||!1===t)return n(t||null);function e(){var t=o.get("id");if(a!==t)return i(new Error("Expired"));var e=o.get("associatedRepo");return e||!1===e?n(e||null):void 0}r=function(){o.off("change",e)},o.on("change",e)}).finally(function(){r&&r()})}d.troupe().on("change:id",function(){w=null});var x=o.Model.extend({urlRoot:function(){return p.priv.uri("/issue-mirror")},sync:f.sync});function k(r,t,e,n,i,o,a){function s(){var t=new x({type:e,provider:n||"github",repo:i,number:o,html_url:a});return t.fetch({data:{renderMarkdown:!0,t:e,p:n,r:i,i:o},error:function(){t.set({error:!0})}}),t}function l(t){var e=s();c.hoverTimeout(t,function(){!function(t,e){e||(e=s());var n,i,o=(n=e,i=t.target,new c({titleView:new _({model:n}),view:new v({model:n}),footerView:new b({model:n}),targetElement:i,placement:"horizontal"}));o.show(),c.singleton(r,o)}(t,e)})}t.addEventListener("mouseover",l),r.once("destroy",function(){t.removeEventListener("mouseover",l)})}var T={decorate:function(u){Array.prototype.forEach.call(u.el.querySelectorAll('*[data-link-type="issue"], *[data-link-type="mr"], *[data-link-type="pr"]'),function(c){return i.try(function(){var t=c.dataset.issueRepo;return t?t.replace(/\/-$/,""):y()}).then(function(e){var n=c.dataset.linkType||"issue",i=c.dataset.issue,o=c.getAttribute("href")||function(t,e){var n=d.troupe(),i=d.group(),o=i&&i.get("backedBy");if(t)return"https://github.com/"+t+"/issues/"+e;var r=d.user();if(!t&&n.get("oneToOne")){var a=n.get("user");if(r&&g(r)&&a&&g(a))return"https://github.com/issues?q="+e+"+%28involves%3A"+r.get("username")+"+OR+involves%3A"+a.username+"+%29"}return o&&"GH_ORG"===o.type?"https://github.com/issues?q="+e+"+user%3A"+o.linkPath:r&&g(r)?"https://github.com/issues?q="+e+"+involves:"+r.get("username"):"https://github.com/issues?q="+e}(e,i);o&&(c=function(t,e){var n=t;if("a"!==t.tagName&&t.parentNode){var i=document.createElement("a");if(i.innerHTML=t.innerHTML,t.parentNode.replaceChild(i,t),t.hasAttributes())for(var o=t.attributes,r=o.length-1;0<=r;r--){var a=o[r];i.setAttribute(a.name,a.value)}i.setAttribute("href",e||""),i.setAttribute("target","_blank"),n=i}return n}(c,o));var t,r,a,s,l=c.dataset.provider||"github";e&&i&&(t=n,r=l,a=e,s=i,p.priv.get("/issue-state",{t:t,p:r,r:a,i:s}).then(function(t){return t[0]})).then(function(t){t&&(c.classList.add("is-existent"),c.classList.contains("open")||c.classList.contains("closed")||c.classList.add(t),k(u,c,n,l,e,i,o))}).catch(function(t){h.error("Problem fetching issuable state ".concat(e,"#").concat(i),{exception:t})})}).catch(function(t){h.error("Problem getting repo for room",{exception:t})})})}};t.exports=T},function(t,e,n){"use strict";var i,o=n(10),r=n(152);t.exports=(i=r.emojify,{decorate:function(t){i.run(o(t.$el).find(".js-chat-item-text")[0])}})},function(n,i,t){var o,r,a;t(21),function(t,e){"use strict";r=[],void 0===(a="function"==typeof(o=function(){return function(){var a,u,h="undefined"!=typeof window&&window.document,t="+1,-1,100,1234,8ball,a,ab,abc,abcd,accept,aerial_tramway,airplane,alarm_clock,alien,ambulance,anchor,angel,anger,angry,anguished,ant,apple,aquarius,aries,arrow_backward,arrow_double_down,arrow_double_up,arrow_down,arrow_down_small,arrow_forward,arrow_heading_down,arrow_heading_up,arrow_left,arrow_lower_left,arrow_lower_right,arrow_right,arrow_right_hook,arrow_up,arrow_up_down,arrow_up_small,arrow_upper_left,arrow_upper_right,arrows_clockwise,arrows_counterclockwise,art,articulated_lorry,astonished,atm,b,baby,baby_bottle,baby_chick,baby_symbol,back,baggage_claim,balloon,ballot_box_with_check,bamboo,banana,bangbang,bank,bar_chart,barber,baseball,basketball,bath,bathtub,battery,bear,bee,beer,beers,beetle,beginner,bell,bento,bicyclist,bike,bikini,bird,birthday,black_circle,black_joker,black_medium_small_square,black_medium_square,black_nib,black_small_square,black_square,black_square_button,blossom,blowfish,blue_book,blue_car,blue_heart,blush,boar,boat,bomb,book,bookmark,bookmark_tabs,books,boom,boot,bouquet,bow,bowling,bowtie,boy,bread,bride_with_veil,bridge_at_night,briefcase,broken_heart,bug,bulb,bullettrain_front,bullettrain_side,bus,busstop,bust_in_silhouette,busts_in_silhouette,cactus,cake,calendar,calling,camel,camera,cancer,candy,capital_abcd,capricorn,car,card_index,carousel_horse,cat,cat2,cd,chart,chart_with_downwards_trend,chart_with_upwards_trend,checkered_flag,cherries,cherry_blossom,chestnut,chicken,children_crossing,chocolate_bar,christmas_tree,church,cinema,circus_tent,city_sunrise,city_sunset,cl,clap,clapper,clipboard,clock1,clock10,clock1030,clock11,clock1130,clock12,clock1230,clock130,clock2,clock230,clock3,clock330,clock4,clock430,clock5,clock530,clock6,clock630,clock7,clock730,clock8,clock830,clock9,clock930,closed_book,closed_lock_with_key,closed_umbrella,cloud,clubs,cn,cocktail,coffee,cold_sweat,collision,computer,confetti_ball,confounded,confused,congratulations,construction,construction_worker,convenience_store,cookie,cool,cop,copyright,corn,couple,couple_with_heart,couplekiss,cow,cow2,credit_card,crescent_moon,crocodile,crossed_flags,crown,cry,crying_cat_face,crystal_ball,cupid,curly_loop,currency_exchange,curry,custard,customs,cyclone,dancer,dancers,dango,dart,dash,date,de,deciduous_tree,department_store,diamond_shape_with_a_dot_inside,diamonds,disappointed,disappointed_relieved,dizzy,dizzy_face,do_not_litter,dog,dog2,dollar,dolls,dolphin,donut,door,doughnut,dragon,dragon_face,dress,dromedary_camel,droplet,dvd,e-mail,ear,ear_of_rice,earth_africa,earth_americas,earth_asia,egg,eggplant,eight,eight_pointed_black_star,eight_spoked_asterisk,electric_plug,elephant,email,end,envelope,es,euro,european_castle,european_post_office,evergreen_tree,exclamation,expressionless,eyeglasses,eyes,facepunch,factory,fallen_leaf,family,fast_forward,fax,fearful,feelsgood,feet,ferris_wheel,file_folder,finnadie,fire,fire_engine,fireworks,first_quarter_moon,first_quarter_moon_with_face,fish,fish_cake,fishing_pole_and_fish,fist,five,flags,flashlight,floppy_disk,flower_playing_cards,flushed,foggy,football,fork_and_knife,fountain,four,four_leaf_clover,fr,free,fried_shrimp,fries,frog,frowning,fu,fuelpump,full_moon,full_moon_with_face,game_die,gb,gem,gemini,ghost,gift,gift_heart,girl,globe_with_meridians,goat,goberserk,godmode,golf,grapes,green_apple,green_book,green_heart,grey_exclamation,grey_question,grimacing,grin,grinning,guardsman,guitar,gun,haircut,hamburger,hammer,hamster,hand,handbag,hankey,hash,hatched_chick,hatching_chick,headphones,hear_no_evil,heart,heart_decoration,heart_eyes,heart_eyes_cat,heartbeat,heartpulse,hearts,heavy_check_mark,heavy_division_sign,heavy_dollar_sign,heavy_exclamation_mark,heavy_minus_sign,heavy_multiplication_x,heavy_plus_sign,helicopter,herb,hibiscus,high_brightness,high_heel,hocho,honey_pot,honeybee,horse,horse_racing,hospital,hotel,hotsprings,hourglass,hourglass_flowing_sand,house,house_with_garden,hurtrealbad,hushed,ice_cream,icecream,id,ideograph_advantage,imp,inbox_tray,incoming_envelope,information_desk_person,information_source,innocent,interrobang,iphone,it,izakaya_lantern,jack_o_lantern,japan,japanese_castle,japanese_goblin,japanese_ogre,jeans,joy,joy_cat,jp,key,keycap_ten,kimono,kiss,kissing,kissing_cat,kissing_closed_eyes,kissing_face,kissing_heart,kissing_smiling_eyes,koala,koko,kr,large_blue_circle,large_blue_diamond,large_orange_diamond,last_quarter_moon,last_quarter_moon_with_face,laughing,leaves,ledger,left_luggage,left_right_arrow,leftwards_arrow_with_hook,lemon,leo,leopard,libra,light_rail,link,lips,lipstick,lock,lock_with_ink_pen,lollipop,loop,loudspeaker,love_hotel,love_letter,low_brightness,m,mag,mag_right,mahjong,mailbox,mailbox_closed,mailbox_with_mail,mailbox_with_no_mail,man,man_with_gua_pi_mao,man_with_turban,mans_shoe,maple_leaf,mask,massage,meat_on_bone,mega,melon,memo,mens,metal,metro,microphone,microscope,milky_way,minibus,minidisc,mobile_phone_off,money_with_wings,moneybag,monkey,monkey_face,monorail,mortar_board,mount_fuji,mountain_bicyclist,mountain_cableway,mountain_railway,mouse,mouse2,movie_camera,moyai,muscle,mushroom,musical_keyboard,musical_note,musical_score,mute,nail_care,name_badge,neckbeard,necktie,negative_squared_cross_mark,neutral_face,new,new_moon,new_moon_with_face,newspaper,ng,nine,no_bell,no_bicycles,no_entry,no_entry_sign,no_good,no_mobile_phones,no_mouth,no_pedestrians,no_smoking,non-potable_water,nose,notebook,notebook_with_decorative_cover,notes,nut_and_bolt,o,o2,ocean,octocat,octopus,oden,office,ok,ok_hand,ok_woman,older_man,older_woman,on,oncoming_automobile,oncoming_bus,oncoming_police_car,oncoming_taxi,one,open_file_folder,open_hands,open_mouth,ophiuchus,orange_book,outbox_tray,ox,package,page_facing_up,page_with_curl,pager,palm_tree,panda_face,paperclip,parking,part_alternation_mark,partly_sunny,passport_control,paw_prints,peach,pear,pencil,pencil2,penguin,pensive,performing_arts,persevere,person_frowning,person_with_blond_hair,person_with_pouting_face,phone,pig,pig2,pig_nose,pill,pineapple,pisces,pizza,plus1,point_down,point_left,point_right,point_up,point_up_2,police_car,poodle,poop,post_office,postal_horn,postbox,potable_water,pouch,poultry_leg,pound,pouting_cat,pray,princess,punch,purple_heart,purse,pushpin,put_litter_in_its_place,question,rabbit,rabbit2,racehorse,radio,radio_button,rage,rage1,rage2,rage3,rage4,railway_car,rainbow,raised_hand,raised_hands,raising_hand,ram,ramen,rat,recycle,red_car,red_circle,registered,relaxed,relieved,repeat,repeat_one,restroom,revolving_hearts,rewind,ribbon,rice,rice_ball,rice_cracker,rice_scene,ring,rocket,roller_coaster,rooster,rose,rotating_light,round_pushpin,rowboat,ru,rugby_football,runner,running,running_shirt_with_sash,sa,sagittarius,sailboat,sake,sandal,santa,satellite,satisfied,saxophone,school,school_satchel,scissors,scorpius,scream,scream_cat,scroll,seat,secret,see_no_evil,seedling,seven,shaved_ice,sheep,shell,ship,shipit,shirt,shit,shoe,shower,signal_strength,slight_smile,six,six_pointed_star,ski,skull,sleeping,sleepy,slot_machine,small_blue_diamond,small_orange_diamond,small_red_triangle,small_red_triangle_down,smile,smile_cat,smiley,smiley_cat,smiling_imp,smirk,smirk_cat,smoking,snail,snake,snowboarder,snowflake,snowman,sob,soccer,soon,sos,sound,space_invader,spades,spaghetti,sparkle,sparkler,sparkles,sparkling_heart,speak_no_evil,speaker,speech_balloon,speedboat,squirrel,star,star2,stars,station,statue_of_liberty,steam_locomotive,stew,straight_ruler,strawberry,stuck_out_tongue,stuck_out_tongue_closed_eyes,stuck_out_tongue_winking_eye,sun_with_face,sunflower,sunglasses,sunny,sunrise,sunrise_over_mountains,surfer,sushi,suspect,suspension_railway,sweat,sweat_drops,sweat_smile,sweet_potato,swimmer,symbols,syringe,tada,tanabata_tree,tangerine,taurus,taxi,tea,telephone,telephone_receiver,telescope,tennis,tent,thought_balloon,three,thumbsdown,thumbsup,ticket,tiger,tiger2,tired_face,tm,toilet,tokyo_tower,tomato,tongue,top,tophat,tractor,traffic_light,train,train2,tram,triangular_flag_on_post,triangular_ruler,trident,triumph,trolleybus,trollface,trophy,tropical_drink,tropical_fish,truck,trumpet,tshirt,tulip,turtle,tv,twisted_rightwards_arrows,two,two_hearts,two_men_holding_hands,two_women_holding_hands,u5272,u5408,u55b6,u6307,u6708,u6709,u6e80,u7121,u7533,u7981,u7a7a,uk,umbrella,unamused,underage,unlock,up,us,v,vertical_traffic_light,vhs,vibration_mode,video_camera,video_game,violin,virgo,volcano,vs,walking,waning_crescent_moon,waning_gibbous_moon,warning,watch,water_buffalo,watermelon,wave,wavy_dash,waxing_crescent_moon,waxing_gibbous_moon,wc,weary,wedding,whale,whale2,wheelchair,white_check_mark,white_circle,white_flower,white_large_square,white_medium_small_square,white_medium_square,white_small_square,white_square_button,wind_chime,wine_glass,wink,wolf,woman,womans_clothes,womans_hat,womens,worried,wrench,x,yellow_heart,yen,yum,zap,zero,zzz".split(/,/),i=t.reduce(function(t,e){return t[e]=!0,t},{});function s(){var e={named:/:([a-z0-9A-Z_-]+):/,slight_smile:/:-?\)/g,smiley:/[:;]-?d/gi,wink:/;-?\)/g,worried:/:-?\(/g,sob:/:[']-?\(|:&#x27;\(/g,confused:/:-?\//g,confounded:/:-?s/gi,stuck_out_tongue:/:-?p/gi,stuck_out_tongue_winking_eye:/;-?p/gi,open_mouth:/:-?o/gi,angry:/>:-?\(/gi,kissing:/:-?\*/g,expressionless:/:-?\|/g,mask:/:-x/gi,heart:/<3|&lt;3/g,broken_heart:/<\/3|&lt;&#x2F;3/g,thumbsup:/:\+1:/g,thumbsdown:/:\-1:/g};return d.ignore_emoticons&&(e={named:/:([a-z0-9A-Z_-]+):/,thumbsup:/:\+1:/g,thumbsdown:/:\-1:/g}),Object.keys(e).map(function(t){return[e[t],t]})}function l(){var t=a.map(function(t){var e=t[0],n=e.source||e;return"("+(n=n.replace(/(^|[^\[])\^/g,"$1"))+")"}).join("|");return new RegExp(t,"gi")}var d={emojify_tag_type:null,only_crawl_id:null,img_dir:"images/emoji",ignore_emoticons:!1,ignored_tags:{SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1,MATH:1}};function c(t){return" "===t||"\t"===t||"\r"===t||"\n"===t||""===t}function p(t){if(t[1]&&t[2]){var e=t[2];return i[e]?e:void 0}for(var n=3;n<t.length-1;n++)if(t[n])return a[n-2][1]}function e(t,e){return this.config.emojify_tag_type&&"img"!==this.config.emojify_tag_type?"<"+this.config.emojify_tag_type+" title=':"+e+":' alt=':"+e+":' class='emoji emoji-"+e+"'> </"+this.config.emojify_tag_type+">":"<img title=':"+e+":' alt=':"+e+":' class='emoji' src='"+this.config.img_dir+"/"+e+".png' align='absmiddle' />"}function m(){this.lastEmojiTerminatedAt=-1}return m.prototype={validate:function(t,e,n){var i=this,o=p(t);if(o){var r=t[0],a=r.length;if(0===e)return l();if(n.length===r.length+e)return l();var s=this.lastEmojiTerminatedAt===e;return s||c(n.charAt(e-1))||c(n.charAt(r.length+e))&&s?l():void 0}function l(){return i.lastEmojiTerminatedAt=a+e,o}}},{defaultConfig:d,emojiNames:t,setConfig:function(e){Object.keys(d).forEach(function(t){t in e&&(d[t]=e[t])})},replace:function(t,o){if(!t)return t;o||(o=e),a=s(),u=l();var r=new m;return t.replace(u,function(){var t=Array.prototype.slice.call(arguments,0,-2),e=arguments[arguments.length-2],n=arguments[arguments.length-1],i=r.validate(t,e,n);return i?o.apply({config:d},[arguments[0],i]):arguments[0]})},run:function(t){a=s(),u=l(),void 0===t&&(t=d.only_crawl_id?h.getElementById(d.only_crawl_id):h.body);for(var e,n=d.ignored_tags,i=h.createTreeWalker(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,function(t){return 1!==t.nodeType?NodeFilter.FILTER_ACCEPT:n[t.tagName]||t.classList&&t.classList.contains("no-emojify")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP},!1),o=[];null!==(e=i.nextNode());)o.push(e);o.forEach(function(t){for(var e,n=[],i=new m;null!==(e=u.exec(t.data));)i.validate(e,e.index,e.input)&&n.push(e);for(var o=n.length;0<o--;){var r=p(n[o]);a=t,s=n[o],l=r,c=void 0,c=h.createElement(d.emojify_tag_type||"img"),d.emojify_tag_type&&"img"!==d.emojify_tag_type?c.setAttribute("class","emoji emoji-"+l):(c.setAttribute("class","emoji"),c.setAttribute("src",d.img_dir+"/"+l+".png")),c.setAttribute("height","20"),c.setAttribute("width","20"),c.setAttribute("title",":"+l+":"),c.setAttribute("alt",":"+l+":"),c.setAttribute("align","absmiddle"),a.splitText(s.index),a.nextSibling.nodeValue=a.nextSibling.nodeValue.substr(s[0].length,a.nextSibling.nodeValue.length),c.appendChild(a.splitText(s.index)),a.parentNode.insertBefore(c,a.nextSibling)}var a,s,l,c})}}}()})?o.apply(i,r):o)||(n.exports=a)}()},function(t,e,n){"use strict";var i=n(4),r=n(5),o=n(0),a=n(12),s=n(1),l=n(7),c=n(193),u=n(194),h=n(39),d=n(54),p=n(195),m=n(2),f=n(168),g=n(140),v=n(83),_=n(8);n(273);var b=r.Model.extend({initialize:function(){g(this,["theme"],this.autoPersist)}}),w=i.ItemView.extend({tagName:"li",className:"dropdown__item--positive profile-menu__item",template:u,events:{"click a":"onItemClicked"},onItemClicked:function(t){var e=this.model.get("onClick");e&&e(t)}});t.exports=i.CompositeView.extend({template:c,childView:w,childViewContainer:"#profile-menu-items",constructor:function(){this.collection=function(){var i=new r.Collection([{name:"Home",stub:"/home"}]),t=!p(),o=m.user();function e(){var t=o.get("scopes"),e=i.find(function(t){return t.get("upgradeItem")});if(o.id&&t&&!t.private_repo){if(e)return;var n=i.find(function(t){return"/apps"===t.get("stub")});i.add({name:"Allow Private Repo Access",stub:"/login/upgrade?scopes=repo",upgradeItem:!0},{at:i.indexOf(n)+1})}else{if(!e)return;i.remove(e)}}e(),o.on("change:id",e),o.on("change:scopes",e);var n=document.getElementById("gitter-dark")?"gitter-dark":"";return i.add({name:"Toggle Dark Theme",stub:"#dark-theme",onClick:function(t){t.preventDefault();var e="gitter-dark"===n?"":"gitter-dark";f(!!e.length),_.user.put("/settings/userTheme",{theme:e}).catch(function(t){v({title:"Problem persisting /settings/userTheme",text:"(see devtools console for details)"}),a.error("Problem persisting /settings/userTheme",{exception:t})}),n=e}}),i.add({name:"Terms of Service",stub:"https://element.io/terms-of-service",target:"_blank"}),i.add({name:"Contribute to Gitter",stub:"https://gitlab.com/gitterHQ/webapp",target:"_blank"}),i.add({name:"Help (Documentation)",stub:"https://gitlab.com/gitterHQ/webapp/tree/develop/docs#documentation",target:"_blank"}),i.add({name:"What's new?",stub:"https://gitlab.com/gitterHQ/webapp/blob/develop/CHANGELOG.md",target:"_blank"}),l.exportEnabled&&i.add({name:"Export user data",onClick:function(t){t.preventDefault(),s.trigger("route","export-user-data")}}),i.add({name:"Delete Account",onClick:function(t){t.preventDefault(),s.trigger("route","delete-account")}}),t&&i.add({name:"Sign Out",stub:"/logout",onClick:function(t){t.preventDefault(),d()}}),i}(),this.model=new b,i.CollectionView.prototype.constructor.apply(this,arguments)},ui:{menu:"#profile-menu-items",menuBackdrop:"#profile-menu-items-backdrop"},events:{"click #profile-menu-avatar":"onAvatarClicked","mouseleave @ui.menu":"onMouseLeave","click @ui.menuBackdrop":"onBackdropClicked"},modelEvents:{"change:active":"onActiveStateChange"},serializeData:function(){var t=this.model.toJSON(),e=m.user();return o.extend({},t,{avatarUrl:e.get("avatarUrl"),username:e.get("username")})},onMouseLeave:function(){this.model.set("active",!1)},onBackdropClicked:function(){this.model.set("active",!1)},onAvatarClicked:function(t){t.preventDefault(),this.model.set({active:!0})},onActiveStateChange:function(){var t=this.model.get("active");h(this.ui.menu[0],"hidden",!t),h(this.ui.menuBackdrop[0],"hidden",!t)}})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o;return'<img\n  id="profile-menu-avatar"\n  src="'+this.escapeExpression("function"==typeof(o=null!=(o=e.avatarUrl||(null!=t?t.avatarUrl:t))?o:e.helperMissing)?o.call(t,{name:"avatarUrl",hash:{},data:i}):o)+'"\n  class="profile-menu__avatar">\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o;return(null!=(o=e.if.call(t,null!=t?t.avatarUrl:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'<ul id="profile-menu-items" class="hidden dropdown profile-menu__list"></ul>\n<div id="profile-menu-items-backdrop" class="hidden dropdown-backdrop" style="z-index: -1;"></div>\n'},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o;return'href="'+this.escapeExpression("function"==typeof(o=null!=(o=e.stub||(null!=t?t.stub:t))?o:e.helperMissing)?o.call(t,{name:"stub",hash:{},data:i}):o)+'"'},3:function(t,e,n,i){var o;return this.escapeExpression("function"==typeof(o=null!=(o=e.target||(null!=t?t.target:t))?o:e.helperMissing)?o.call(t,{name:"target",hash:{},data:i}):o)},5:function(t,e,n,i){return"_top"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r;return"<a "+(null!=(o=e.if.call(t,null!=t?t.stub:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+' class="profile-menu__item__link" target="'+(null!=(o=e.if.call(t,null!=t?t.target:t,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.program(5,i,0),data:i}))?o:"")+'">'+this.escapeExpression("function"==typeof(r=null!=(r=e.name||(null!=t?t.name:t))?r:e.helperMissing)?r.call(t,{name:"name",hash:{},data:i}):r)+"</a>\n"},useData:!0})},function(t,e,n){"use strict";var i=n(21);t.exports=function(t){return 0<=(t||"object"===("undefined"==typeof navigator?"undefined":i(navigator))&&navigator.userAgent||"").toLowerCase().indexOf("gitter")}},function(t,e,n){"use strict";var i,o=n(1),r=n(6)("app:dozy");t.exports=(i=Date.now(),void window.setInterval(function(){var t=Date.now(),e=t-i;i=t,18e4<e&&(r("Sleep detected!"),o.trigger("reawaken",e))},12e4))},,function(t,e,n){"use strict";var i,o=n(4),r=n(13),a=n(206);t.exports=(i=o.Behavior.extend({defaults:{reverseScrolling:!1,scrollElementSelector:null,contentWrapperSelector:null},initialize:function(){var t=this.options.scrollElement||document.querySelector(this.options.scrollElementSelector)||this.view.el,e=this.options.contentWrapper||document.querySelector(this.options.contentWrapperSelector),n=this.options.reverseScrolling,i=new a(t,{reverse:n,contentWrapper:e});this.listenTo(i,"approaching.top",function(){this.view.collection.fetchMoreBefore({})}),this.listenTo(i,"approaching.bottom",function(){this.view.collection.fetchMoreAfter({})}),this.scroll=i,this.view.scroll=i},onDestroy:function(){this.scroll.disable()}}),r.register("InfiniteScroll",i),i)},,function(t,e,n){"use strict";var i,o,r,a,s=n(1);window.performance&&window.performance.mark&&window.performance.measure?(r=window.performance,a={},setInterval(function(){var t=r.getEntriesByType("measure");if(t)for(var e=0;e<t.length;e++){var n=t[e];if(0!==n.name.indexOf("gitter_"))return;var i=n.name.substring("gitter_".length),o=n.duration;o&&s.trigger("stats.time",i,o),r.clearMeasures(n.name)}},3e3),i={start:function(t){a[t]=!0,r.mark("gitter_"+t+"_start")},end:function(t){var e;a[t]?(delete a[t],e="gitter_"+t+"_start"):e=r.domContentLoadedEventStart;try{r.measure("gitter_"+t,e)}catch(t){}}}):(o={},i={start:function(t){o[t]=Date.now()},end:function(t){var e=o[t];if(delete o[t],e)return s.trigger("stats.time",t,Date.now()-e),e}}),t.exports=i},,function(t,e,n){"use strict";var i=n(10),o=n(0),r=n(5),a=n(4),s=n(235),l=n(236),c=n(27);n(51),n(26),n(276);var u=a.LayoutView.extend({template:s,className:"modal",ui:{title:".js-modal-title-text"},events:{"click .close":"hide","click [data-action=close]":"hide"},regions:{modalBody:"#modal-body-region",modalFooter:"#modal-footer-region"},initialize:function(t){if(this.options={menuItems:[],title:null,modalClassVariation:null,backdrop:!0},o.extend(this.options,t),this.view=this.options.view||this.view,this.options.menuItems&&this.options.menuItems.models)this.menuItemCollection=this.options.menuItems;else{var e=this.menuItems||this.options.menuItems||[];"function"==typeof e&&(e=e.call(this)),this.menuItemCollection=new r.Collection(e)}this.footerView=new l({collection:this.menuItemCollection}),this.listenTo(this.footerView,"item:activate",this.onMenuItemActivated,this)},serializeData:function(){return{title:this.options.title,modalClassVariation:this.options.modalClassVariation}},onMenuItemActivated:function(t){var e=t.get("action");this.view.trigger("menuItemClicked",e),this.trigger("menuItemClicked",e)},onRender:function(){var e=this;this.$el.hide(),this.modalBody.show(this.view),this.modalFooter.show(this.footerView),c()||this.disableAutoFocus?c()||this.el.focus():window.setTimeout(function(){try{var t=e.$el.find("input[type=text], input[type=url], input[type=tel], input[type=number], input[type=color], input[type=email]")[0];t&&(t.focus(),t.select())}catch(t){}},100)},setButtonState:function(t,e){var n=this.$el.find("button[data-action="+t+"]");e?n.removeAttr("disabled"):n.attr("disabled",!0)},toggleButtonClass:function(t,e,n){this.$el.find("button[data-action="+t+"]").toggleClass(e,n)},hideActions:function(){this.$el.find(".modal-footer .action").hide()},showActions:function(){this.$el.find(".modal-footer .action").show()},showPremium:function(){var t=this.$el.find(".premium");t.removeClass("hidden"),t.show()},hidePremium:function(){var t=this.$el.find(".modal-footer .premium");t.addClass("hidden"),t.hide()},onDestroy:function(){this.view.destroy(),this.view.dialog=null},prepare:function(){this.rendered||(this.render(),this.rendered=!0)},show:function(){var t=this.view.dialog=this;this.isShown||(this.prepare(),i("body").addClass("modal-open"),this.isShown=!0,this.$el.trigger("show"),this.trigger("show"),this.escape(),this.backdrop(function(){t.$el.parent().length||t.$el.appendTo(t.$backdrop),t.$el.show(),t.$el.addClass("in"),t.$el.trigger("shown"),t.trigger("shown")}))},hide:function(t){t&&t.preventDefault(),this.navigable?window.location="#":this.hideInternal()},navigationalHide:function(){this.hideInternal()},hideInternal:function(){this.isShown&&(this.isShown=!1,i("body").removeClass("modal-open"),this.escape(),this.$el.trigger("hide").removeClass("in"),this.trigger("hide"),this.hideModal())},hideModal:function(){this.$el.hide().trigger("hidden"),this.trigger("hidden"),this.backdrop(),this.destroy()},backdrop:function(t){if(this.isShown&&!1!==this.options.backdrop){this.$backdrop=i('<div class="modal-backdrop" />').appendTo(document.body);var e=this.$backdrop;this.$backdrop.click(function(t){t.target===this&&e.modal.hide()}),(this.$backdrop.modal=this).$backdrop.addClass("in"),t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),this.removeBackdrop()):t&&t()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},escape:function(){var e=this;function t(t){27===t.which&&e.hide()}this.isShown?i(document).on("keydown",t):this.isShown||i(document).off("keydown",t)}});t.exports=u},function(t,e,n){"use strict";var i=n(6)("app:user-notifications"),o=n(1),r=n(174),a=n(204),s=n(2),l=n(31),c=n(83),u=n(73),h=window.Notification,d=window.webkitNotifications;function p(){if(h){if(h.permission)return h.permission;switch(d.checkPermission()){case 0:return"granted";case 1:return"default";case 2:return"denied"}}}function m(t){if(t.click)return t.click(),!0;if(t.link){var e=r.parse(t.link);return u.routeLink(e,{appFrame:!0})}return!0}function f(e){i("onUserNotification",e),"granted"===p()&&(e.notificationKey?a(e.notificationKey).then(function(t){t&&c(e,m)}):c(e,m))}function g(){h&&"granted"!==p()&&h.requestPermission(function(){})}t.exports={initUserNotifications:function(){o.on("user_notification",f),o.on("ajaxError",function(){o.trigger("user_notification",{notificationKey:"ajax.error",title:"Unable to communicate with Gitter",text:"We're having problems communicating with the server at the moment....",click:function(){try{window.parent.location.reload(!0)}catch(t){window.location.reload(!0)}}})}),l(function(){s.isLoggedIn()&&g()})},requestAccess:g,isAccessDenied:function(){return"denied"===p()}}},function(t,e,n){"use strict";var i=n(9),r=n(97),o=Math.floor(1e7*Math.random());setInterval(function(){var o=Date.now();r.getKeys().forEach(function(t){if(0===t.indexOf("lock:")){var e=r.get(t);if(e){var n=e.split("-"),i=parseInt(n[0],10);i&&6e4<o-i&&r.remove(t)}}})},18e4);var a=i.method(function(t){var e="lock:"+t;if(r.get(e))return!1;var n=Date.now()+":"+o;return r.set(e,n),i.delay(16).then(function(){if(r.get(e)===n)return i.delay(1e4).then(function(){r.remove("lock:"+t)}),!0})});t.exports=a},,function(t,e,n){"use strict";var i=n(0),o=n(5),r=n(6)("app:nes"),a=n(16),s=n(17);function l(t,e){this._target=t,this._reverse=e&&e.reverse,this._prevScrollTop=0,this._prevScrollTime=Date.now(),this._nearTop=!1,this._nearBottom=!1,this._scrollHandler=i.throttle(a()?this.mobileScroll.bind(this):this.scroll.bind(this),100),this._contentWrapper=e&&e.contentWrapper,this.enable()}i.extend(l.prototype,o.Events,{scroll:function(){var t=this._target,e=t.scrollTop,n=t.scrollHeight-t.scrollTop-t.clientHeight,i=this._prevScrollTop,o=this._prevScrollBottom,r=i-(this._prevScrollTop=e),a=o-(this._prevScrollBottom=n),s=t.clientHeight/2,l=n<s;0<r&&e<s?this.trigger("approaching.top"):0<a&&l&&this.trigger("approaching.bottom"),this.scrollRate()},mobileScroll:function(){var t=this._target,e=t.scrollTop,n=t.scrollHeight-t.scrollTop-t.clientHeight,i=this._prevScrollTop,o=this._prevScrollBottom;this._prevScrollTop=e;var r=o-(this._prevScrollBottom=n),a=n<=0;0<i-e&&e<=0?this.trigger("approaching.top"):0<r&&a&&this.trigger("approaching.bottom")},scrollRate:function(){var t=this._target,e=Date.now(),n=t.scrollTop,i=t.scrollHeight-t.scrollTop-t.clientHeight,o=this._prevScrollTimeRate,r=this._prevScrollTopRate,a=this._prevScrollBottomRate;if(this._prevScrollTopRate=n,this._prevScrollBottomRate=i,this._prevScrollTimeRate=e,o){var s=r-n,l=a-i,c=e-o;if(0<s){if(n>t.clientHeight)return;n/(s/c)<600&&this.trigger("approaching.top")}else if(0<l){if(i>t.clientHeight)return;i/(l/c)<600&&this.trigger("approaching.bottom")}}},scrollToOrigin:function(){var t=this._target;if(this._reverse){var e=t.scrollHeight-t.clientHeight;t.scrollTop=e}else t.scrollTop=0;this._scrollHandler()},pageUp:function(){var t=this._target,e=t.scrollTop,n=Math.floor(.8*t.offsetHeight);t.scrollTop=e-n},pageDown:function(){var t=this._target,e=t.scrollTop,n=Math.floor(.8*t.offsetHeight);t.scrollTop=e+n},enable:function(){var t=this;this._enabled||(r("enabling scroll listener"),s.addEventListener(this._target,"scroll",this._scrollHandler),this._enabled=!0,this._contentWrapper&&setTimeout(function(){t._contentWrapper.offsetHeight<t._target.clientHeight&&t.trigger("approaching.top")},10))},disable:function(){this._enabled&&(r("disabling scroll listener"),s.removeEventListener(this._target,"scroll",this._scrollHandler),this._enabled=!1)}}),t.exports=l},function(t,e,n){"use strict";var m=n(10),i=n(4),r=n(1),o=n(208),s=n(219),l=n(220),c=n(2),u=n(200),h=n(6)("app:chat-collection-view");n(198),n(223),t.exports=function(){function a(t,n){var e=t.filter(function(t){var e=t.get("fromUser");return e&&e.id===n});return e[e.length-1]}return i.CollectionView.extend({template:!1,reorderOnSort:!0,behaviors:{InfiniteScroll:{reverseScrolling:!0,scrollElementSelector:"#content-frame",contentWrapperSelector:"#chat-container"},SmoothScroll:{scrollElementSelector:"#content-frame",contentWrapper:"#chat-container"}},events:{copy:"onCopy"},childView:o.ChatItemView,childViewOptions:function(t){var e={decorators:this.decorators,rollers:this.rollers};if(t&&t.id){var n=this.$el.find(".model-id-"+t.id)[0];n&&(e.el=n)}return e},initialize:function(t){this.firstRender=!0,this.viewComparator=this.collection.comparator,this.listenTo(r,"chatCollectionView:scrollToBottom",function(){this.collection.fetchLatest({},function(){this.rollers.scrollToBottom(),this.clearHighlight()},this)}),this.listenTo(r,"chatCollectionView:selectedChat",function(t,e){var n=this.collection.get(t);this.clearHighlight(),n&&(this.highlightChat(n,e.highlights),this.highlighted=n,this.scrollToChat(n))}),this.listenTo(r,"chatCollectionView:permalinkHighlight",this.highlightPermalinkChat),this.listenTo(r,"chatCollectionView:clearHighlight",this.clearHighlight),this.listenTo(r,"chatCollectionView:loadAndHighlight",this.loadAndHighlight);var e=document.querySelector("#content-frame");this.rollers=new s(e,this.el),this.decorators=t.decorators||[],this.listenTo(r,"chat.send",function(){this.rollers.scrollToBottom(),this.collection.fetchLatest({},function(){},this)}),this.listenTo(this.collection,"fetch:after",function(){h("Switching rollers to stable and locking"),this.rollers.stable(),this.rollers.setModeLocked(!0)}),this.listenTo(this.collection,"fetch:after:complete",function(){h("Unlocking rollers"),this.rollers.setModeLocked(!1)}),this.listenTo(r,"chatCollectionView:pageUp",this.pageUp),this.listenTo(r,"chatCollectionView:pageDown",this.pageDown),this.listenTo(r,"chatCollectionView:editLastChat",this.editLastChat),this.listenTo(r,"chatCollectionView:substLastChat",this.substLastChat),this.listenTo(r,"chatCollectionView:viewportResize",this.viewportResize),this.listenTo(r,"chatCollectionView:scrollToChatId",this.scrollToChatId),this.listenTo(c.troupe(),"change:id",function(){this.scrollToBottom()})},onTrackViewportCenter:function(){if(!this.isScrolledToBottom()){var t=this.rollers.getMostCenteredElement();this.rollers.stable(t)}},scrollToBottom:function(){this.rollers.scrollToBottom()},isScrolledToBottom:function(){return this.rollers.isScrolledToBottom()},pageUp:function(){this.scroll.pageUp()},pageDown:function(){this.scroll.pageDown()},scrollToChat:function(t){var e=t.get("parentId");if(e)h("scrollToChat(".concat(t.id,") is in threaded conversation, scrolling to ").concat(e," and opening thread")),r.trigger("dispatchVueAction","threadMessageFeed/focusOnMessage",{id:t.id}),this.scrollToChatId(e);else{var n=this.children.findByModel(t);if(!n)return void h("scrollToChat(".concat(t.id,") does not have view in the collectionView, doing nothing"));h("scrollToChat(".concat(t.id,") to center of screen")),this.rollers.scrollToElement(n.el,{centre:!0})}},scrollToChatId:function(e){var t=this.collection.get(e);if(h("scrollToChatId(".concat(e,") ->"),t),t)return this.scrollToChat(t);var n=this;this.collection.ensureLoaded(e,function(){var t=n.collection.get(e);if(h("scrollToChatId(".concat(e,") -> ensureLoaded ->"),t),t)return this.scrollToChat(t)}.bind(this))},highlightChat:function(t,e){t.set("highlights",e||[])},clearHighlight:function(){var t=this.highlighted;if(t)try{this.highlightChat(t)}catch(t){h("Could not clear previously highlighted item")}},onCopy:function(t){if(window.getSelection){t.originalEvent&&(t=t.originalEvent);var e=window.getSelection();if(e&&e.rangeCount&&e.getRangeAt){var n=e.getRangeAt(0),i=""+e,o=m(n.startContainer).parents(".chat-item")[0],r=m(n.endContainer).parents(".chat-item")[0];if(o&&r){var a=m(n.startContainer).parents(".js-chat-item-text")[0],s=m(n.endContainer).parents(".js-chat-item-text")[0];if(a&&s&&a===s){if(0<n.startOffset||n.endOffset<n.endContainer.textContent.length)return;var l=function(t,e){for(;n=void 0,(!(n=e.previousSibling)||3===n.nodeType&&!n.previousSibling&&n.textContent.match(/^[\s\n\r]*$/))&&e!==t;)e=e.parentElement;var n;return e===t}(a,n.startContainer),c=function(t,e){for(;n=void 0,(!(n=e.nextSibling)||3===n.nodeType&&!n.nextSibling&&n.textContent.match(/^[\s\n\r]*$/))&&e!==t;)e=e.parentElement;var n;return e===t}(a,n.endContainer);if(!l||!c)return}var u=function(t,e,n){for(var i,o=[],r=0,a=t.children;r<a.length&&(i=a.findByIndex(r)).el!==e;)r++;for(;r<a.length;){if(i=a.findByIndex(r),o.push(i.model),i.el===n)return o;r++}return[]}(this,o,r);if(n.startContainer.textContent.length&&n.startContainer.textContent.length===n.startOffset&&u.shift(),0===n.endOffset&&u.pop(),u.length){var h="\n"===(p=(d=u).map(function(t){var e;if(1<d.length&&t.get("burstStart")){var n=t.get("fromUser"),i=n&&n.username;i&&(i="@"+i),e=i+"\n"+t.get("text")}else e=t.get("text");return e?("\n"!==e.charAt(e.length-1)&&(e+="\n"),e):""}).join("")).charAt(p.length-1)?p.substring(0,p.length-1):p;t.clipboardData.setData("text/plain",i),t.clipboardData.setData("text/x-markdown",h),t.preventDefault()}}}}var d,p},editLastChat:function(t){var e=a(this.collection,t);if(e){var n=this.children.findByModel(e);n&&n.toggleEdit()}},substLastChat:function(t,e,n,i){var o=a(this.collection,t);if(o){var r=this.children.findByModel(o);r&&r.subst(e,n,i)}},viewportResize:function(t){t?this.rollers.adjustScrollContinuously(500):this.rollers.adjustScroll(500)},highlightPermalinkChat:function(t){var o=this;this.collection.ensureLoaded(t,function(t,e){if(!t&&e){var n=e.get("parentId");if(n)return r.trigger("dispatchVueAction","threadMessageFeed/highlightChildMessage",{parentId:n,id:e.id}),void o.highlightPermalinkChat(n);e.get("threadMessageCount")&&r.trigger("dispatchVueAction","threadMessageFeed/open",e.id);var i=l(o.collection,e);i.forEach(function(t){var e=o.children.findByModel(t);e&&e.highlight()}),o.scrollToChat(i[0])}})},loadAndHighlight:function(t,n){this.collection.ensureLoaded(t,function(t,e){t||e&&(this.clearHighlight(),e&&(this.highlightChat(e,n&&n.highlights),this.highlighted=e,this.scrollToChat(e)))}.bind(this))},onBeforeRender:function(){if(u.start("chat-collection.render"),this._renderStartTime=Date.now(),!this.collection.length&&this.isRendered)for(var t,e=this.el;t=e.firstChild;)e.removeChild(t)},onRender:function(){if(this.collection.length){u.end("chat-collection.render"),this.collection.loading||u.end("room-switch.render");var t=c(),e=t.permalinkChatId;e&&(this.highlightPermalinkChat(e),delete t.permalinkChatId)}}})}()},function(t,e,n){"use strict";var l=n(6)("app:chat-item-view"),c=n(10),u=n(0),h=n(178),d=n(15),p=n(4),m=n(35),f=n(137),g=n(2),v=n(1),_=n(8),b=n(28),w=n(39),y=n(14),x=n(16),k=n(79),T=n(150),C=n(95),E=n(186),I=n(209),S=n(59),M=n(76),A=n(187),R=n(41),L=n(32),B=n(211),D=n(213),O=n(177),P=n(214),j=n(167);n(215),n(52),n(216),n(218),n(188),n(24),t.exports=function(){var t={"click .js-chat-item-edit":"toggleEdit","click .js-chat-item-readby":"showReadBy","click .js-chat-item-from":"mentionUser","click .js-chat-time":"permalink","mouseover .js-chat-item-readby":"showReadByIntent","click .webhook":"expandActivity",click:"onClick","click .js-chat-item-actions":"showActions","click .js-parent-message-indicator":"openThread"},e={touchstart:"onTouchstart",touchmove:"onTouchmove",touchend:"onTouchend","click .js-parent-message-indicator":"openThread"},n=function(t){return v.trigger("dispatchVueAction","threadMessageFeed/open",t)},i=p.ItemView.extend({attributes:function(){var t={"chat-item":!0,"threaded-conversation-chat-item":!!this.model.get("parentId")},e=this.model.get("id");return e&&(t["model-id-"+e]=!0),{class:h(t),role:"listitem"}},ui:{actions:".js-chat-item-actions",text:".js-chat-item-text",sent:".js-chat-time",timestampLink:".js-chat-time"},behaviors:{Widgets:{},UnreadItems:{},Highlight:{},LastMessageSeen:{},TimeAgo:{modelAttribute:"sent",el:".js-chat-time"},Tooltip:{".js-chat-time":{titleFn:"getSentTimeTooltip",html:!0}}},modelEvents:{syncStatusChange:"onSyncStatusChange",change:"onChange"},isEditing:!1,events:function(){return x()?e:t},expandActivity:function(){c(".webhook .commits").slideToggle("fast")},initialize:function(t){this.rollers=t.rollers,this._oneToOne=g.inOneToOneTroupeContext(),this.isPermalinkable=!this._oneToOne,this.userCollection=t.userCollection,this.decorated=!1,this.doubleTapper=new E,this.listenToOnce(this,"messageInViewport",this.decorate),this.chatItemPolicy=new j(this.model.attributes,{currentUserId:g.getUserId(),isTroupeAdmin:g.isTroupeAdmin()})},template:function(t){return t.status?D(t):B(t)},serializeData:function(){var t=u.clone(this.model.attributes);return t.model=this.model,t.roomName=g.troupe().get("uri"),t.fromUser&&(t.username=t.fromUser.username,t.displayName=t.fromUser.displayName),t.virtualUser&&(t.virtualUser.isMatrix="matrix"===t.virtualUser.type,t.virtualUser.profileUrl=A(t.virtualUser)),t.sent||(t.sent=d()),t.sentTimeFormatted=k(t.sent,{forceUtc:this.isArchive()}),t.permalinkUrl=this.getPermalinkUrl(),t.sentTimeFormattedFull=T(t.sent),t.readByText=this.getReadByText(t.readBy),t.html||(t.html=u.escape(t.text)),t.isPermalinkable=this.isPermalinkable,t.showItemActions=!this.isArchive(),t},getReadByText:function(t){return t?this._oneToOne?" ":(10<t&&(t=10),t):""},onChange:function(){this.chatItemPolicy=new j(this.model.attributes,{currentUserId:g.getUserId(),isTroupeAdmin:g.isTroupeAdmin()}),this.updateRender(this.model.changed)},renderText:function(){var t=this.model,e=t.get("html")||u.escape(t.get("text"));0===e.length&&(e="<i>This message was deleted</i>",this.$el.addClass("deleted")),this.ui.text[0].innerHTML=e,this.decorated&&this.decorate()},decorate:function(){this.decorated=!0,this.options.decorators.forEach(function(t){t.decorate(this)},this)},onShow:function(){var t=this.ui.timestampLink[0];t&&b.set(t,"disableRouting",!0)},onRender:function(){this.updateRender()},_requiresFullRender:function(t){if(t&&"threadMessageCount"in t)return!0;if(t&&"burstStart"in t){var e=!!this.model.previous("burstStart");if(!!this.model.get("burstStart")!==e)return!0}return!1},updateRender:function(t){if(this._requiresFullRender(t))return this.render();var e=this.ui.sent[0];if((!t||"html"in t||"text"in t)&&this.renderText(),t&&"id"in t&&e){var n=this.getPermalinkUrl();n.length&&e.setAttribute("href",n)}if(t&&"sent"in t&&e){var i=this.model.get("sent");if(i){var o=T(i);e.setAttribute("title",o)}}this.handleUpdateMentionChanges(t),this.handleUpdateMessageStateChanges(t),this.handleUpdateReadbyStateChanges(t),g.isLoggedIn()||this.ui.actions.hide()},handleUpdateMentionChanges:function(t){if(!t||"mentioned"in t){var e=this.model.get("mentioned");w(this.el,"mentioned",e),e&&(this.el.setAttribute("aria-live","assertive"),this.el.setAttribute("role","alert"))}},handleUpdateMessageStateChanges:function(t){var e=this.model;t&&!("editedAt"in t)||w(this.el,"hasBeenEdited",this.hasBeenEdited()),t&&!("burstStart"in t)||(w(this.el,"burstStart",!!e.get("burstStart")),w(this.el,"burstContinued",!e.get("burstStart")))},handleUpdateReadbyStateChanges:function(t){if(t&&"readBy"in t){var e=this.model,n=e.get("readBy"),i=e.previous("readBy"),o=this.$el.find(".js-chat-item-readby"),r="chat-item__icon--read-by-some";0===o.length?n&&y(function(){o.addClass(r)}):0===i!=(0===n)&&o.toggleClass(r,!!n)}},focusInput:function(){c("#chat-input-textarea").focus()},onEditCancel:function(){x()||this.focusInput(),this.toggleEdit()},onEditSave:function(t){this.isEditing&&(this.chatItemPolicy.canEdit()&&t!==this.model.get("text")&&(this.model.set("text",t),this.model.set("html",null),this.model.save()),x()||this.focusInput(),this.toggleEdit())},isArchive:function(){return!!g().archive},hasBeenEdited:function(){return!!this.model.get("editedAt")},hasBeenRead:function(){return!!this.model.get("readBy")},onToggleEdit:function(){this.toggleEdit()},toggleEdit:function(){if(this.isEditing)this.isEditing=!1,this.showText(),this.stopListening(v,"focus.request.chat.edit"),v.trigger("chat.edit.hide");else if(this.chatItemPolicy.canEdit()){var t=this;this.isEditing=!0,this.showInput(),this.listenTo(v,"focus.request.chat.edit",function(){t.inputBox.$el.focus(),v.trigger("focus.change.chat.edit")}),v.trigger("chat.edit.show")}},subst:function(t,e,n){if(this.chatItemPolicy.canEdit()){var i=t.replace(/(^|[^\[])\^/g,"$1"),o=new RegExp(i,n?"gi":"i"),r=this.model.get("text").replace(o,e);this.model.set({text:r,html:null}).save()}},showText:function(){this.inputBox&&(this.stopListening(this.inputBox),this.inputBox.remove(),delete this.inputBox),this.renderText()},showInput:function(){var t=this.ui.text;t.html("<textarea class='trpChatInput' autofocus></textarea>");var e=this.model.get("text"),n=t.find("textarea").val(e);this.inputBox=new P({el:n}).render(),n.focus(),n.val("").val(e),this.listenTo(this.inputBox,"save",this.onEditSave),setTimeout(function(){n.focus(),n.val("").val(e)},0),this.listenTo(this.inputBox,"cancel",this.onEditCancel)},showReadByIntent:function(t){r.hoverTimeout(t,function(){this.showReadBy(t)},this)},showReadBy:function(t){if(!this.popover){v.trigger("stats.event","chat-item.show-read-by");var e=new r({model:this.model,userCollection:this.userCollection,scroller:this.$el.parents(".primary-scroll"),placement:"vertical",minHeight:"88px",width:"300px",title:"Read By",targetElement:t.target});e.show(),r.singleton(this,e),t.preventDefault(),t.stopPropagation()}},showActions:function(t){if(!this.popover){var e=new s({model:this.model,chatItemView:this,targetElement:t.target,placement:"horizontal",width:"125px"});this.listenTo(e,"render",function(){this.ui.actions.addClass("selected")}),this.listenTo(e,"destroy",function(){this.ui.actions.removeClass("selected")}),e.show(),r.singleton(this,e),t.preventDefault(),t.stopPropagation()}},mentionUser:function(){var t="@"+this.model.get("fromUser").username+" ";v.trigger("input.append",t)},permalink:function(t){if(this.isPermalinkable&&this.model.id){var e=["chat",this.model,{appendInput:!!t.altKey}];l.apply(void 0,["permalink.requested"].concat(e)),v.trigger.apply(v,["permalink.requested"].concat(e)),t.preventDefault(),t.stopPropagation()}},openThread:function(){n(this.model.get("id"))},highlight:function(){var t=this;this.$el.addClass("chat-item__highlighted"),setTimeout(function(){t.$el.removeClass("chat-item__highlighted")},5e3)},onTouchstart:function(){this.isDragging=!1},onTouchmove:function(){this.isDragging=!0},onTouchend:function(t){this.isDragging?this.isDragging=!1:this.onTap(t)},onTap:function(t){2===this.doubleTapper.registerTap()&&(this.toggleEdit(),t.preventDefault(),t.stopPropagation())},onClick:function(t){switch(t.originalEvent.detail){case 1:this.triggerMethod("selected",this.model);break;case 2:break;case 3:window.getSelection&&window.getSelection().selectAllChildren(this.el)}},onSyncStatusChange:function(t){this.$el.toggleClass("synced","synced"===t).toggleClass("syncing","syncing"===t).toggleClass("syncerror","syncerror"===t)},getPermalinkUrl:function(){if(!this.isPermalinkable)return"";var t=this.model.id;if(!t)return"";var e=g.troupe().get("uri");if(!e)return"";var n=d(this.model.get("sent"),d.defaultFormat);return C(e,t,n,this.isArchive())},getSentTimeTooltip:function(){var t=this.model.get("sent");if(!t)return"";var e=t.format("LLL");return this.isPermalinkable&&e&&!this.isArchive()&&g.isLoggedIn()&&(e+="  <br>(Alt-click to quote)"),e},attachElContent:S.attachElContent}),o=p.CollectionView.extend({childView:R,className:"popoverReadBy",initialize:function(t){this.collection=new M.ReadByCollection(null,{listen:!0,chatMessageId:this.model.id,userCollection:t.userCollection}),this.collection.loading=!0},onDestroy:function(){var t=this.collection;this.stopListening(t),t.unlisten(),t.stopListening()}});m.mixin(o,I);var r=L.extend({initialize:function(t){L.prototype.initialize.apply(this,arguments),this.view=new o({model:this.model,userCollection:t.userCollection})}}),a=p.ItemView.extend({template:O,initialize:function(t){this.chatItemView=t.chatItemView},events:{"click .js-chat-action-edit":"edit","click .js-chat-action-threadReply":"threadReply","click .js-chat-action-quote":"quote","click .js-chat-action-delete":"delete","click .js-chat-action-report":"report","click .js-chat-action-retry":"retry","click .js-chat-action-cancel":"cancel"},edit:function(){this.chatItemView.triggerMethod("toggleEdit")},threadReply:function(){n(this.model.get("id"))},quote:function(){var t=this.model.get("text").split(/\r?\n/).map(function(t){return"> ".concat(t)}).join("\n");v.trigger("input.append",t+"\n\n",{newLine:!0})},delete:function(){this.model.destroy()},report:function(){var t=f("/v1/rooms/",g.getTroupeId(),"chatMessages",this.model.get("id"),"report");_.post(t)},retry:function(){this.model.save()},cancel:function(){var t=this.model;t.id?t.fetch():t.collection.remove(t)},serializeData:function(){if(this.model.hasSyncError())return{actions:[{name:"retry",description:"Retry"},{name:"cancel",description:"Cancel"}]};var t=!this.model.get("text"),e=!!this.model.id,n=this.chatItemView.chatItemPolicy.canEdit(),i=this.chatItemView.chatItemPolicy.canDelete(),o=this.chatItemView.chatItemPolicy.canReport(),r=[];return r.push({name:"threadReply",description:"Reply in thread",disabled:!e}),t||r.push({name:"quote",description:"Quote",disabled:!e}),r.push({name:"edit",description:"Edit",disabled:!n}),r.push({name:"delete",description:"Delete",disabled:!i}),r.push({name:"report",description:"Report",disabled:!o}),{actions:r}}}),s=L.extend({initialize:function(t){L.prototype.initialize.apply(this,arguments),this.view=new a({model:this.model,chatItemView:t.chatItemView})},events:{click:"hide"}});return{ChatItemView:i,ReadByView:o,ReadByPopover:r,ActionsView:a,ActionsPopover:s}}()},function(t,e,n){"use strict";var i=n(4),o=n(5),r=n(210),a=i.ItemView.extend({template:r});t.exports={loadingView:a,initialize:function(){this.showEmptyView=this.showLoadingView},showLoadingView:function(){if(this.collection.loading){var t=i.getOption(this,"loadingView");this.loadingModel||(this.loadingModel=new o.Model);var e=this.children.findByModel(this.loadingModel);return t&&!e&&(this.addChild(this.loadingModel,t,0),this.listenToOnce(this.collection,"loaded",function(){if(this.removeChildView(this.loadingModel),0===this.collection.length)return this.constructor.prototype.showEmptyView.call(this),!0})),!0}return this.constructor.prototype.showEmptyView.call(this),!0}}},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return'<div class="trpLoading"></div>'},useData:!0})},function(t,e,a){var n=a(3);t.exports=(n.default||n).template({1:function(t,e,n,i){var o;return"  <div class='chat-item__aside'>\n    <div class=\"chat-item__avatar\">\n"+(null!=(o=e.if.call(t,null!=t?t.fromUser:t,{name:"if",hash:{},fn:this.program(2,i,0),inverse:this.noop,data:i}))?o:"")+"    </div>\n  </div>\n"},2:function(t,e,n,i){return"      "+this.escapeExpression(e.widget.call(t,"avatar",{name:"widget",hash:{user:null!=t?t.fromUser:t},data:i}))+"\n"},4:function(t,e,n,i){var o;return'    <div class="chat-item__actions js-chat-item-actions">\n'+(null!=(o=e.if.call(t,null!=t?t.readByText:t,{name:"if",hash:{},fn:this.program(5,i,0),inverse:this.program(7,i,0),data:i}))?o:"")+'      <i class="chat-item__icon icon-ellipsis"></i>\n    </div>\n'},5:function(t,e,n,i){return'      <i class="chat-item__icon icon-check chat-item__icon--read chat-item__icon--read-by-some js-chat-item-readby"></i>\n'},7:function(t,e,n,i){return'      <i class="chat-item__icon icon-check chat-item__icon--read js-chat-item-readby"></i>\n'},9:function(t,e,n,i){return'      <div id=\'initial\' style="position:relative;top:-120px; left: 0; height:0;width:0;overflow:hidden"><a name="initial"/>_</a></div>\n'},11:function(t,e,n,i){var o,r=this.lambda,a=this.escapeExpression;return"    <div class='chat-item__details'>\n      <div class='chat-item__from js-chat-item-from'>"+a(r(null!=t?t.displayName:t,t))+"</div>\n      <div class='chat-item__username js-chat-item-from'>@"+a(r(null!=t?t.username:t,t))+"</div>\n"+(null!=(o=e.if.call(t,null!=t?t.virtualUser:t,{name:"if",hash:{},fn:this.program(12,i,0),inverse:this.noop,data:i}))?o:"")+"      <a class='chat-item__time js-chat-time' "+(null!=(o=e.if.call(t,null!=t?t.permalinkUrl:t,{name:"if",hash:{},fn:this.program(19,i,0),inverse:this.noop,data:i}))?o:"")+' title="'+a(r(null!=t?t.sentTimeFormattedFull:t,t))+'">'+a(r(null!=t?t.sentTimeFormatted:t,t))+"</a>\n    </div>\n"},12:function(t,e,n,i){var o;return'      <a\n        class="chat-item__flair chat-item__flair--'+this.escapeExpression(this.lambda(null!=(o=null!=t?t.virtualUser:t)?o.type:o,t))+'"\n        '+(null!=(o=e.if.call(t,null!=(o=null!=t?t.virtualUser:t)?o.profileUrl:o,{name:"if",hash:{},fn:this.program(13,i,0),inverse:this.noop,data:i}))?o:"")+'\n        target="_blank"\n        title="This user is being bridged from Matrix"\n      >\n'+(null!=(o=e.if.call(t,null!=(o=null!=t?t.virtualUser:t)?o.isMatrix:o,{name:"if",hash:{},fn:this.program(15,i,0),inverse:this.program(17,i,0),data:i}))?o:"")+"      </a>\n"},13:function(t,e,n,i){var o;return'href="'+this.escapeExpression(this.lambda(null!=(o=null!=t?t.virtualUser:t)?o.profileUrl:o,t))+'"'},15:function(t,e,n,i){return"          [m]\n"},17:function(t,e,n,i){var o;return"          "+this.escapeExpression(this.lambda(null!=(o=null!=t?t.virtualUser:t)?o.type:o,t))+"\n"},19:function(t,e,n,i){return" href='"+this.escapeExpression(this.lambda(null!=t?t.permalinkUrl:t,t))+"'"},21:function(t,e,n,i){var o,r=this.escapeExpression;return'      <div class=\'chat-item__thread-message-indicator parent-message-indicator js-parent-message-indicator\'>\n        <img class="chat-item__pmi-icon" src="'+r(e.cdn.call(t,"images/svg/corner-down-right.svg",{name:"cdn",hash:{},data:i}))+'" /> '+r(this.lambda(null!=t?t.threadMessageCount:t,t))+" "+r((o=a(212),o&&(o.__esModule?o.default:o)).call(t,null!=t?t.threadMessageCount:t,"reply","replies",{name:"pluralize",hash:{},data:i}))+"\n      </div>\n"},23:function(t,e,n,i){var o=this.escapeExpression;return"      <div class='chat-item__thread-message-indicator'>\n        <a href=\""+o(this.lambda(null!=t?t.permalinkUrl:t,t))+'"><img class="chat-item__pmi-icon" src="'+o(e.cdn.call(t,"images/svg/corner-up-left.svg",{name:"cdn",hash:{},data:i}))+'" /> go to thread</a>\n      </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o;return"<div class='chat-item__container'>\n"+(null!=(o=e.if.call(t,null!=t?t.burstStart:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+(null!=(o=e.if.call(t,null!=t?t.showItemActions:t,{name:"if",hash:{},fn:this.program(4,i,0),inverse:this.noop,data:i}))?o:"")+"  <div class='chat-item__content'>\n"+(null!=(o=e.if.call(t,null!=t?t.initial:t,{name:"if",hash:{},fn:this.program(9,i,0),inverse:this.noop,data:i}))?o:"")+(null!=(o=e.if.call(t,null!=t?t.burstStart:t,{name:"if",hash:{},fn:this.program(11,i,0),inverse:this.noop,data:i}))?o:"")+"    <div class='chat-item__text js-chat-item-text'>\n      "+(null!=(o=this.lambda(null!=t?t.html:t,t))?o:"")+"\n    </div>\n"+(null!=(o=e.if.call(t,null!=t?t.threadMessageCount:t,{name:"if",hash:{},fn:this.program(21,i,0),inverse:this.noop,data:i}))?o:"")+(null!=(o=e.if.call(t,null!=t?t.parentId:t,{name:"if",hash:{},fn:this.program(23,i,0),inverse:this.noop,data:i}))?o:"")+"  </div>\n</div>\n"},useData:!0})},function(t,e,n){"use strict";t.exports=function(t,e,n){return 1===t?e:"string"==typeof n?n:e+"s"}},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){return'      <div id=\'initial\' style="position:relative;top:-120px; left: 0; height:0;width:0;overflow:hidden"><a name="initial"/>_</a></div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing;return"<div class='chat-item__container chat-item__status'>\n  <div class='chat-item__aside'>\n\n  </div>\n  <div class=\"chat-item__actions js-chat-item-actions\">\n    <i class=\"chat-item__icon icon-ellipsis\"></i>\n  </div>\n  <div class='chat-item__content'>\n"+(null!=(o=e.if.call(t,null!=t?t.initial:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+"    <div class='chat-item__details'>\n      <div class='chat-item__text js-chat-item-text'>"+this.escapeExpression("function"==typeof(r=null!=(r=e.username||(null!=t?t.username:t))?r:a)?r.call(t,{name:"username",hash:{},data:i}):r)+" "+(null!=(o="function"==typeof(r=null!=(r=e.html||(null!=t?t.html:t))?r:a)?r.call(t,{name:"html",hash:{},data:i}):r)?o:"")+"</div>\n    </div>\n  </div>\n</div>\n"},useData:!0})},function(t,e,n){"use strict";var i=n(4),a=n(1),o=n(149),r=n(53),s=n(35),l=n(16),c=n(14),u=i.ItemView.extend({template:!1,events:{textInput:"onTextInput",input:"onInput",blur:"onBlur"},keyboardEvents:{"chat.edit.escape":"onKeyEscape","chat.edit.send":"onKeySend"},onRender:function(){return o()&&this.$el.addClass("scroller"),this.onInput(),this},onInput:function(){this.$el.val()?this.expandTextareaIfNeeded():this.shrinkTextarea()},onBlur:function(){var t=this;l()?c(function(){t.trigger("cancel")}):this.resetTextareaSize()},onKeyEscape:function(){this.trigger("cancel")},onTextInput:function(t){var e=t.originalEvent,n=e.data;if(l()&&"\n"===n)return this.onKeySend(e)},onKeySend:function(t){this.trigger("save",this.$el.val()),t.preventDefault()},resetTextareaSize:function(){this.shrinkTextarea(),this.expandTextareaIfNeeded()},shrinkTextarea:function(){this.$el.css("height",""),a.trigger("chatCollectionView:viewportResize",!1)},expandTextareaIfNeeded:function(){var t=this.$el,e=t[0],n=e.offsetHeight,i=e.scrollHeight,o=window.innerHeight/2,r=Math.min(i,o);n<r&&(t.css("height",r),a.trigger("chatCollectionView:viewportResize",!0))}});s.mixin(u,r),t.exports=u},function(t,e,n){"use strict";var i=n(2),o=n(4),r=n(13),a=[],s=0;function l(){var t=a.shift();t&&(s<a.length&&(s=a.length),t.classList.remove("unread"),a.length?setTimeout(l,10<s?60:70):s=0)}var c=o.Behavior.extend({modelEvents:{"change:unread":"unreadChanged"},onRender:function(){if(i.isLoggedIn()){var t=this.view.model;t&&t.get("unread")&&this.el.classList.add("unread")}},unreadChanged:function(t,e,n){var i;e?this.el.classList.add("unread"):t.previous("unread")&&(n&&n.fast?(this.el.classList.add("fast"),this.el.classList.remove("unread")):(i=this.el,a.push(i),1===a.length&&setTimeout(l,500)))}});r.register("UnreadItems",c),t.exports=c},function(t,e,n){"use strict";var i,o=n(4),r=n(217),a=n(13);t.exports=(i=o.Behavior.extend({modelEvents:{"change:highlights":"onRender"},onRender:function(){if(this.view.model){var t=this.view.model.get("highlights");this.highlighted&&r.removeHighlights(this.view.el),t&&t.length&&(this.highlighted=!0,r.highlight(this.view.el,t))}}}),a.register("Highlight",i),i)},function(t,e,n){"use strict";t.exports={highlight:function(t,e){for(var n,i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,function(t){return 1!==t.nodeType?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP},!1),o=[];null!==(n=i.nextNode());)o.push(n);var r=e.map(function(t){return"("+t.replace(/(^|[^\[])\^/g,"$1")+")"}).join("|"),l=new RegExp(r,"gi");o.forEach(function(t){for(var e,n=[];null!==(e=l.exec(t.data));)n.push(e);for(var i=n.length;0<i--;)o=t,r=(e=n[i])[0],a=e.index,s=void 0,(s=document.createElement("em")).classList.add("highlight"),s.textContent=r,o.splitText(a),o.nextSibling.nodeValue=o.nextSibling.nodeValue.substr(r.length,o.nextSibling.nodeValue.length),s.appendChild(o.splitText(a)),o.parentNode.insertBefore(s,o.nextSibling);var o,r,a,s})},removeHighlights:function(t){for(var e=t.querySelectorAll("em.highlight"),n=0;n<e.length;++n){var i=e[n],o=document.createTextNode(i.textContent);i.parentNode.replaceChild(o,i)}}}},function(t,e,n){"use strict";var i,o=n(4),r=n(13);t.exports=(i=o.Behavior.extend({modelEvents:{"change:lastMessageSeen":"onRender"},onRender:function(){this.view.model&&this.view.model.get("lastMessageSeen")&&this.view.$el.addClass("lastMessageSeen")}}),r.register("LastMessageSeen",i),i)},function(t,e,n){"use strict";var a=n(74),s=n(0),i=n(48),l=n(17),c=n(14);t.exports=function(){function t(t,e,n){n=n||{},this._target=t,this._childContainer=e||t,this._mutationHandlers={},this._mutationHandlers[1]=this.updateTrackBottom.bind(this),this._mutationHandlers[3]=this.updateStableTracking.bind(this),this._stableElement=null,n.doNotTrack?this._mode=3:this.initTrackingMode();var i=this.adjustScroll.bind(this);this.mutant=new a(t,i,{transitions:!0,observers:{attributes:!1,characterData:!1},ignoreTransitions:["opacity","background-color","border","color","border-right-color","visibility"]});var o=this,r=s.throttle(function(){c(function(){o.trackLocation()})},100);l.addEventListener(t,"scroll",r),window.addEventListener("resize",i,!1),window.addEventListener("focusin",i,!1),window.addEventListener("focusout",i,!1)}return t.prototype={adjustScroll:function(){return this._mutationHandlers[this._mode](),this._postMutateTop=this._target.scrollTop,!0},adjustScrollContinuously:function(t){i.intervalUntil(this.adjustScroll.bind(this),t)},initTrackingMode:function(){this.isScrolledToBottom()?this._mode=1:this.stable()},stable:function(t){var e=this._target;if(this._mode=3,this._stableElement=t||this.getBottomMostVisibleElement(),this._stableElement){var n=e.scrollTop+e.clientHeight,i=this._stableElement.offsetTop-e.offsetTop;this._stableElementFromBottom=n-i}},setModeLocked:function(t){(this.modeLocked=t)||this.trackLocation()},disableTrackBottom:function(){this.disableTrackBottom=!0},enableTrackBottom:function(){this.disableTrackBottom=!0,this.isScrolledToBottom()&&this.trackLocation()},isScrolledToBottom:function(){var t=this._target;return t.scrollTop>=t.scrollHeight-t.clientHeight-10},updateTrackBottom:function(){var t=this._target,e=t.scrollHeight-t.clientHeight;this.scroll(e)},startTransition:function(t,e){this.mutant.startTransition(t,e)},endTransition:function(t){this.mutant.endTransition(t)},scrollToBottom:function(){var t=this._target,e=t.scrollHeight-t.clientHeight;this.scroll(e),delete this._stableElement,delete this._stableElementFromBottom,this._mode=1,this._postMutateTop=e},scrollToElement:function(t,e){var n,i=this._target;if(e&&e.centre){var o=t.offsetHeight,r=i.clientHeight;o<r&&(n=Math.floor(t.offsetTop+o/2-r/2))}n||(n=t.offsetTop-300),n<0&&(n=0),this.scroll(n),this.stable(t)},scrollToBottomContinuously:function(t){i.intervalUntil(this.scrollToBottom.bind(this),t)},updateStableTracking:function(){if(this._stableElement){var t=this._target,e=this._stableElement.offsetTop-t.offsetTop-t.clientHeight+this._stableElementFromBottom;this.scroll(e)}},trackLocation:function(){var t=this._target;if(this._postMutateTop===t.scrollTop)return!0;var e=t.scrollTop>=t.scrollHeight-t.clientHeight-10;if(this.modeLocked||(e?1!=this._mode&&(this._mode=1):3!=this._mode&&(this._mode=3)),3===this._mode){if(this._stableElement=this.getBottomMostVisibleElement(),!this._stableElement)return;var n=t.scrollTop+t.clientHeight,i=this._stableElement.offsetTop-t.offsetTop;this._stableElementFromBottom=n-i}return!0},getScrollBottom:function(){var t=this._target.scrollTop;return this._target.clientHeight+t},getBottomMostVisibleElement:function(){for(var t=this._target.scrollTop+this._target.clientHeight,e=this._childContainer.children,n=e.length-1;0<=n;n--){var i=e[n];if(i.offsetTop<t)return i}},getMostCenteredElement:function(){for(var t=this._target.scrollTop,e=this._target.clientHeight,n=t+e,i=this._childContainer.children,o=i.length-1;0<=o;o--){var r=i[o],a=e/2;if(n-r.offsetTop>a)return r}},scroll:function(t){this._target.scrollTop=t}},t}()},function(t,e,n){"use strict";var i=n(221),o=n(222);t.exports=function(t,e){return o(i,t,e)}},function(t,e,n){"use strict";t.exports={get:function(t,e){return t.get(e)},at:function(t,e){return t.at(e)},indexOf:function(t,e){return t.indexOf(e)}}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i,o=t.indexOf(e,n),r=o+1,a=[n];if(o<0)return a;if(!t.get(n,"burstStart"))for(o--,i=t.at(e,o);0<=o&&(a.unshift(i),!t.get(i,"burstStart"));)0<=--o&&(i=t.at(e,o));for(;r<e.length&&(i=t.at(e,r))&&!t.get(i,"burstStart");)a.push(i),r++;return a}},function(t,e,n){"use strict";var i=n(4),o=n(13),r=n(0),a=n(48),s=n(17),l=i.Behavior.extend({defaults:{scrollElementSelector:null,contentWrapper:null},initialize:function(){var t=this.options.scrollElementSelector,e=this.options.contentWrapper;this.queue=[],this.scrollElement=t?document.querySelector(t):this.view.el,this.wrapper=e?this.scrollElement.querySelector(e):null,this.listenTo(this.view,"render",this.decorateIfVisible),this.lazyDecorator=r.debounce(this.decorateIfVisible.bind(this),500),this.lazyDecoratorQueue=a.debounce(this.decorateQueue,this),this.lazyTracker=r.debounce(this.trackViewport.bind(this),500),this.lazyPointerEvents=r.debounce(this.enablePointerEvents.bind(this),250),this.scrollHandler=this.smoothScroll.bind(this),s.addEventListener(this.scrollElement,"scroll",this.scrollHandler)},decorateIfVisible:function(){this.view.children.each(function(t){this.isElementVisible(t.el)&&t.trigger("messageInViewport")}.bind(this))},onAddChild:function(t){this.queue.push(t),this.lazyDecoratorQueue()},decorateQueue:function(){var t=this.queue;this.queue=[],t.forEach(function(t){this.isElementVisible(t.el)&&t.trigger("messageInViewport")},this)},isElementVisible:function(t){var e=t.getBoundingClientRect();return 0<=e.bottom&&e.top<=(window.innerHeight||document.documentElement.clientHeight)},trackViewport:function(){this.view.triggerMethod("trackViewportCenter")},disablePointerEvents:function(){this.wrapper&&!this.wrapper.classList.contains("disable-hover")&&this.wrapper.classList.add("disable-hover")},enablePointerEvents:function(){this.wrapper&&this.wrapper.classList.remove("disable-hover")},smoothScroll:function(){this.disablePointerEvents(),this.lazyDecorator(),this.lazyTracker(),this.lazyPointerEvents()},onDestroy:function(){s.removeEventListener(this.scrollElement,"scroll",this.scrollHandler)}});o.register("SmoothScroll",l),t.exports=l},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){return"<div class=\"'chat-item__content'\">\n  Issue not found. It may not exist or you may not have access to it.\n</div>\n"},3:function(t,e,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div class="trpDisplayPicture--left avatar-s" style="background-image: url('+a(r(null!=(o=null!=t?t.author:t)?o.avatarUrl:o,t))+');"></div>\n<div class=\'chat-item__content\'>\n  <div class="chat-item__details">\n    <div class="chat-item__from">'+a(r(null!=(o=null!=t?t.author:t)?o.displayName:o,t))+'</div>\n    <div class="chat-chat-item__username">'+a(r(null!=(o=null!=t?t.author:t)?o.username:o,t))+"</div>\n  </div>\n"+(null!=(o=e.if.call(t,null!=t?t.bodyHtml:t,{name:"if",hash:{},fn:this.program(4,i,0),inverse:this.program(6,i,0),data:i}))?o:"")+"</div>\n"+(null!=(o=e.if.call(t,null!=t?t.assignee:t,{name:"if",hash:{},fn:this.program(8,i,0),inverse:this.noop,data:i}))?o:"")},4:function(t,e,n,i){var o,r;return'    <div class="chat-item__text">'+(null!=(o="function"==typeof(r=null!=(r=e.bodyHtml||(null!=t?t.bodyHtml:t))?r:e.helperMissing)?r.call(t,{name:"bodyHtml",hash:{},data:i}):r)?o:"")+"</div>\n"},6:function(t,e,n,i){return'    <div class="chat-item__text missing">No description given.</div>\n'},8:function(t,e,n,i){var o,r=this.lambda,a=this.escapeExpression;return'  <div style="float: right;\n  margin-top: 5px;\n  ">\n  <div class="trpDisplayPicture--left avatar-xxs" style="background-image: url('+a(r(null!=(o=null!=t?t.assignee:t)?o.avatarUrl:o,t))+');\n                                                         vertical-align: middle;\n                                                         margin-top: 0.25em;\n                                                         margin-right: 0.25em;"></div>\n    <span style="\n    font-size: smaller;\n    vertical-align: middle;\n    color: #AAA;\n    ">'+a(r(null!=(o=null!=t?t.assignee:t)?o.username:o,t))+" is assigned</span>\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o;return null!=(o=e.if.call(t,null!=t?t.error:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?o:""},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o;return": "+this.escapeExpression("function"==typeof(o=null!=(o=e.title||(null!=t?t.title:t))?o:e.helperMissing)?o.call(t,{name:"title",hash:{},data:i}):o)},3:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression;return'<span class="issuePopoverLabel issue '+a("function"==typeof(o=null!=(o=e.state||(null!=t?t.state:t))?o:r)?o.call(t,{name:"state",hash:{},data:i}):o)+'">'+a("function"==typeof(o=null!=(o=e.state||(null!=t?t.state:t))?o:r)?o.call(t,{name:"state",hash:{},data:i}):o)+"</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression;return'<a href="'+s("function"==typeof(r=null!=(r=e.html_url||(null!=t?t.html_url:t))?r:a)?r.call(t,{name:"html_url",hash:{},data:i}):r)+'" target="_blank">#'+s("function"==typeof(r=null!=(r=e.number||(null!=t?t.number:t))?r:a)?r.call(t,{name:"number",hash:{},data:i}):r)+(null!=(o=e.if.call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+"</a>\n"+(null!=(o=e.if.call(t,null!=t?t.state:t,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")},useData:!0})},function(t,e,n){"use strict";var h=n(10),d=n(5),r=n(1),a=n(8),p=n(32),s=n(253),l=n(254),m=n(151),f=n(15),g=n(4);t.exports=function(){var n=g.ItemView.extend({className:"commit-popover-body",template:s,modelEvents:{change:"render"},serializeData:function(){var t=this.model.toJSON();return t.author&&(t.date=f(t.commit.author.date).format("LLL"),t.files.forEach(function(t){40<t.filename.length&&(t.fullFilename=t.filename,t.filename=function(t){if(1===t.split("/").length)return t.substring(0,39)+"";for(var e=t;38<e.length;){var n=e.split("/");1===n.length?n[0]=n[0].substring(0,37)+"":n.shift(),e=n.join("/")}return"/"+e}(t.filename))}),1===t.files.length&&(t.isFileLengthSingular=!0,t.files[0].patch_html&&(t.firstPatchHtml=t.files[0].patch_html)),1===t.stats.additions&&(t.isAdditionsSingular=!0),1===t.stats.deletions&&(t.isDeletionsSingular=!0)),t}}),i=g.ItemView.extend({className:"commit-popover-title",modelEvents:{change:"render"},template:l,serializeData:function(){var t=this.model.toJSON();return t.shortSha=t.sha.substring(0,7),t}}),o=g.ItemView.extend({className:"commit-popover-footer",template:m,modelEvents:{change:"render"},events:{"click button.mention":"onMentionClick"},onMentionClick:function(){var t=this.model.get("repo")+"@"+this.model.get("sha").substring(0,7);r.trigger("input.append",t),this.parentPopover.hide()}});function c(t,e){return new p({titleView:new i({model:t}),view:new n({model:t}),footerView:new o({model:t}),targetElement:e,placement:"horizontal"})}function u(t,e,n){a.priv.get("/gh/repos/"+t+"/commits/"+e,{renderPatchIfSingle:!0}).then(function(t){n.set(t)}).catch(function(t){n.set("error",t.status)})}return{decorate:function(l){l.$el.find('*[data-link-type="commit"]').each(function(){function t(t){u(o,r,s);var e=c(s,t.target);e.show(),p.singleton(l,e)}function e(e){u(o,r,s),p.hoverTimeout(e,function(){var t=c(s,e.target);t.show(),p.singleton(l,t)})}var n=h(this),i=n.data("provider"),o=n.data("commitRepo"),r=n.data("commitSha");if(o&&r){var a="https://github.com/";"gitlab"===i&&(a="https://gitlab.com/");var s=new d.Model({repo:o,sha:r,html_url:a+o+"/commit/"+r});n.on("click",t),n.on("mouseover",e),l.once("destroy",function(){n.off("click",t),n.off("mouseover",e)})}})}}}()},function(t,e,n){"use strict";var s=n(2),l=n(60),c=n(28);t.exports={decorate:function(i){function e(t){var e=c.get(t.target,"screenName");if(e){var n=new l({username:e,targetElement:t.target});n.show(),l.singleton(i,n)}}function t(t){l.hoverTimeout(t,function(){e(t)})}var n,o,r,a=i.$el.find(".mention");a.on("click",e),a.on("mouseover",t),i.once("destroy",function(){a.off("click",e),a.off("mouseover",t)}),o=(n=i).model.get("mentions"),r=s.user(),o&&r&&s.user().get("username")&&o.some(function(t){return t.userId===s.getUserId()})&&n.$el.find(".trpChatBox").addClass("mention")}}},function(t,e,n){"use strict";var i=n(138),o=n(139),r=n(10),a=n(12),s="undefined"!=typeof window;s&&n(49);var l=function(){function t(){i(this,t)}return o(t,[{key:"decorate",value:function(t){if(s){var e=r(t.$el).find(".link-tooltip");Object.values(e).forEach(function(t){t.href&&r(t).tooltip({title:t.href,placement:"top",container:"body"})})}else a.warn("decoration only takes place on the client-side")}}]),t}();t.exports=new l},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return'<button class="chat-header__left-menu-toggle js-header-view-left-menu-toggle">\n  <svg class="chat-header__action-icon" viewBox="0 0 26 22">\n    <path d="M0,2 l26,0" />\n    <path d="M0,11 l26,0" />\n    <path d="M0,20 l26,0" />\n  </svg>\n</button>\n'},useData:!0})},,,,,function(t,e,n){var p=n(21),r=n(10);r.easing.jswing=r.easing.swing,r.extend(r.easing,{def:"easeOutQuad",swing:function(t,e,n,i,o){return r.easing[r.easing.def](t,e,n,i,o)},easeInQuad:function(t,e,n,i,o){return i*(e/=o)*e+n},easeOutQuad:function(t,e,n,i,o){return-i*(e/=o)*(e-2)+n},easeInOutQuad:function(t,e,n,i,o){return(e/=o/2)<1?i/2*e*e+n:-i/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,i,o){return i*(e/=o)*e*e+n},easeOutCubic:function(t,e,n,i,o){return i*((e=e/o-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,i,o){return(e/=o/2)<1?i/2*e*e*e+n:i/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,i,o){return i*(e/=o)*e*e*e+n},easeOutQuart:function(t,e,n,i,o){return-i*((e=e/o-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,i,o){return(e/=o/2)<1?i/2*e*e*e*e+n:-i/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,i,o){return i*(e/=o)*e*e*e*e+n},easeOutQuint:function(t,e,n,i,o){return i*((e=e/o-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,i,o){return(e/=o/2)<1?i/2*e*e*e*e*e+n:i/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,i,o){return-i*Math.cos(e/o*(Math.PI/2))+i+n},easeOutSine:function(t,e,n,i,o){return i*Math.sin(e/o*(Math.PI/2))+n},easeInOutSine:function(t,e,n,i,o){return-i/2*(Math.cos(Math.PI*e/o)-1)+n},easeInExpo:function(t,e,n,i,o){return 0==e?n:i*Math.pow(2,10*(e/o-1))+n},easeOutExpo:function(t,e,n,i,o){return e==o?n+i:i*(1-Math.pow(2,-10*e/o))+n},easeInOutExpo:function(t,e,n,i,o){return 0==e?n:e==o?n+i:(e/=o/2)<1?i/2*Math.pow(2,10*(e-1))+n:i/2*(2-Math.pow(2,-10*--e))+n},easeInCirc:function(t,e,n,i,o){return-i*(Math.sqrt(1-(e/=o)*e)-1)+n},easeOutCirc:function(t,e,n,i,o){return i*Math.sqrt(1-(e=e/o-1)*e)+n},easeInOutCirc:function(t,e,n,i,o){return(e/=o/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+n:i/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(t,e,n,i,o){var r=1.70158,a=0,s=i;return 0==e?n:1==(e/=o)?n+i:(a||(a=.3*o),s<Math.abs(i)?(s=i,r=a/4):r=a/(2*Math.PI)*Math.asin(i/s),-s*Math.pow(2,10*(e-=1))*Math.sin((e*o-r)*(2*Math.PI)/a)+n)},easeOutElastic:function(t,e,n,i,o){var r=1.70158,a=0,s=i;return 0==e?n:1==(e/=o)?n+i:(a||(a=.3*o),s<Math.abs(i)?(s=i,r=a/4):r=a/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*e)*Math.sin((e*o-r)*(2*Math.PI)/a)+i+n)},easeInOutElastic:function(t,e,n,i,o){var r=1.70158,a=0,s=i;return 0==e?n:2==(e/=o/2)?n+i:(a||(a=o*(.3*1.5)),s<Math.abs(i)?(s=i,r=a/4):r=a/(2*Math.PI)*Math.asin(i/s),e<1?s*Math.pow(2,10*(e-=1))*Math.sin((e*o-r)*(2*Math.PI)/a)*-.5+n:s*Math.pow(2,-10*(e-=1))*Math.sin((e*o-r)*(2*Math.PI)/a)*.5+i+n)},easeInBack:function(t,e,n,i,o,r){return null==r&&(r=1.70158),i*(e/=o)*e*((r+1)*e-r)+n},easeOutBack:function(t,e,n,i,o,r){return null==r&&(r=1.70158),i*((e=e/o-1)*e*((r+1)*e+r)+1)+n},easeInOutBack:function(t,e,n,i,o,r){return null==r&&(r=1.70158),(e/=o/2)<1?i/2*(e*e*((1+(r*=1.525))*e-r))+n:i/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+n},easeInBounce:function(t,e,n,i,o){return i-r.easing.easeOutBounce(t,o-e,0,i,o)+n},easeOutBounce:function(t,e,n,i,o){return(e/=o)<1/2.75?i*(7.5625*e*e)+n:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+n:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+n:i*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(t,e,n,i,o){return e<o/2?.5*r.easing.easeInBounce(t,2*e,0,i,o)+n:.5*r.easing.easeOutBounce(t,2*e-o,0,i,o)+.5*i+n}}),function(x){function k(){}function T(t){I=[t]}function C(t,e,n){return t&&t.apply(e.context||e,n)}function E(t){return/\?/.test(t)?"&":"?"}var I,S=window,M=x.Deferred,A=x("head")[0]||document.documentElement,R={},L=0,B={callback:"_jqjsp",url:location.href},D=S.opera,O=!!x("<div>").html("\x3c!--[if IE]><i><![endif]--\x3e").find("i").length;function t(e){var t,n,i,o,r,a=(e=x.extend({},B,e)).success,s=e.error,l=e.complete,c=e.dataFilter,u=e.callbackParameter,h=e.callback,d=e.cache,p=e.pageCache,m=e.charset,f=e.url,g=e.data,v=e.timeout,_=0,b=k;if(M&&M(function(t){t.done(a).fail(s),a=t.resolve,s=t.reject}).promise(e),!(e.abort=function(){!_++&&b()})===C(e.beforeSend,e,[e])||_)return e;function w(t){_++||(b(),p&&(R[f]={s:[t]}),c&&(t=c.apply(e,[t])),C(a,e,[t,"success",e]),C(l,e,[e,"success"]))}function y(t){_++||(b(),p&&"timeout"!=t&&(R[f]=t),C(s,e,[e,t]),C(l,e,[e,t]))}return f=f||"",g=g?"string"==typeof g?g:x.param(g,e.traditional):"",f+=g?E(f)+g:"",u&&(f+=E(f)+encodeURIComponent(u)+"=?"),!d&&!p&&(f+=E(f)+"_"+(new Date).getTime()+"="),f=f.replace(/=\?(&|$)/,"="+h+"$1"),p&&(t=R[f])?t.s?w(t.s[0]):y(t):(S[h]=T,(i=x("<script>")[0]).id="_jqjsp"+L++,m&&(i.charset=m),D&&D.version()<11.6?(o=x("<script>")[0]).text="document.getElementById('"+i.id+"').onerror()":i.async="async",O&&(i.htmlFor=i.id,i.event="onclick"),i.onload=i.onerror=i.onreadystatechange=function(t){if(!i.readyState||!/i/.test(i.readyState)){try{i.onclick&&i.onclick()}catch(t){}t=I,I=0,t?w(t[0]):y("error")}},i.src=f,b=function(t){r&&clearTimeout(r),i.onreadystatechange=i.onload=i.onerror=null,A.removeChild(i),o&&A.removeChild(o)},A.insertBefore(i,n=A.firstChild),o&&A.insertBefore(o,n),r=0<v&&setTimeout(function(){y("timeout")},v)),e}t.setup=function(t){x.extend(B,t)},x.jsonp=t}(r),function(n){n.tools=n.tools||{version:"2013-02-15"};var i,o,r,a,s,l=n.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",zIndex:9998,opacity:.8,startOpacity:0,color:"#fff"}};n.mask={load:function(t,e){return r||(t=t||a,a=t=n.extend(n.extend({},l.conf),t),(i=n("#"+t.maskId)).length||(i=n("<div/>").attr("id",t.maskId),n("body").append(i)),i.css({position:"fixed",top:0,left:0,width:"100%",height:"100%",display:"block",opacity:t.opacity,zIndex:t.zIndex,backgroundColor:t.color}),e&&e.length&&(s=e.eq(0).css("zIndex"),o=e.css({zIndex:Math.max(t.zIndex+1,"auto"==s?0:s)})),r=!0),this},close:function(){return r&&(i.fadeOut(a.closeSpeed,function(){o&&o.css({zIndex:s})}),r=!1),this}},n.fn.mask=function(t){return n.mask.load(t),this},n.fn.expose=function(t){return n.mask.load(t,this),this}}(r),function(m){var f="https:"==document.location.protocol?"https://":"http://",c=f+"api2.transloadit.com/",i={service:c,assets:f+"assets.transloadit.com/",beforeStart:function(){return!0},onFileSelect:function(){},onStart:function(){},onProgress:function(){},onUpload:function(){},onResult:function(){},onCancel:function(){},onError:function(){},onSuccess:function(){},interval:2500,pollTimeout:8e3,poll404Retries:15,pollConnectionRetries:5,wait:!1,processZeroFiles:!0,triggerUploadOnFileSelection:!1,autoSubmit:!0,modal:!0,exclude:"",fields:!1,params:null,signature:null,region:"us-east-1",debug:!0,locale:"en"},r={en:{"errors.BORED_INSTANCE_ERROR":"Could not find a bored instance.","errors.CONNECTION_ERROR":"There was a problem connecting to the upload server","errors.unknown":"There was an internal error.","errors.tryAgain":"Please try your upload again.","errors.troubleshootDetails":"If you would like our help to troubleshoot this, please email us this information:",cancel:"Cancel",details:"Details",startingUpload:"Starting upload ...",processingFiles:"Upload done, now processing files ...",uploadProgress:"%s / %s MB at %s kB/s | %s left"},ja:{"errors.BORED_INSTANCE_ERROR":"","errors.CONNECTION_ERROR":"","errors.unknown":"","errors.tryAgain":"","errors.troubleshootDetails":" :",cancel:"",details:"",startingUpload:" ...",processingFiles:"",uploadProgress:"%s MB / %s MB (%s kB / )"}},t=!1;function o(){this.assemblyId=null,this.instance=null,this.documentTitle=null,this.timer=null,this._options={},this.uploads=[],this.results={},this.ended=null,this.pollStarted=null,this.pollRetries=0,this.started=!1,this.assembly=null,this.params=null,this.bytesReceivedBefore=0,this.lastPoll=0,this.$params=null,this.$form=null,this.$files=null,this.$fileClones=null,this.$iframe=null,this.$modal=null,this._lastMSecs=0,this._lastNSecs=0,this._clockseq=0,this._animatedTo100=!1,this._uploadFileIds=[],this._resultFileIds=[]}m.fn.transloadit=function(){var t,e,n,i=Array.prototype.slice.call(arguments);if(0!==this.length){if(!(1<this.length)){if((1==i.length&&"object"==p(i[0])||void 0===i[0])&&i.unshift("init"),"init"==(t=i.shift())?(e=new o,i.unshift(this),this.data("transloadit.uploader",e)):e=this.data("transloadit.uploader"),!e)throw new Error("Element is not initialized for transloadit!");return void 0===(n=e[t].apply(e,i))?this:n}this.each(function(){m.fn.transloadit.apply(m(this),i)})}},m.fn.transloadit.i18n=r,o.prototype.init=function(t,e){this.$form=t,this.options(m.extend({},i,e||{}));var n=this;t.bind("submit.transloadit",function(){return n.validate(),n.detectFileInputs(),n._options.processZeroFiles||0!==n.$files.length?n._options.beforeStart()&&n.getBoredInstance():n._options.beforeStart()&&n.submitForm(),!1}),this._options.triggerUploadOnFileSelection&&t.on("change",'input[type="file"]',function(){t.trigger("submit.transloadit")}),t.on("change",'input[type="file"]',function(){n._options.onFileSelect(m(this).val(),m(this))}),this.includeCss()},o.prototype.getBoredInstance=function(){var a=this;this.instance=null;var s=this._options.service+"instances/bored",l=!0;!function r(){m.jsonp({url:s,timeout:a._options.pollTimeout,callbackParameter:"callback",success:function(t){if(t.error)return a.ended=!0,t.url=s,a.renderError(t),void a._options.onError(t);a.instance=t.api2_host,a.start()},error:function(t,e,n){if(l&&a._options.service===c)return l=!1,void a._findBoredInstanceUrl(function(t,e){if(t)return a.ended=!0,t={error:"BORED_INSTANCE_ERROR",message:a.i18n("errors.BORED_INSTANCE_ERROR")+" "+t.message},a.renderError(t),void a._options.onError(t);s=f+"api2."+e+"/instances/bored",r()});a.ended=!0;var i="JSONP bored instance request status: "+e;i+=", err: "+n;var o={error:"CONNECTION_ERROR",message:a.i18n("errors.CONNECTION_ERROR"),reason:i,url:s};a.renderError(o),a._options.onError(o)}})}(),this._options.modal&&this.showModal()},o.prototype._findBoredInstanceUrl=function(i){var n=this,t=this._options.region,e="s3";"us-east-1"!==t&&(e="s3-"+t);var o=f+e+".amazonaws.com/infra-"+t;o+=".transloadit.com/cached_instances.json",m.ajax({url:o,datatype:"json",timeout:5e3,success:function(t){var e=n._shuffle(t.uploaders);n._findResponsiveInstance(e,0,i)},error:function(t,e){var n=new Error("Could not query S3 for cached uploaders from url: "+o);i(n)}})},o.prototype._findResponsiveInstance=function(n,i,o){if(!n[i]){var t=new Error("No responsive uploaders");return o(t)}var r=this,e=n[i];m.jsonp({url:f+e,timeout:3e3,callbackParameter:"callback",success:function(t){o(null,e)},error:function(t,e){r._findResponsiveInstance(n,i+1,o)}})},o.prototype._shuffle=function(t){for(var e,n=[],i=0;i<t.length;i++)e=Math.floor(Math.random()*(i+1)),n[i]=n[e],n[e]=t[i];return n},o.prototype.start=function(){var e=this;this.started=!1,this.ended=!1,this.bytesReceivedBefore=0,this.pollRetries=0,this.uploads=[],this._animatedTo100=!1,this._uploadFileIds=[],this._resultFileIds=[],this.results={},this.assemblyId=this._genUuid(),this.$fileClones=m().not(document),this.$files.each(function(){var t=m(this).clone(!0);e.$fileClones=e.$fileClones.add(t),t.insertAfter(this)}),this.$iframe=m('<iframe id="transloadit-'+this.assemblyId+'" name="transloadit-'+this.assemblyId+'"/>').appendTo("body").hide();var t=f+this.instance+"/assemblies/"+this.assemblyId+"?redirect=false";if(this._options.formData){var n=this.$form.find("input[name=params]").val();if(this._options.formData instanceof FormData)this._options.formData.append("params",n);else{var i=new FormData(this.$form);i.append("params",n);for(var o=0;o<this._options.formData.length;o++){var r=this._options.formData[o];i.append(r[0],r[1],r[2])}this._options.formData=i}var a=new XMLHttpRequest;a.open("POST",t),a.send(this._options.formData)}else{this.$uploadForm=m('<form enctype="multipart/form-data" />').attr("action",t).attr("target","transloadit-"+this.assemblyId).attr("method","POST").append(this.$files).appendTo("body").hide();var s="[name=params], [name=signature]";!0===this._options.fields?s="*":"string"==typeof this._options.fields&&(s+=", "+this._options.fields);var l=this.$form.find(":input[type!=file]").filter(s),c=l.filter("select");l=(l=l.filter(function(){return!m(this).is("select")})).filter("[type!=submit]");var u=this.clone(l);if(this._options.params&&!this.$params&&(u=u.add('<input name="params" value=\''+JSON.stringify(this._options.params)+"'>")),this._options.signature&&(u=u.add('<input name="signature" value=\''+this._options.signature+"'>")),"object"==p(this._options.fields))for(var h in this._options.fields){var d=this._options.fields[h];u=u.add('<input name="'+h+"\" value='"+d+"'>")}u.prependTo(this.$uploadForm),c.each(function(){m('<input type="hidden"/>').attr("name",m(this).attr("name")).attr("value",m(this).val()).prependTo(e.$uploadForm)}),this.$uploadForm.submit()}this.lastPoll=+new Date,setTimeout(function(){e._poll()},300)},o.prototype.clone=function(t){for(var e=t.clone(),n=t.filter("textarea"),i=e.filter("textarea"),o=0;o<n.length;++o)m(i[o]).val(m(n[o]).val());return e},o.prototype.detectFileInputs=function(){var t=this.$form.find("input[type=file]").not(this._options.exclude);this._options.processZeroFiles||(t=t.filter(function(){return""!==this.value})),this.$files=t},o.prototype.validate=function(){if(this._options.params)this.params=this._options.params;else{var t=this.$form.find("input[name=params]");if(!t.length)return void alert("Could not find input[name=params] in your form.");this.$params=t;try{this.params=JSON.parse(t.val())}catch(t){return void alert("Error: input[name=params] seems to contain invalid JSON.")}}if(this.params.redirect_url)this.$form.attr("action",this.params.redirect_url);else if(this._options.autoSubmit&&this.$form.attr("action")==this._options.service+"assemblies")return void alert("Error: input[name=params] does not include a redirect_url")},o.prototype._poll=function(t){var p=this;if(!this.ended){var e=/(mozilla)(?:.*? rv:([\w.]+))?/.exec(navigator.userAgent),n=e&&e[1];this.documentTitle=document.title,n&&!this.documentTitle&&(document.title="Loading..."),this.pollStarted=+new Date;var i="status-"+this.instance,r=f+i+"/assemblies/"+this.assemblyId;t&&(r+=t),m.jsonp({url:r,timeout:p._options.pollTimeout,callbackParameter:"callback",success:function(t){if(!p.ended){if("ASSEMBLY_NOT_FOUND"==(p.assembly=t).error)return p.pollRetries++,p.pollRetries>p._options.poll404Retries?(document.title=p.documentTitle,p.ended=!0,p.renderError(t),void p._options.onError(t)):void setTimeout(function(){p._poll()},400);if(t.error)return p.ended=!0,p.renderError(t),document.title=p.documentTitle,void p._options.onError(t);!p.started&&0<t.bytes_expected&&(p.started=!0,p._options.onStart(t)),p.pollRetries=0,t.ok;var e="ASSEMBLY_EXECUTING"===t.ok,n="ASSEMBLY_CANCELED"===t.ok,i="ASSEMBLY_COMPLETED"===t.ok;0<t.bytes_expected&&p._options.onProgress(t.bytes_received,t.bytes_expected,t);for(var o=0;o<t.uploads.length;o++){var r=t.uploads[o];-1===m.inArray(r.id,p._uploadFileIds)&&(p._options.onUpload(r,t),p.uploads.push(r),p._uploadFileIds.push(r.id))}for(var a in t.results){p.results[a]=p.results[a]||[];for(var s=0;s<t.results[a].length;s++){var l=t.results[a][s],c=a+"_"+l.id;-1===m.inArray(c,p._resultFileIds)&&(p._options.onResult(a,l,t),p.results[a].push(l),p._resultFileIds.push(c))}}if(n)return p.ended=!0,document.title=p.documentTitle,void p._options.onCancel(t);var u=i||!p._options.wait&&e;if(0<t.bytes_expected&&p.renderProgress(t,u,p._options.wait),u)return p.ended=!0,document.title=p.documentTitle,t.uploads=p.uploads,t.results=p.results,p._options.onSuccess(t),void setTimeout(function(){p._options.modal&&p.cancel(),p.submitForm()},600);var h=p.pollStarted-+new Date,d=h<p._options.interval?p._options.interval:h;p.timer=setTimeout(function(){p._poll()},d),p.lastPoll=+new Date}},error:function(t,e,n){if(!p.ended){if(p.pollRetries++,p.pollRetries>p._options.pollConnectionRetries){document.title=p.documentTitle,p.ended=!0;var i="JSONP status poll request status: "+e;i+=", err: "+n;var o={error:"CONNECTION_ERROR",message:p.i18n("errors.CONNECTION_ERROR"),reason:i,url:r};return p.renderError(o),void p._options.onError(o)}setTimeout(function(){p._poll()},350)}}})}},o.prototype.stop=function(){document.title=this.documentTitle,this.ended=!0},o.prototype.cancel=function(){if(!this.ended){var i=this;this.$params&&this.$params.prependTo(this.$form),this.$fileClones.each(function(t){var e=m(i.$files[t]).clone(!0),n=m(this);e.insertAfter(n),n.remove()}),clearTimeout(i.timer),this._poll("?method=delete"),"Microsoft Internet Explorer"==navigator.appName&&this.$iframe[0].contentWindow.document.execCommand("Stop"),setTimeout(function(){i.$iframe.remove()},500)}this._options.modal&&this.hideModal()},o.prototype.submitForm=function(){"multipart/form-data"===this.$form.attr("enctype")&&this.$form.removeAttr("enctype"),null!==this.assembly&&m("<textarea/>").attr("name","transloadit").text(JSON.stringify(this.assembly)).prependTo(this.$form).hide(),this._options.autoSubmit&&this.$form.unbind("submit.transloadit").submit()},o.prototype.hideModal=function(){m.mask.close(),this.$modal.remove()},o.prototype.showModal=function(){this.$modal=m('<div id="transloadit"><div class="content"><a href="#close" class="close">'+this.i18n("cancel")+'</a><p class="status"></p><div class="progress progress-striped"><div class="bar"><span class="percent"></span></div></div><label>'+this.i18n("startingUpload")+'</label><p class="error"></p><div class="error-details-toggle"><a href="#">'+this.i18n("details")+'</a></div><p class="error-details"></p></div></div>').appendTo("body"),m.extend(this.$modal,{$content:this.$modal.find(".content"),$close:this.$modal.find(".close"),$label:this.$modal.find("label"),$progress:this.$modal.find(".progress"),$percent:this.$modal.find(".progress .percent"),$progressBar:this.$modal.find(".progress .bar"),$error:this.$modal.find(".error"),$errorDetails:this.$modal.find(".error-details"),$errorDetailsToggle:this.$modal.find(".error-details-toggle")});var t=this;this.$modal.$error.hide(),this.$modal.$errorDetails.hide(),this.$modal.$errorDetailsToggle.hide(),this.$modal.expose({api:!0,maskId:"transloadit_expose",opacity:.9,loadSpeed:250,closeOnEsc:!1,closeOnClick:!1}),this.$modal.$close.click(function(){return t.cancel(),!1})},o.prototype.renderError=function(o){if(this._options.modal){if(!this._options.debug)return this.cancel();this.$modal.$content.addClass("content-error"),this.$modal.$progress.hide(),this.$modal.$label.hide();var r=o.error+": "+o.message+"<br /><br />";if(r+=o.reason||"",-1!==m.inArray(o.error,["CONNECTION_ERROR","BORED_INSTANCE_ERROR","ASSEMBLY_NOT_FOUND"])){var t=this.i18n("errors.unknown")+"<br/>"+this.i18n("errors.tryAgain");this.$modal.$error.html(t).show();var a=o.assemblyId?o.assemblyId:this.assemblyId,s=this,l=null;m.getJSON(f+"jsonip.com/",function(t){l=t.ip}).always(function(){var t={endpoint:o.url,instance:s.instance,assembly_id:a,ip:l,time:s.getUTCDatetime(),agent:navigator.userAgent,poll_retries:s.pollRetries,error:r};m.post(f+"status.transloadit.com/client_error",t);var e=[];for(var n in t)e.push(n+": "+t[n]);var i=s.i18n("errors.troubleshootDetails")+"<br /><br />";s.$modal.$errorDetails.hide().html(i+e.join("<br />")),s.$modal.$errorDetailsToggle.show().find("a").off("click").on("click",function(t){t.preventDefault(),s.$modal.$errorDetails.toggle()})})}else this.$modal.$error.html(r).show()}},o.prototype.renderProgress=function(t,e,n){if(this._options.modal){var i=t.bytes_received/t.bytes_expected*100;100<i&&(i=0);var o=t.bytes_received-this.bytesReceivedBefore,r=+new Date-this.lastPoll,a=100===i?1e3:2*this._options.interval,s=(t.bytes_received/1024/1024).toFixed(2),l=(t.bytes_expected/1024/1024).toFixed(2),c=(o/1024/(r/1e3)).toFixed(1),u=t.bytes_expected-t.bytes_received,h=(o/(r/1e3)).toFixed(1),d="";0<h&&(d=this._duration(u/h)),txt=this.i18n("uploadProgress",s,l,c,d),this._animatedTo100||this.$modal.$label.text(txt);var p=parseInt(this.$modal.$progress.css("width"),10);if(this.bytesReceivedBefore=t.bytes_received,!(o<=0)||e){var m=this;e&&n&&(a=500),this.$modal.$progressBar.stop().animate({width:i+"%"},{duration:a,easing:"linear",progress:function(t,e,n){var i=(100*parseInt(m.$modal.$progressBar.css("width"),10)/p).toFixed(0);100<i&&(i=100),13<i&&!m._animatedTo100&&m.$modal.$percent.text(i+"%"),100!=i||m._animatedTo100||(m._animatedTo100=!0,setTimeout(function(){m.$modal.$label.text(m.i18n("processingFiles")),m.$modal.$progress.addClass("active"),m.$modal.$percent.text("")},500))}})}}},o.prototype.includeCss=function(){!t&&this._options.modal&&(t=!0,m('<link rel="stylesheet" type="text/css" href="'+this._options.assets+'css/transloadit2-latest.css" />').appendTo("head"))},o.prototype.getUTCDatetime=function(){var t=new Date,e=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()),n=function(t){return t<10?"0"+t:t},i=e.getTimezoneOffset(),o=(0<i?"-":"+")+n(parseInt(i/60,10));return i%60!=0&&(o+=n(i%60)),0===i&&(o="Z"),e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getDate())+"T"+n(e.getHours())+":"+n(e.getMinutes())+":"+n(e.getSeconds())+o},o.prototype._duration=function(t){var e=Math.floor(t/3600);t-=3600*e;var n=Math.floor(t/60),i="";return 0<e&&(i+=e+"h "),0<n&&(i+=n+"min "),0<(t-=60*n)&&(i+=(t=t.toFixed(0))+"s"),""===i&&(i="0s"),i},o.prototype._genUuid=function(t,e,n){t=t||{};var i=e&&n||0,o=e||[],r=new Array(16),a=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}(),s=[1|a[0],a[1],a[2],a[3],a[4],a[5]];this._clockseq=16383&(a[6]<<8|a[7]);for(var l=null!=t.clockseq?t.clockseq:this._clockseq,c=[],u={},h=0;h<256;h++)c[h]=(h+256).toString(16).substr(1),u[c[h]]=h;var d=null!=t.msecs?t.msecs:(new Date).getTime(),p=null!=t.nsecs?t.nsecs:this._lastNSecs+1,m=d-this._lastMSecs+(p-this._lastNSecs)/1e4;if(m<0&&null==t.clockseq&&(l=l+1&16383),(m<0||d>this._lastMSecs)&&null==t.nsecs&&(p=0),1e4<=p)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");this._lastMSecs=d,this._lastNSecs=p,this._clockseq=l;var f=(1e4*(268435455&(d+=122192928e5))+p)%4294967296;o[i++]=f>>>24&255,o[i++]=f>>>16&255,o[i++]=f>>>8&255,o[i++]=255&f;var g,v,_,b=d/4294967296*1e4&268435455;o[i++]=b>>>8&255,o[i++]=255&b,o[i++]=b>>>24&15|16,o[i++]=b>>>16&255,o[i++]=l>>>8|128,o[i++]=255&l;for(var w=t.node||s,y=0;y<6;y++)o[i+y]=w[y];return e||(v=0,(_=c)[(g=o)[v++]]+_[g[v++]]+_[g[v++]]+_[g[v++]]+_[g[v++]]+_[g[v++]]+_[g[v++]]+_[g[v++]]+_[g[v++]]+_[g[v++]]+_[g[v++]]+_[g[v++]]+_[g[v++]]+_[g[v++]]+_[g[v++]]+_[g[v++]])},o.prototype.options=function(t){if(0===arguments.length)return this._options;m.extend(this._options,t)},o.prototype.option=function(t,e){if(1==arguments.length)return this._options[t];this._options[t]=e},o.prototype.i18n=function(){var o,t=Array.prototype.slice.call(arguments),e=t.shift(),n=this._options.locale,i=r[n]&&r[n][e]||r.en[e];if(!i)throw new Error("Unknown i18n key: "+e);return o=(o=t)||[],i.replace(/(%[s])/g,function(t,e,n){var i=o.shift();return i||0===i?i+"":""})}}(r)},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o;return" "+this.escapeExpression("function"==typeof(o=null!=(o=e.modalClassVariation||(null!=t?t.modalClassVariation:t))?o:e.helperMissing)?o.call(t,{name:"modalClassVariation",hash:{},data:i}):o)},3:function(t,e,n,i){return" modal--default__empty-header"},5:function(t,e,n,i){var o;return'    <h1 class="modal--default__header__title js-modal-title-text">'+this.escapeExpression("function"==typeof(o=null!=(o=e.title||(null!=t?t.title:t))?o:e.helperMissing)?o.call(t,{name:"title",hash:{},data:i}):o)+"</h1>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o;return'<div class="modal--default'+(null!=(o=e.if.call(t,null!=t?t.modalClassVariation:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'">\n\n  <header class="modal--default__header'+(null!=(o=e.unless.call(t,null!=t?t.title:t,{name:"unless",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+'">\n'+(null!=(o=e.if.call(t,null!=t?t.title:t,{name:"if",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")+'    <span class="modal--default__header__icon icon-cancel-circle" data-action="close"></span>\n  </header>\n\n  <section class="modal--default__content" id="modal-body-region"></section>\n\n  <footer class="modal--default__footer-wrapper" id="modal-footer-region"></footer>\n\n</div>\n'},useData:!0})},function(t,e,n){"use strict";var i=n(4),r=n(178),o=n(237),a=i.ItemView.extend({template:o,tagName:"button",attributes:function(){var t={"data-action":this.model.get("action"),"data-component":"modal-btn"},e=this.model.get("disabled");e&&(t.disabled=e);var n=this.model.get("className"),i=this.model.get("pull"),o={};return o[n]=!0,o["pull-"+i]=!!i,t.class=r(o),t},triggers:{click:"item:activate"}}),s=i.CollectionView.extend({template:"",childView:a,className:"modal--default__footer",childEvents:{"item:activate":"onItemActivated"},initialize:function(t){this.communityCreateModel=t.communityCreateModel},onItemActivated:function(t){this.trigger("item:activate",t.model)}});t.exports=s},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return this.escapeExpression(this.lambda(null!=t?t.text:t,t))+"\n"},useData:!0})},function(t,e,n){"use strict";var i,o,r,a,s=n(10),l=n(0),c=n(4),u=n(35),h=n(74),d=n(239),p=n(240),m=n(28);t.exports=(i=c.ItemView.extend({tagName:"li",template:p,initialize:function(t){t&&t.template&&(this.template=t.template),t&&t.serializeData&&(this.serializeData=t.serializeData)},className:function(){return this.model.get("divider")?"divider":""},onRender:function(){var e=this.model.get("dataset");if(e){var n=this.el.querySelector("a");n&&Object.keys(e).forEach(function(t){m.set(n,t,e[t])})}m.set(this.el,"cid",this.model.cid)}}),o=null,r={placement:"left"},a=c.CollectionView.extend({childView:i,tagName:"ul",className:"dropdown dropdown-hidden selectable",ui:{menu:"ul.dropdown"},events:{keydown:"keydown","click li a":"clicked"},childViewOptions:function(){var t={};return this.options.itemTemplate&&(t.template=this.options.itemTemplate),this.options.itemSerializeData&&(t.serializeData=this.options.itemSerializeData),t},initialize:function(t){t.targetElement&&this.setTargetElement(t.targetElement),this.options=l.extend({},r,t),this.dropdownClass=t.dropdownClass,this.listenTo(this,"selectClicked",function(){this.hide()})},setTargetElement:function(t){this.targetElement=t,this.$targetElement=s(t)},active:function(){return!this.$el.hasClass("dropdown-hidden")},onRender:function(){var t=function(t){for(var e=0;t&&t!=document;){var n=window.getComputedStyle(t,null);if(n){var i=n.getPropertyValue("z-index");i&&"auto"!==i&&(i=parseInt(i,10))>e&&(e=i)}t=t.parentNode}return e}(this.targetElement)+5;t<100&&(t=100),this.el.style.zIndex=t,this.dropdownClass&&this.el.classList.add(this.dropdownClass)},onDestroy:function(){this.mutant&&this.mutant.disconnect(),s(".dropdown-backdrop").off(this.backdropClickedCallback)},clicked:function(){this.collection||this.hide()},backdropClickedCallback:function(){if(s(".dropdown-backdrop").remove(),o){var t=o;o=null,t.hide()}},getPosition:function(){var t=this.targetElement,n={};return l.forIn(t.getBoundingClientRect(),function(t,e){return n[e]=t}),l.forIn(this.$targetElement.offset(),function(t,e){return n[e]=t}),n},hasItems:function(){return!this.collection||0<this.collection.length},onAddChild:function(){setTimeout(function(){!this.active()&&this.showWhenItems&&this.hasItems()&&this.show()}.bind(this),10)},onRemoveChild:function(){setTimeout(function(){this.hasItems()||(this.hide(),this.showWhenItems=!0)}.bind(this),10)},show:function(){if(!this.active())if(this.hasItems()){var t=this.render().$el,e=this.el;window.clearTimeout(this.hideTimeoutId),s(".dropdown-backdrop").remove(),o&&o.hide(),o=this;var n=parseInt(this.el.style.zIndex,10);s('<div class="dropdown-backdrop '+this.options.backdropClass+'"/>').css({zIndex:n-1}).insertAfter(s("body")).on("click",this.backdropClickedCallback),this.setActive(this.selectedModel),t.detach().css({top:0,left:0,display:"block"}),t.appendTo(s("body")),this.reposition(),t.removeClass("dropdown-hidden"),this.mutant||(this.mutant=new h(e,this.mutationReposition,{scope:this,timeout:20,transitions:!0,observers:{attributes:!0,characterData:!0}}))}else this.showWhenItems=!0},hide:function(){var t=this.$el;this.showWhenItems=!1,this.active()&&(t.addClass("dropdown-hidden"),s(".dropdown-backdrop").remove(),this.hideTimeoutId=window.setTimeout(function(){t.css({display:"none"})},160),o=null)},mutationReposition:function(){try{if(!this.active())return;this.reposition()}finally{this.mutant&&this.mutant.takeRecords()}},reposition:function(){var t,e=this.el,n=this.getPosition(),i=e.offsetWidth;t="left"===this.options.placement?n.left:n.left-i+n.width;var o={top:n.top+n.height,left:t};this.applyPlacement(o)},applyPlacement:function(t){var e=this.$el;"left"in t&&t.left<0&&(t.left=0),e.css(t)},toggle:function(){this.active()?this.hide():this.show()},keydown:function(t){switch(t.keyCode){case 13:return void this.selected();case 27:this.hide();break;default:return}t.preventDefault(),t.stopPropagation()}}),u.mixin(a,d),a)},function(t,e,n){"use strict";var o=n(28);t.exports=function(){function r(t){return t.$childViewContainer?t.$childViewContainer:t.$el}return{events:{keydown:"selectKeydown","mouseover li:not(.divider):visible":"selectMouseOver","click li":"selectClicked"},selectMouseOver:function(t){var e=r(this).find("li:not(.divider):visible");if(e.length){var n=e.filter(".active"),i=t.currentTarget;n[0]!==i&&(n.removeClass("active"),i.classList.add("active"))}},selectKeydown:function(t){switch(t.keyCode){case 13:return void this.simulateClick();case 38:this.selectPrev();break;case 40:this.selectNext();break;default:return}t.preventDefault(),t.stopPropagation()},selectPrev:function(){this._moveSelect(-1)},selectNext:function(){this._moveSelect(1)},simulateClick:function(){var t=r(this),e=t.find("li:not(.divider):visible.active").first();e.length?e.trigger("click"):(this._moveSelect(0),t.find("li:not(.divider):visible.active").first().trigger("click"))},selectActive:function(){this.simulateClick()},selectClicked:function(t){if(this.collection){var e=t.currentTarget,n=o.get(e,"cid"),i=this.collection.get(n);this.setSelected(i),this.trigger("selectClicked"),this.options.allowClickPropagation||(t.preventDefault(),t.stopPropagation())}},onAddChild:function(t){this.selectedModel&&t.model.id&&t.model.id==this.selectedModel.id&&t.$el.addClass("selected")},setSelected:function(t){if(this.selectedModel){this.selectedModel.trigger("unselected");var e=this.children.findByModel(this.selectedModel);e&&e.$el.removeClass("selected")}(this.selectedModel=t)&&(t.trigger("selected"),this.children.findByModel(t).$el.addClass("selected")),this.triggerMethod("selected",t)},getActive:function(){var t=r(this).find("li.active:not(.divider):visible")[0];if(t){var e=o.get(t,"cid");return this.collection.get(e)}},setActive:function(t){if(t){var e=this.children.findByModel(t);e&&(e.$el.hasClass("active")||(r(this).find("li.active:not(.divider):visible").removeClass("active"),e.$el.addClass("active")))}},_moveSelect:function(t){var e=r(this).find("li:not(.divider):visible");if(e.length){var n=e.filter(".active"),i=e.index(n);if(~i?(i+=t)<0?i=0:i>=e.length&&(i=e.length-1):i=0,i!=n){var o=e.eq(i);n.removeClass("active"),o.addClass("active"),o.addClass("focus")}}}}}()},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression;return'<a role="menuitem" tabindex="-1" href="'+s("function"==typeof(r=null!=(r=e.href||(null!=t?t.href:t))?r:a)?r.call(t,{name:"href",hash:{},data:i}):r)+'" '+(null!=(o=e.if.call(t,null!=t?t.target:t,{name:"if",hash:{},fn:this.program(2,i,0),inverse:this.noop,data:i}))?o:"")+">"+s("function"==typeof(r=null!=(r=e.title||(null!=t?t.title:t))?r:a)?r.call(t,{name:"title",hash:{},data:i}):r)+"</a>\n"},2:function(t,e,n,i){var o;return'target="'+this.escapeExpression("function"==typeof(o=null!=(o=e.target||(null!=t?t.target:t))?o:e.helperMissing)?o.call(t,{name:"target",hash:{},data:i}):o)+'"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o;return null!=(o=e.unless.call(t,null!=t?t.divider:t,{name:"unless",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:""},useData:!0})},,,,,function(t,e,n){"use strict";var i=n(76),o=n(2),r=n(45),a=n(134),s=new i.ChatCollection(null,{listen:!0});s.on("error",a.bind(null,"chat-collection")),o.isLoggedIn()&&r.syncCollections({chat:s}),window._chatCollection=s,t.exports=s},,,function(t,e,n){var i={"./ar":98,"./ar-dz":99,"./ar-dz.js":99,"./ar-kw":100,"./ar-kw.js":100,"./ar-ly":101,"./ar-ly.js":101,"./ar-ma":102,"./ar-ma.js":102,"./ar-sa":103,"./ar-sa.js":103,"./ar-tn":104,"./ar-tn.js":104,"./ar.js":98,"./cs":105,"./cs.js":105,"./da":106,"./da.js":106,"./de":107,"./de-at":108,"./de-at.js":108,"./de-ch":109,"./de-ch.js":109,"./de.js":107,"./en-gb":110,"./en-gb.js":110,"./es":111,"./es-do":112,"./es-do.js":112,"./es-us":113,"./es-us.js":113,"./es.js":111,"./fa":114,"./fa.js":114,"./fr":115,"./fr-ca":116,"./fr-ca.js":116,"./fr-ch":117,"./fr-ch.js":117,"./fr.js":115,"./hu":118,"./hu.js":118,"./it":119,"./it.js":119,"./ja":120,"./ja.js":120,"./ko":121,"./ko.js":121,"./lt":122,"./lt.js":122,"./nl":123,"./nl-be":124,"./nl-be.js":124,"./nl.js":123,"./pl":125,"./pl.js":125,"./pt":126,"./pt-br":127,"./pt-br.js":127,"./pt.js":126,"./ru":128,"./ru.js":128,"./sk":129,"./sk.js":129,"./sv":130,"./sv.js":130,"./zh-cn":131,"./zh-cn.js":131};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}o.keys=function(){return Object.keys(i)},o.resolve=r,(t.exports=o).id=248},function(t,e,n){"use strict";var i=n(4),o=n(87),r=n(250),a=n(189),s=n(226),l=n(227),c=n(190),u=n(228);n(26);var h=i.LayoutView.extend({template:!1,el:"body",dialogRegion:o,ui:{scroll:"#content-frame"},behaviors:{Isomorphic:{chat:{el:"#content-wrapper",init:"initChatRegion"}}},initChatRegion:function(t){var e=i.getOption(this,"monitorUnreadItems"),n=[a,s,l,c,u];return new r(t({collection:this.options.chatCollection,decorators:n,monitorScrollPane:e&&this.ui.scroll}))}});t.exports=h},function(t,e,n){"use strict";var i=n(4),o=n(149),r=n(1),a=n(207),s=n(251),l=n(2),c=n(45),u=n(96);n(26),t.exports=i.LayoutView.extend({behaviors:{Isomorphic:{chat:{el:"#chat-container",init:function(t){var e=this.chatCollectionView=new a(t({collection:this.collection,decorators:this.options.decorators}));return this.options.monitorScrollPane&&c.monitorViewForUnreadItems(this.options.monitorScrollPane,e),e}},connectivityIndicator:{el:".chat-connectivity-indicator-wrapper",init:"initConnectivityIndicatorView"}}},initConnectivityIndicatorView:function(t){if(l.hasFeature("connectivity-indicator"))return new s(t({}))},ui:{primaryScroll:".primary-scroll"},events:{click:"onClick"},onRender:function(){o()&&this.ui.primaryScroll.addClass("scroller")},onClick:function(t){0<window.getSelection().toString().length||u()||"textarea"===t.target.tagName.toLowerCase()||t.target.className.match(/js-parent-message-indicator/)||r.trigger("focus.request.chat")}})},function(t,e,n){"use strict";var i=n(5),o=n(4),r=n(252),a=n(1);n(24),t.exports=o.ItemView.extend({template:r,className:"chat-connectivity-indicator",model:new i.Model({hasConnectivity:!0}),ui:{indicator:".chat-connectivity-indicator"},behaviors:{Tooltip:{"#connectivity-icon":{title:"Realtime connection lost. Reconnecting...",placement:"bottom"}}},modelEvents:{change:"onConnectivityChange"},initialize:function(){this.listenTo(a,"realtime-connectivity:up",function(){this.model.set("hasConnectivity",!0)}),this.listenTo(a,"realtime-connectivity:down",function(){this.model.set("hasConnectivity",!1)})},onRender:function(){this.onConnectivityChange()},onConnectivityChange:function(){var t=this.model.get("hasConnectivity"),e=this.$el;clearTimeout(this.hideTimer),t?this.hideTimer=setTimeout(function(){e.hide()},1e3):e.show(),this.$el.toggleClass("is-hidden",t)}})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return'<span class="chat-connectivity-indicator-icon mega-octicon octicon-zap pulse" id="connectivity-icon" title="Reconnecting..."></span>\n'},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression;return'Please check that:\n<ul>\n  <li><a href="https://github.com/'+a("function"==typeof(o=null!=(o=e.repo||(null!=t?t.repo:t))?o:r)?o.call(t,{name:"repo",hash:{},data:i}):o)+"/commit/"+a("function"==typeof(o=null!=(o=e.sha||(null!=t?t.sha:t))?o:r)?o.call(t,{name:"sha",hash:{},data:i}):o)+'" target="_blank" class="link">'+a("function"==typeof(o=null!=(o=e.repo||(null!=t?t.repo:t))?o:r)?o.call(t,{name:"repo",hash:{},data:i}):o)+"@"+a("function"==typeof(o=null!=(o=e.sha||(null!=t?t.sha:t))?o:r)?o.call(t,{name:"sha",hash:{},data:i}):o)+'</a> is a real commit</li>\n  <li>Gitter has <a href="/login/upgrade?scopes=repo" target="_blank" class="link">permission to view it. Allow private repo access<a></li>\n</ul>\n'},3:function(t,e,n,i){var o;return null!=(o=e.if.call(t,null!=t?t.author:t,{name:"if",hash:{},fn:this.program(4,i,0),inverse:this.noop,data:i}))?o:""},4:function(t,e,n,i){var o,r=this.lambda,a=this.escapeExpression;return'<div class="trpDisplayPicture--left avatar-s" style="background-image: url('+a(r(null!=(o=null!=t?t.author:t)?o.avatar_url:o,t))+');"></div>\n<div class=\'chat-item__content\'>\n  <div class="chat-item__details">\n    <div class="chat-item__from">'+a(r(null!=(o=null!=t?t.author:t)?o.login:o,t))+'</div>\n  </div>\n  <div class="chat-item__text">\n    <p>'+a(r(null!=(o=null!=t?t.files:t)?o.length:o,t))+" file"+(null!=(o=e.unless.call(t,null!=t?t.isFileLengthSingular:t,{name:"unless",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")+" changed. "+a(r(null!=(o=null!=t?t.stats:t)?o.additions:o,t))+" addition"+(null!=(o=e.unless.call(t,null!=t?t.isAdditionsSingular:t,{name:"unless",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")+", "+a(r(null!=(o=null!=t?t.stats:t)?o.deletions:o,t))+" deletion"+(null!=(o=e.unless.call(t,null!=t?t.isDeletionsSingular:t,{name:"unless",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")+'.</p>\n    <ul class="file-list">\n'+(null!=(o=e.each.call(t,null!=t?t.files:t,{name:"each",hash:{},fn:this.program(7,i,0),inverse:this.noop,data:i}))?o:"")+"    </ul>\n"+(null!=(o=e.if.call(t,null!=t?t.firstPatchHtml:t,{name:"if",hash:{},fn:this.program(9,i,0),inverse:this.noop,data:i}))?o:"")+"  </div>\n</div>\n"},5:function(t,e,n,i){return"s"},7:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression;return'      <li><a href="'+a("function"==typeof(o=null!=(o=e.blob_url||(null!=t?t.blob_url:t))?o:r)?o.call(t,{name:"blob_url",hash:{},data:i}):o)+'" target="_blank" class="'+a("function"==typeof(o=null!=(o=e.status||(null!=t?t.status:t))?o:r)?o.call(t,{name:"status",hash:{},data:i}):o)+'" title="'+a("function"==typeof(o=null!=(o=e.fullFilename||(null!=t?t.fullFilename:t))?o:r)?o.call(t,{name:"fullFilename",hash:{},data:i}):o)+'">'+a("function"==typeof(o=null!=(o=e.filename||(null!=t?t.filename:t))?o:r)?o.call(t,{name:"filename",hash:{},data:i}):o)+"</a></li>\n"},9:function(t,e,n,i){var o,r;return"      "+(null!=(o="function"==typeof(r=null!=(r=e.firstPatchHtml||(null!=t?t.firstPatchHtml:t))?r:e.helperMissing)?r.call(t,{name:"firstPatchHtml",hash:{},data:i}):r)?o:"")+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o;return null!=(o=e.if.call(t,null!=t?t.error:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?o:""},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){return"  Error - Commit Not Found\n"},3:function(t,e,n,i){var o;return null!=(o=e.if.call(t,null!=t?t.commit:t,{name:"if",hash:{},fn:this.program(4,i,0),inverse:this.program(6,i,0),data:i}))?o:""},4:function(t,e,n,i){var o;return"    "+this.escapeExpression(this.lambda(null!=(o=null!=t?t.commit:t)?o.message:o,t))+"\n"},6:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression;return"    "+a("function"==typeof(o=null!=(o=e.repo||(null!=t?t.repo:t))?o:r)?o.call(t,{name:"repo",hash:{},data:i}):o)+"@"+a("function"==typeof(o=null!=(o=e.shortSha||(null!=t?t.shortSha:t))?o:r)?o.call(t,{name:"shortSha",hash:{},data:i}):o)+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r;return'<a href="'+this.escapeExpression("function"==typeof(r=null!=(r=e.html_url||(null!=t?t.html_url:t))?r:e.helperMissing)?r.call(t,{name:"html_url",hash:{},data:i}):r)+'" target="_blank">\n'+(null!=(o=e.if.call(t,null!=t?t.error:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?o:"")+"</a>"},useData:!0})},function(t,e,n){"use strict";var i=n(33),o=n(61),r=n(0),a=n(5),s=n(4),l=n(35),c=n(256),g=n(7),v=n(2),u=n(12),_=n(146).getBackendForRoom,h=n(39),b=n(257),d=n(1),p=n(8),m=n(203),f=n(238),w=n(53),y=n(258),x=n(259),k=n(192);n(24),n(234);var T,C={wait:!0,modal:!1,autoSubmit:!1,debug:!1},E=s.ItemView.extend({template:y,modelEvents:{change:"renderIfRequired"},ui:{leftMenuToggle:".js-header-view-left-menu-toggle",avatarImage:".js-chat-header-avatar-image",groupAvatarUploadForm:".js-chat-header-group-avatar-upload-form",groupAvatarFileInput:".js-chat-header-group-avatar-upload-input",groupAvatarSignatureInput:".js-chat-header-group-avatar-upload-signature",groupAvatarParamsInput:".js-chat-header-group-avatar-upload-params",groupAvatarProgress:".js-chat-header-group-avatar-upload-progress",cog:".js-chat-settings",dropdownMenu:"#cog-dropdown",topic:".js-room-topic",topicWrapper:".js-room-topic-wrapper",topicActivator:".js-room-topic-edit-activator",name:".js-chat-name",favourite:".js-favourite-button",orgrooms:".js-chat-header-org-page-action"},events:{"click @ui.leftMenuToggle":"onLeftMenuToggleClick","change @ui.groupAvatarFileInput":"onGroupAvatarUploadChange","click @ui.cog":"showDropdown","click @ui.favourite":"toggleFavourite","dblclick @ui.topicActivator":"showInput","keydown textarea":"detectKeys"},keyboardEvents:{"room-topic.edit":"showInput"},behaviors:{Tooltip:{".js-chat-header-group-avatar-upload-label":{placement:"right"},".js-chat-name":{titleFn:"getChatNameTitle",placement:"right"},".js-chat-header-org-page-action":{placement:"left"},".js-favourite-button":{placement:"left"},".js-chat-settings":{placement:"left"}}},initialize:function(t){this.rightToolbarModel=t.rightToolbarModel,this.menuItemsCollection=new a.Collection([]),this.buildDropdown()},serializeData:function(){var t=this.model.toJSON(),e=v.isStaff(),n=v.isTroupeAdmin(),i=t.groupId&&(e||n),o=v.troupe().get("matrixRoomLink");return r.extend(t,{headerView:x(t),user:!!v.isLoggedIn(),archives:this.options.archives,shouldShowPlaceholderRoomTopic:t.userCount<=1,canChangeGroupAvatar:i,matrixRoomLink:o}),t},buildDropdown:function(){v.isLoggedIn()&&(this.dropdown=new f({allowClickPropagation:!0,collection:this.menuItemsCollection,placement:"right"}),this.listenTo(this.dropdown,"selected",function(t){var e=t.get("href");"#leave"===e?this.leaveRoom():"#hide"===e?this.hideRoom():"#notifications"===e?this.requestBrowserNotificationsPermission():"#favourite"===e&&this.toggleFavourite()}))},getChatNameTitle:function(){var t=this.model;if(t.get("public"))return"Anyone can join";if(t.get("oneToOne"))return"This chat is just between you two";var e=t.get("backend");switch(e&&e.type){case"GH_REPO":return"All repo collaborators can join";case"GH_ORG":return"All org members can join";case"GL_GROUP":return"All GitLab ".concat(e.linkPath," group members can join");case"GL_PROJECT":return"All GitLab ".concat(e.linkPath," project members can join");default:return"Only invited users can join"}},onRender:function(){this.dropdown&&this.dropdown.hide(),this.setupProfileMenu();var t=this.ui.topic[0];t&&c(t)},showDropdown:function(){this.dropdown.setTargetElement(this.ui.cog[0]),this.menuItemsCollection.reset(this.createMenu()),this.dropdown.show()},setupProfileMenu:function(){if(v.isLoggedIn()){this.profileMenu&&this.profileMenu.destroy();var t=document.querySelector("#profile-menu");t&&(this.profileMenu=new k({el:t}),this.profileMenu.render())}},createMenu:function(){var t=v(),e=v.isStaff(),n=v.isTroupeAdmin(),i=v.isRoomMember(),o=this.model.get("oneToOne"),r=this.model.get("url"),a=e||n,s=new b;if(s.addConditional(!o,{title:"Add people to this room",href:"#add"}),s.addConditional(!o,{title:"Share this chat room",href:"#share"}),s.addDivider(),s.addConditional(i,{title:"".concat(this.model.get("favourite")?"Unfavourite":"Favourite"," room"),href:"#favourite"}),s.addConditional(i,{title:"Notifications",href:"#notifications"}),!o){var l=t.isNativeDesktopApp?{title:"Integrations",href:g.basePath+r+"#integrations",target:"_blank",dataset:{disableRouting:1}}:{title:"Integrations",href:"#integrations"};s.addConditional(n,l),s.addConditional(a,{title:"Tags",href:"#tags"}),s.addConditional(a,{title:"Settings",href:"#settings"}),s.addConditional(a,{title:"Permissions",href:"#permissions"}),s.addDivider(),s.add({title:"Archives",href:r+"/archives/all",target:"_blank"});var c=_(this.model),u=c&&c.type,h=c&&c.linkPath,d="GH_REPO"===u||"GH_ORG"===u;s.addConditional(d,{title:"Open in GitHub",href:"https://www.github.com/".concat(h),target:"_blank"});var p="GL_GROUP"===u;s.addConditional(p,{title:"Open in GitLab",href:"https://gitlab.com/".concat(h),target:"_blank"});var m=this.model.get("group");if(m){var f=m.homeUri;s.add({title:"Community home",href:"/".concat(f)})}s.addDivider(),s.addConditional(n,{title:"Export room data",href:"#export-room-data"}),s.addConditional(n,{title:"Delete this room",href:"#delete"}),s.addConditional(i,{title:"Leave this room",href:"#leave"})}return s.addConditional(i,{title:"Hide this room",href:"#hide"}),s.getItems()},leaveRoom:function(){v.isLoggedIn()&&p.room.delete("/users/"+v.getUserId(),{}).then(function(){d.trigger("navigation","/home","home","")})},hideRoom:(T=o(i.mark(function t(){return i.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.model.set("lastAccessTime",null),t.prev=1,t.next=4,p.user.delete("/rooms/".concat(this.model.id));case 4:d.trigger("navigation","/home","home",""),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),u.error("Error hiding room",{exception:t.t0}),d.triggerParent("user_notification",{title:"Error hiding room",text:"Check the devtools console for more details: ".concat(t.t0.message)});case 11:case"end":return t.stop()}},t,this,[[1,7]])})),function(){return T.apply(this,arguments)}),toggleFavourite:function(){if(v.isLoggedIn()){this.model.set("favourite",!this.model.get("favourite"));var t=!!this.model.get("favourite");p.userRoom.put("",{favourite:t})}},saveTopic:function(){var t=this.$el.find("textarea").val();v.troupe().set("topic",t),p.room.put("",{topic:t}),this.editingTopic=!1},cancelEditTopic:function(){this.editingTopic=!1,this.render()},detectKeys:function(t){this.detectReturn(t),this.detectEscape(t)},detectReturn:function(t){13!==t.keyCode||t.ctrlKey||t.shiftKey||(t.stopPropagation(),t.preventDefault(),this.saveTopic())},detectEscape:function(t){27===t.keyCode&&this.cancelEditTopic()},showInput:function(){if(v.isTroupeAdmin()&&!0!==this.editingTopic){this.editingTopic=!0;var t=this.model.get("topic");this.oldTopic=t,h(this.ui.topicActivator[0],"is-editing",!0),h(this.ui.topicWrapper[0],"is-editing",!0),h(this.ui.topic[0],"is-editing",!0),this.ui.topic.html('<textarea class="topic-input"></textarea>');var e=this.ui.topic.find("textarea").val(t);setTimeout(function(){e.select()},10)}},requestBrowserNotificationsPermission:function(){m.requestAccess()},isArchive:function(){return!!v().archive},renderIfRequired:function(){var i=this.model;(function(t){var e=i.changed;if(e)for(var n=0;n<t.length;n++)if(e.hasOwnProperty(t[n]))return!0})(["uri","name","id","favourite","topic","avatarUrl","group","roomMember","backend","public"])&&(this.options.template=y,this.render(),this.editingTopic=!1)},onLeftMenuToggleClick:function(){d.trigger("dispatchVueAction","toggleLeftMenu",!0)},onGroupAvatarUploadChange:function(){this.uploadGroupAvatar()},updateProgressBar:function(t){var e=this.ui.groupAvatarProgress,n=t.value&&100*t.value+"%";e.css("width",n)},resetProgressBar:function(){this.ui.groupAvatarProgress.addClass("hidden"),this.updateProgressBar({value:0})},handleUploadStart:function(){this.ui.groupAvatarProgress.removeClass("hidden"),this.updateProgressBar({value:.2})},handleUploadProgress:function(t,e){this.updateProgressBar({value:t/e})},handleUploadSuccess:function(){this.resetProgressBar(),d.triggerParent("user_notification",{title:"Avatar upload complete",text:"Wait a few moments for your new avatar to appear..."}),setTimeout(function(){d.triggerParent("navigation",null,null,null,{refresh:!0})}.bind(this),1e3)},handleUploadError:function(t){d.triggerParent("user_notification",{title:"Error Uploading File",text:t.message}),this.resetProgressBar()},uploadGroupAvatar:function(){var t=v.troupe();if(t){var e=t.get("groupId");this.handleUploadStart(),p.priv.get("/generate-signature",{type:"avatar",group_id:e}).then(function(t){this.ui.groupAvatarParamsInput[0].setAttribute("value",t.params),this.ui.groupAvatarSignatureInput[0].setAttribute("value",t.sig);var e=new FormData(this.ui.groupAvatarUploadForm[0]);this.ui.groupAvatarUploadForm.unbind("submit.transloadit"),this.ui.groupAvatarUploadForm.transloadit(r.extend(C,{formData:e,onStart:this.handleUploadStart.bind(this),onProgress:this.handleUploadProgress.bind(this),onSuccess:this.handleUploadSuccess.bind(this),onError:this.handleUploadError.bind(this)})),this.ui.groupAvatarUploadForm.trigger("submit.transloadit")}.bind(this))}}});l.mixin(E,w),t.exports=E},function(n,i,t){var o;!function(t){function e(t){for(var e,n=document.createNodeIterator(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,function(t){return 1!==t.nodeType?NodeFilter.FILTER_ACCEPT:"A"===t.tagName?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP},!1);null!==(e=n.nextNode());){var i=/\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>'"]+|\(([^\s()<>'"]+|(\([^\s()<>'"]+\)))*\))+(?:\(([^\s()<>'"]+|(\([^\s()<>'"]+\)))*\)|[^\s`!()\[\]{};:.,<>?'"]))/i.exec(e.data);if(i){var o=i[0],r=document.createElement("a");r.setAttribute("target","_blank"),r.setAttribute("rel","nofollow"),(r.textContent=o).match(/^https?:\/\//)?r.setAttribute("href",o):r.setAttribute("href","http://"+o);var a=e.splitText(i.index);a.nodeValue=a.nodeValue.substr(o.length),e.parentNode.insertBefore(r,a),n.nextNode()}}}window.autolink=e,void 0!==(o=function(){return e}.apply(i,[]))&&(n.exports=o)}()},function(t,e,n){"use strict";function i(){this.lastItemDivider=!0,this.items=[]}i.prototype={addConditional:function(t,e){t&&this.add(e)},add:function(t){this.lastItemDivider=!1,this.items.push(t)},addDivider:function(){this.lastItemDivider||(this.lastItemDivider=!0,this.items.push({divider:!0}))},getItems:function(){return this.lastItemDivider&&this.items.pop(),this.items}},t.exports=i},function(t,e,a){var n=a(3);function s(t){return t&&(t.__esModule?t.default:t)}t.exports=(n.default||n).template({1:function(t,e,n,i){return"chat-header__avatar--pro"},3:function(t,e,n,i){return"disabled"},5:function(t,e,n,i){return'title="Upload new avatar"'},7:function(t,e,n,i){var o,r=this.lambda,a=this.escapeExpression;return'      <a href="'+a(r(null!=(o=null!=t?t.headerView:t)?o.url:o,t))+'" class="chat-header__title">'+a(r(null!=(o=null!=t?t.headerView:t)?o.troupeName:o,t))+"</a>\n"},9:function(t,e,n,i){var o;return"      <a "+(null!=(o=e.if.call(t,null!=(o=null!=t?t.headerView:t)?o.headerLink:o,{name:"if",hash:{},fn:this.program(10,i,0),inverse:this.noop,data:i}))?o:"")+' class="chat-header__title" target="_blank">'+this.escapeExpression(this.lambda(null!=(o=null!=t?t.headerView:t)?o.troupeName:o,t))+"</a>\n"},10:function(t,e,n,i){var o;return'href="'+this.escapeExpression(this.lambda(null!=(o=null!=t?t.headerView:t)?o.headerLink:o,t))+'"'},12:function(t,e,n,i){return"        <i class='octicon octicon-lock chat-header__permission-icon'></i>\n"},14:function(t,e,n,i){var o,r=this.escapeExpression;return'<p class="js-room-topic chat-header__topic '+r(s(a(38)).call(t,null!=(o=null!=t?t.headerView:t)?o.isAdmin:o,"is-admin",null!=t?t[":"]:t,"",{name:"when",hash:{},data:i}))+" "+r(s(a(38)).call(t,null!=t?t.shouldShowPlaceholderRoomTopic:t,"is-new-room",null!=t?t[":"]:t,"",{name:"when",hash:{},data:i}))+'">'+r(this.lambda(null!=(o=null!=t?t.headerView:t)?o.troupeTopic:o,t))+"</p>"},16:function(t,e,n,i){var o=this.escapeExpression;return'    <a href="'+o(this.lambda(null!=t?t.matrixRoomLink:t,t))+'" class="chat-header__org-page org-page-link" title="See this room on Matrix" target="_blank" rel="nofollow noopener noreferrer">\n     <img class="chat-header__action-icon chat-header__action-matrix-icon" src=\''+o(e.cdn.call(t,"images/svg/matrix-favicon-logo-white.svg",{name:"cdn",hash:{},data:i}))+'\' aria-hidden="true">\n    </a>\n'},18:function(t,e,n,i){var o,r=this.lambda,a=this.escapeExpression;return'    <a href="'+a(r(null!=(o=null!=t?t.headerView:t)?o.groupPageUrl:o,t))+'" class="chat-header__org-page org-page-link js-chat-header-org-page-action" title="More '+a(r(null!=(o=null!=(o=null!=t?t.headerView:t)?o.group:o)?o.uri:o,t))+' rooms">\n      <i class="chat-header__action-icon icon-globe"></i>\n    </a>\n'},20:function(t,e,n,i){var o;return null!=(o=e.if.call(t,null!=t?t.user:t,{name:"if",hash:{},fn:this.program(21,i,0),inverse:this.noop,data:i}))?o:""},21:function(t,e,n,i){var o;return'    <button class="chat-header__favourite js-favourite-button '+(null!=(o=e.if.call(t,null!=(o=null!=t?t.headerView:t)?o.favourite:o,{name:"if",hash:{},fn:this.program(22,i,0),inverse:this.noop,data:i}))?o:"")+'" title="Favourite '+this.escapeExpression(this.lambda(null!=(o=null!=t?t.headerView:t)?o.troupeName:o,t))+'">\n      <i\n        class="chat-header__action-icon '+(null!=(o=e.if.call(t,null!=(o=null!=t?t.headerView:t)?o.favourite:o,{name:"if",hash:{},fn:this.program(24,i,0),inverse:this.program(26,i,0),data:i}))?o:"")+'"\n        aria-hidden="true">\n      </i>\n    </button>\n    <button class="chat-header__settings js-chat-settings" title="Room settings" data-toggle="dropdown">\n      <i class="chat-header__action-icon" aria-hidden="true">\n        <svg\n          class="chat-header__action-icon-svg--settings"\n          version="1.1"\n          xmlns="http://www.w3.org/2000/svg"\n          xmlns:xlink="http://www.w3.org/1999/xlink"\n          xml:space="preserve"\n          viewBox="0 0 27 26"\n          stroke="currentColor"\n          stroke-width="1.75"\n          fill="transparent">\n          <line vector-effect="non-scaling-stroke" class="st0" x1="4.5" y1="24" x2="4.5" y2="15"/>\n          <line vector-effect="non-scaling-stroke" class="st0" x1="4.5" y1="3" x2="4.5" y2="9"/>\n          <circle vector-effect="non-scaling-stroke" class="st0" cx="4.5" cy="12" r="3"/>\n\n          <line vector-effect="non-scaling-stroke" class="st0" x1="13.5" y1="24" x2="13.5" y2="20"/>\n          <line vector-effect="non-scaling-stroke" class="st0" x1="13.5" y1="3" x2="13.5" y2="14"/>\n          <circle vector-effect="non-scaling-stroke" class="st0" cx="13.5" cy="17" r="3"/>\n\n          <line vector-effect="non-scaling-stroke" class="st0" x1="22.5" y1="24" x2="22.5" y2="12"/>\n          <line vector-effect="non-scaling-stroke" class="st0" x1="22.5" y1="3" x2="22.5" y2="6"/>\n          <circle vector-effect="non-scaling-stroke" class="st0" cx="22.5" cy="9" r="3"/>\n        </svg>\n      </i>\n    </button>\n    <div id="profile-menu" class="profile-menu"></div>\n'},22:function(t,e,n,i){return"favourite"},24:function(t,e,n,i){return"icon-star-1"},26:function(t,e,n,i){return"icon-star-empty"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r=this.escapeExpression;return'<div class="chat-header__main-grouping chat-header__left-menu-toggle-grouping">\n'+(null!=(o=this.invokePartial(a(229),t,{name:"headerViewLeftMenuToggle",data:i,indent:"  ",helpers:e,partials:n}))?o:"")+'</div>\n\n<div class="chat-header__main-grouping chat-header__avatar-grouping">\n  <form\n    class="chat-header__avatar '+(null!=(o=e.if.call(t,null!=(o=null!=t?t.headerView:t)?o.premium:o,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+' js-chat-header-group-avatar-upload-form"\n    action=""\n    enctype="multipart/form-data"\n    method="POST">\n    <input type="hidden" class="js-chat-header-group-avatar-upload-signature" name="signature" value="">\n    <input type="hidden" class="js-chat-header-group-avatar-upload-params" name="params" value="">\n    <input\n      id="chat-header-group-avatar-upload-input"\n      class="chat-header__group-avatar-upload-input js-chat-header-group-avatar-upload-input"\n      name="file"\n      type="file"\n      accept="image/*"\n      '+(null!=(o=e.unless.call(t,null!=t?t.canChangeGroupAvatar:t,{name:"unless",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+' />\n    <label\n      class="chat-header__group-avatar-upload-label js-chat-header-group-avatar-upload-label"\n      for="chat-header-group-avatar-upload-input"\n      '+(null!=(o=e.if.call(t,null!=t?t.canChangeGroupAvatar:t,{name:"if",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?o:"")+'>\n      <img class="js-chat-header-avatar-image" '+(null!=(o=e.avatarSrcSet.call(t,null!=(o=null!=t?t.headerView:t)?o.avatarUrl:o,48,{name:"avatarSrcSet",hash:{},data:i}))?o:"")+'>\n      <div class="chat-header__group-avatar-upload-progress hidden js-chat-header-group-avatar-upload-progress"></div>\n    </label>\n  </form>\n</div>\n\n<div class="chat-header__main-grouping chat-header__info-grouping">\n  <div class="chat-header__heading-sub-group">\n    <h1 class="js-chat-name chat-header__heading">\n'+(null!=(o=e.if.call(t,null!=t?t.archives:t,{name:"if",hash:{},fn:this.program(7,i,0),inverse:this.program(9,i,0),data:i}))?o:"")+(null!=(o=e.if.call(t,null!=(o=null!=t?t.headerView:t)?o.isPrivate:o,{name:"if",hash:{},fn:this.program(12,i,0),inverse:this.noop,data:i}))?o:"")+'    </h1>\n  </div>\n  <div class="chat-header__topic-sub-group js-room-topic-edit-activator" tabindex="0">\n    <div class="chat-header__topic-wrapper js-room-topic-wrapper '+r(s(a(38)).call(t,null!=(o=null!=t?t.headerView:t)?o.isAdmin:o,"is-admin",null!=t?t[":"]:t,"",{name:"when",hash:{},data:i}))+" "+r(s(a(38)).call(t,null!=t?t.shouldShowPlaceholderRoomTopic:t,"is-new-room",null!=t?t[":"]:t,"",{name:"when",hash:{},data:i}))+'">'+(null!=(o=e.unless.call(t,null!=(o=null!=t?t.headerView:t)?o.oneToOne:o,{name:"unless",hash:{},fn:this.program(14,i,0),inverse:this.noop,data:i}))?o:"")+'</div>\n  </div>\n</div>\n\n\n<div class="chat-header__main-grouping chat-header__action-grouping">\n'+(null!=(o=e.if.call(t,null!=t?t.matrixRoomLink:t,{name:"if",hash:{},fn:this.program(16,i,0),inverse:this.noop,data:i}))?o:"")+"\n"+(null!=(o=e.if.call(t,null!=(o=null!=t?t.headerView:t)?o.groupPageUrl:o,{name:"if",hash:{},fn:this.program(18,i,0),inverse:this.noop,data:i}))?o:"")+"\n"+(null!=(o=e.unless.call(t,null!=t?t.archives:t,{name:"unless",hash:{},fn:this.program(20,i,0),inverse:this.noop,data:i}))?o:"")+"</div>\n"},usePartial:!0,useData:!0})},function(t,e,n){"use strict";var r=n(146).getBackendForRoom;t.exports=function(t){var e,n=t.group,i=n&&n.uri,o=i&&"/orgs/"+i+"/rooms";return{url:t.url,oneToOne:t.oneToOne,troupeName:t.name,favourite:t.favourite,premium:t.premium,isPrivate:!t.public,troupeTopic:t.topic,isAdmin:(e=t,e.permissions&&e.permissions.admin),avatarUrl:t.avatarUrl,group:n,groupPageUrl:o,headerLink:function(t){var e=r(t);if(e)switch(e.type){case"GL_GROUP":case"GL_PROJECT":case"GL_USER":return"https://gitlab.com/"+e.linkPath;case"GH_REPO":case"GH_ORG":case"GH_USER":return"https://github.com/"+e.linkPath}}(t)}}},,,,,,,,,,,,function(t,e,n){"use strict";var i=n(4),o=n(202),r=n(272);n(199);var a=i.ItemView.extend({template:r,className:"login-view",initialize:function(t){t=t||{},this.action=t.action||"",this.source=t.source||"",this.returnTo=t.returnTo||"","CURRENT"===t.returnTo&&(this.returnTo=window.location.pathname),this.listenTo(this,"menuItemClicked",this.menuItemClicked)},menuItemClicked:function(t){switch(t){case"cancel":this.dialog.hide()}},serializeData:function(){return{action:this.action,source:this.source,returnTo:this.returnTo}}}),s=o.extend({initialize:function(t){(t=t||{}).modalClassVariation="modal--default__narrow",o.prototype.initialize.call(this,t),this.view=new a(t)}});t.exports=s},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o;return"&returnTo="+this.escapeExpression("function"==typeof(o=null!=(o=e.returnTo||(null!=t?t.returnTo:t))?o:e.helperMissing)?o.call(t,{name:"returnTo",hash:{},data:i}):o)},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s="function",l=this.escapeExpression;return'<section class="login-view__section">\n  <p class="login-view__oauth-scope-notes">\n    You can read our\n    <a href="https://gitlab.com/gitterHQ/webapp/-/blob/develop/docs/oauth-scopes.md" target="_blank">documentation on OAuth scopes</a>\n    to see why we request certain OAuth scopes.\n  </p>\n\n  <div class="login-view__buttons">\n    <a href="/login/gitlab?action='+l(typeof(r=null!=(r=e.action||(null!=t?t.action:t))?r:a)===s?r.call(t,{name:"action",hash:{},data:i}):r)+"&source="+l(typeof(r=null!=(r=e.source||(null!=t?t.source:t))?r:a)===s?r.call(t,{name:"source",hash:{},data:i}):r)+(null!=(o=e.if.call(t,null!=t?t.returnTo:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'" class="login-view__button button-gitlab--small">\n      <i class="icon-gitlab"></i> Sign in with GitLab\n    </a>\n    <a href="/login/github?action='+l(typeof(r=null!=(r=e.action||(null!=t?t.action:t))?r:a)===s?r.call(t,{name:"action",hash:{},data:i}):r)+"&source="+l(typeof(r=null!=(r=e.source||(null!=t?t.source:t))?r:a)===s?r.call(t,{name:"source",hash:{},data:i}):r)+(null!=(o=e.if.call(t,null!=t?t.returnTo:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'" class="login-view__button button-github--small">\n      <i class="icon-github-circled"></i> Sign in with GitHub\n    </a>\n    <a href="/login/twitter?action='+l(typeof(r=null!=(r=e.action||(null!=t?t.action:t))?r:a)===s?r.call(t,{name:"action",hash:{},data:i}):r)+"&source="+l(typeof(r=null!=(r=e.source||(null!=t?t.source:t))?r:a)===s?r.call(t,{name:"source",hash:{},data:i}):r)+(null!=(o=e.if.call(t,null!=t?t.returnTo:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'" class="login-view__button button-twitter--small">\n      <i class="icon-twitter"></i> Sign in with Twitter\n    </a>\n  </div>\n\n  <div class="modal--default__content__fineprint login-view__agree">\n    <p>By logging in you agree to our <a href="https://element.io/terms-of-service" class="login-view__agree-link" target="_blank">Terms and Conditions</a>.</p>\n  </div>\n</div>\n\n'},useData:!0})},,function(t,e,n){"use strict";var i=n(5),o=n(8),r=n(140),a=n(2),s=i.Model.extend({defaults:{isPinned:!0},initialize:function(){r(this,["isPinned"],this.autoPersist)},toJSON:function(){var n=this.attributes;return Object.keys(this.defaults).reduce(function(t,e){return t[e]=n[e],t},{})},autoPersist:function(){return o.user.put("/settings/rightToolbar",this.toJSON(),{dataType:"text"})}}),l=a.getSnapshot("rightToolbar");t.exports=new s(l)},,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(4),o=n(5),r=n(0),a=n(202),s=n(476),l=n(8),c=n(477),u=n(18),h=n(198),d=n(2);n(52);var p=o.Collection.extend({searchTerm:"",isFetched:!1,limit:25,url:l.room.channelGenerator("/users"),sync:u.sync,fetchMoreBefore:function(){},fetchMoreAfter:function(){this.limit>this.length||(this.limit=this.limit+25,this.fetchWithLimit())},search:function(t){this.searchTerm=t||"",this.limit=25,this.fetchWithLimit()},fetchWithLimit:function(){var t=this,e={limit:this.limit};this.searchTerm&&(e.q=this.searchTerm),this.fetch({data:e,success:function(){t.isFetched=!0}})}}),m=i.ItemView.extend({tagName:"li",className:"people-modal-result",template:s,modelEvents:{change:"render"},behaviors:{Widgets:{}}}),f=i.ItemView.extend({className:"people-modal-empty",serializeData:function(){return{isFetched:this.collection.isFetched}},template:function(t){return t.isFetched?"<h3>Nope, nothing :(</h3>":""}}),g=i.CompositeView.extend({className:"people-modal",template:c,ui:{search:"input",clear:".js-people-modal-search-clear",results:"ul"},childViewContainer:"@ui.results",childView:m,emptyView:f,events:{"input @ui.search":"onSearchInput","click @ui.clear":"clearSearch"},reorderOnSort:!0,initialize:function(){var e=this;this.debouncedSearch=r.debounce(function(){var t=e.ui.search.val();e.collection.search(t)},250),this.once("render",function(){new h({scrollElement:this.ui.results[0]},this)},this)},emptyViewOptions:function(){return{collection:this.collection}},onSearchInput:function(){this.ui.search.val()?this.ui.clear.show():this.ui.clear.hide(),this.debouncedSearch()},clearSearch:function(){this.ui.search.val(""),this.collection.search(""),this.ui.clear.hide()}}),v=a.extend({initialize:function(t){(t=t||{}).title="People";var e=d.troupe(),n=new p(t.rosterCollection.models);n.fetchWithLimit(),n.listenTo(e,"change:userCount",n.fetchWithLimit),a.prototype.initialize.call(this,t),this.view=new g({collection:n})}});t.exports=v},,,,,,function(t,e,n){"use strict";var i=n(370),o=n(371),r=n(1),a=n(134);n(372);var s=new i.RosterCollection(null,{listen:!0}),l=new o.EventCollection(null,{listen:!0,snapshot:!0});function c(t){var e=s.get(t.userId);e&&e.set("online","in"===t.status)}s.on("error",a.bind(null,"roster-collection")),l.on("error",a.bind(null,"events-collection")),r.on("userLoggedIntoTroupe",c),r.on("userLoggedOutOfTroupe",c);var u={roster:s,events:l};window._intergratedCollections=u,t.exports=u},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(5),o=n(30),r=n(29).LiveCollection,a=n(18),s=n(2),l=i.Model.extend({idAttribute:"id",sync:a.sync}),c=r.extend({model:l,modelName:"user",urlTemplate:"/v1/rooms/:troupeId/users",contextModel:s.delayedContextModel(1e3),getSnapshotState:function(){return{lean:!0,limit:25}},client:function(){return o.getClient()},sync:a.sync});t.exports={RosterCollection:c,UserModel:l}},function(t,e,n){"use strict";var i=n(15),o=n(29).LiveCollection,r=n(30),a=n(5),s=n(18),l=n(2),c=a.Model.extend({idAttribute:"id",parse:function(t){return t.sent&&(t.sent=i(t.sent,i.defaultFormat)),t}}),u=o.extend({model:c,initialize:function(){this.listenTo(this,"add reset",this.trim)},client:function(){return r.getClient()},trim:function(){for(;20<this.length;)this.pop()},modelName:"event",urlTemplate:"/v1/rooms/:troupeId/events",contextModel:l.delayedContextModel(2e3),comparator:function(t,e){var n=t.get("sent"),i=e.get("sent");return i?n?i.valueOf()-n.valueOf():-1:n?1:0},sync:s.sync});t.exports={EventModel:c,EventCollection:u}},function(t,e,n){"use strict";var i=n(2),o=n(30),r=n(1),a=n(85),s=0;o.getClient().subscribeTemplate({urlTemplate:"/v1/rooms/:troupeId",contextModel:i.contextModel(),onMessage:function(t){"presence"===t.notification&&("in"===t.status?r.trigger("userLoggedIntoTroupe",t):"out"===t.status&&r.trigger("userLoggedOutOfTroupe",t))},getSnapshotState:function(){return 0<s},handleSnapshot:function(t){i.getTroupeId()===t.id&&i.setTroupe(t)},getSubscribeOptions:function(){if(!(s<=1))return{reassociate:{eyeballs:a.getEyeballs()}}}}).on("resubscribe",function(){s++})},,,function(t,e,n){"use strict";var i=n(10),o=n(2),r=n(1),a=n(249),s=n(255),l=n(274),c=n(376);n(26),t.exports=a.extend({events:{'click .chat-input-nli a[href^="/login"]':"clickLogin"},clickLogin:function(t){t.preventDefault();var e=i(t.currentTarget).attr("href"),n="login"+e.slice(e.indexOf("?"));r.trigger("loginClicked",n)},behaviors:{Isomorphic:{chat:{el:"#content-wrapper",init:"initChatRegion"},toolbar:{el:"#right-toolbar-layout",init:"initToolbarRegion"},header:{el:"#header-wrapper",init:"initHeaderRegion"}}},initToolbarRegion:function(t){return new c(t({model:l}))},initHeaderRegion:function(t){return new s(t({model:o.troupe()}))}})},function(t,e,n){"use strict";var i=n(4),o=n(0),r=n(2),a=n(39),s=n(294),l=n(377),c=n(380),u=n(382),h=n(404),d=n(1);n(26);var p=i.LayoutView.extend({className:"right-toolbar right-toolbar--collapsible",behaviors:{Isomorphic:{repo_info:{el:"#repo-info",init:"initRepo_infoRegion"},activity:{el:"#activity-region",init:"initActivityRegion"},roster:{el:"#people-roster",init:"initRosterRegion"}}},ui:{header:"#toolbar-top-content",footer:"#zendesk-footer",rosterHeader:"#people-header",repoInfoHeader:"#info-header",toggleIcon:".js-menu-toggle-icon"},events:{"click #upgrade-auth":"onUpgradeAuthClick","click #people-header":"showPeopleList","click #info-header":"showRepoInfo","submit #upload-form":"upload","click @ui.toggleIcon":"toggleMenu"},childEvents:{"repoInfo:changeVisible":"repoInfoChangeVisible"},collectionEvents:{"add sync reset remove":"onCollectionUpdate"},modelEvents:{"change:isPinned":"onPanelPinStateChange"},constructor:function(){this.collection=s.roster,i.LayoutView.prototype.constructor.apply(this,arguments)},initialize:function(t){var e=this;this.iconOpts=o.extend({},this.defaults,t.icon||{}),this.iconHover=!1,this.listenTo(r.troupe(),"change:id",this.onRoomChange,this),d.on("vue:right-toolbar:toggle",function(t){return e.toggleToolbar(t)}),a(this.el,"collapsed",!this.model.get("isPinned"))},initRepo_infoRegion:function(t){return new c(t({model:new h,roomModel:r.troupe()}))},initActivityRegion:function(t){return new u(t({collection:s.events}))},initRosterRegion:function(t){return new l.ExpandableRosterView(t({rosterCollection:s.roster}))},onPanelPinStateChange:function(){a(this.el,"collapsed",!this.model.get("isPinned"))},showPeopleList:function(){this.repo_info.$el.hide(),this.roster.$el.show(),this.ui.rosterHeader.addClass("selected"),this.ui.repoInfoHeader.removeClass("selected")},showRepoInfo:function(){this.roster.$el.hide(),this.repo_info.$el.show(),this.ui.rosterHeader.removeClass("selected"),this.ui.repoInfoHeader.addClass("selected")},repoInfoChangeVisible:function(t,e){this.ui.repoInfoHeader.toggleClass("hidden",!e),this.ui.repoInfoHeader.hasClass("selected")&&!e&&this.showPeopleList()},onCollectionUpdate:function(){this.$el.find("#people-list").toggleClass("hidden",!this.collection.length)},toggleMenu:function(){this.model.set("isPinned",!this.model.get("isPinned"))},toggleToolbar:function(t){a(this.el,"hidden",!t)}});t.exports=p},function(t,e,n){"use strict";var i=n(4),o=n(2),r=n(202),a=n(41),s=n(378),l=n(379);n(26);var c=i.CollectionView.extend({tagName:"ul",className:"roster",childView:a,childViewOptions:function(t){var e={tagName:"li",showStatus:!0,tooltipPlacement:"left",screenReadUsername:!0};if(t&&t.id){var n=this.$el.find(".js-model-id-"+t.id)[0];n&&(e.el=n)}return e},collectionEvents:{reset:"onCollectionReset"},onCollectionReset:function(){if(!this.collection.length)for(var t,e=this.el;t=e.firstChild;)e.removeChild(t)}}),u=i.ItemView.extend({className:"remaining",template:l,modelEvents:{"change:id":"render"},serializeData:function(){var t=this.model.get("userCount"),e=this.model.get("oneToOne");return{showAddButton:o.isLoggedIn()&&!e,showPeopleButton:!e,userCount:t,hasHiddenMembers:25<t}}}),h=i.LayoutView.extend({template:s,behaviors:{Isomorphic:{rosterRegion:{el:"#roster-region",init:"initRosterRegion"},remainingRegion:{el:"#remaining-region",init:"initRemainingRegion"}}},initRosterRegion:function(t){return new c(t({collection:this.options.rosterCollection,filter:function(t,e){return e<25}}))},initRemainingRegion:function(t){return new u(t({model:o.troupe()}))}}),d=r.extend({initialize:function(t){(t=t||{}).title="People",r.prototype.initialize.call(this,t),this.view=new c(t)}});t.exports={ExpandableRosterView:h,Modal:d}},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o,r;return'      <li class="js-model-id-'+this.escapeExpression("function"==typeof(r=null!=(r=e.id||(null!=t?t.id:t))?r:e.helperMissing)?r.call(t,{name:"id",hash:{},data:i}):r)+'">\n        '+(null!=(o=e.widget.call(t,"avatar",{name:"widget",hash:{showStatus:!0,user:t},data:i}))?o:"")+"\n      </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o;return'<span class="frame-people">\n  <span id="roster-region">\n    <ul id="roster-view" class="roster">\n'+(null!=(o=e.each.call(t,null!=t?t.users:t,{name:"each",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'    </ul>\n  </span>\n<div id="remaining-region" class="remaining-region"></div>\n</span>\n'},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){return'  <a href="#add" class="remaining-view-button button-caribbean--xsmall">\n    Add\n  </a>\n'},3:function(t,e,n,i){var o;return null!=(o=e.if.call(t,null!=t?t.hasHiddenMembers:t,{name:"if",hash:{},fn:this.program(4,i,0),inverse:this.program(6,i,0),data:i}))?o:""},4:function(t,e,n,i){var o;return'  <a href="#people" class="remaining-view-secondary-button secondary-button-caribbean--xsmall">\n    See All\n    <span class="remaining-view-button-secondary-text">\n      ('+this.escapeExpression("function"==typeof(o=null!=(o=e.userCount||(null!=t?t.userCount:t))?o:e.helperMissing)?o.call(t,{name:"userCount",hash:{},data:i}):o)+" people)\n    </span>\n  </a>\n"},6:function(t,e,n,i){return'  <a href="#people" class="remaining-view-button secondary-button-caribbean--xsmall">\n    Details\n  </a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o;return'<div id="remaining-view" class="remaining-view">\n\n'+(null!=(o=e.if.call(t,null!=t?t.showAddButton:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+"\n"+(null!=(o=e.if.call(t,null!=t?t.showPeopleButton:t,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+"\n</div>\n"},useData:!0})},function(t,e,n){"use strict";var i=n(381),o=n(4),r=n(146).getBackendForRoom;t.exports=o.ItemView.extend({template:i,modelEvents:{change:"render"},initialize:function(t){this.roomModel=t.roomModel,this.onRoomChange(),this.listenTo(this.roomModel,"change:backend",this.onRoomChange,this)},onRoomChange:function(){var t=r(this.roomModel),e=t&&"GH_REPO"===t.type;this.triggerMethod("repoInfo:changeVisible",e),e?this.model.fetch({data:{type:t.type,linkPath:t.linkPath}}):this.model.clear()}})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o,r=e.helperMissing,a=this.escapeExpression;return'      <a href="'+a("function"==typeof(o=null!=(o=e.html_url||(null!=t?t.html_url:t))?o:r)?o.call(t,{name:"html_url",hash:{},data:i}):o)+'/issues" target="_blank"><strong class="vcard-stat-count">'+a("function"==typeof(o=null!=(o=e.open_issues||(null!=t?t.open_issues:t))?o:r)?o.call(t,{name:"open_issues",hash:{},data:i}):o)+"</strong>\n      issues</a>&nbsp;\n"},3:function(t,e,n,i){var o;return'        <li class="github-wiki"><a href="'+this.escapeExpression("function"==typeof(o=null!=(o=e.html_url||(null!=t?t.html_url:t))?o:e.helperMissing)?o.call(t,{name:"html_url",hash:{},data:i}):o)+'/wiki" target="_blank">View the wiki</a></li>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s="function",l=this.escapeExpression,c=this.lambda;return'<div class="trpRepoInfoContainer">\n  <h2>'+l(typeof(r=null!=(r=e.name||(null!=t?t.name:t))?r:a)===s?r.call(t,{name:"name",hash:{},data:i}):r)+"</h2>\n  <p>"+l(typeof(r=null!=(r=e.description||(null!=t?t.description:t))?r:a)===s?r.call(t,{name:"description",hash:{},data:i}):r)+" <small>"+l(typeof(r=null!=(r=e.language||(null!=t?t.language:t))?r:a)===s?r.call(t,{name:"language",hash:{},data:i}):r)+'</small></p>\n  <p>by <a href="http://github.com/'+l(c(null!=(o=null!=t?t.owner:t)?o.login:o,t))+'">'+l(c(null!=(o=null!=t?t.owner:t)?o.login:o,t))+'</a></p>\n  <div class="vcard-stats">\n'+(null!=(o=e.if.call(t,null!=t?t.has_issues:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'      <a href="'+l(typeof(r=null!=(r=e.html_url||(null!=t?t.html_url:t))?r:a)===s?r.call(t,{name:"html_url",hash:{},data:i}):r)+'/watchers" target="_blank"><strong class="vcard-stat-count">'+l(typeof(r=null!=(r=e.subscribers_count||(null!=t?t.subscribers_count:t))?r:a)===s?r.call(t,{name:"subscribers_count",hash:{},data:i}):r)+'</strong>\n      watchers</a>&nbsp;\n      <strong class="vcard-stat-count">'+l(typeof(r=null!=(r=e.stargazers_count||(null!=t?t.stargazers_count:t))?r:a)===s?r.call(t,{name:"stargazers_count",hash:{},data:i}):r)+"</strong>\n      stars &nbsp;\n  </div>\n"+(null!=(o=e.if.call(t,null!=t?t.has_wiki:t,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+"\n</div>\n"},useData:!0})},function(t,e,n){"use strict";var o,r,i,a,s=n(0),l=n(4),c=n(178),u=n(1),h=n(189),d=n(226),p=n(227),m=n(6)("app:activity-composite-view"),f=n(383),g=n(384),v=n(385),_=n(386),b=n(387),w=n(388),y=n(389),x=n(390),k=n(391),T=n(392),C=n(393),E=n(394),I=n(395),S=n(396),M=n(397),A=n(398),R=n(399),L=n(400),B=n(401),D=n(402),O=n(2),P=n(7),j=n(79),F=n(150),U=n(403);n(188),n(24),t.exports=(o={bitbucket:C,huboard:E,jenkins:I,travis:S,sprintly:M,trello:A},r={push:f,issues:g,issue_comment:v,commit_comment:_,pull_request:b,gollum:w,fork:y,member:x,public:k,watch:T},i=l.ItemView.extend({tagName:"li",attributes:function(){return{class:c({"activity-item":!0})}},modelEvents:{change:"render"},behaviors:{TimeAgo:{modelAttribute:"sent",el:"#time"},Tooltip:{"#time":{titleFn:"getTimeTooltip",placement:"left"}}},initialize:function(){this.template=function(t){var e=t.get("meta"),n=e.service;if("github"==n){var i=e.event;return r[i]}return e.prerendered?R:o[n]}(this.model)},serializeData:function(){try{var t=this.model.get("meta"),e=this.model.get("payload"),n=this.model.get("sent"),i=this.model.get("html"),o={meta:t,payload:e,sent:n,sentFormatted:j(n,{compact:!0}),html:i},r=t.prerendered?{}:D(t,e);return s.extend(o,r)}catch(t){var a=this.model&&this.model.attributes;return u.trigger("bugreport",t,{extra:a}),m("Err rendering activity item: error=%s, stack=%s, data=%j",t.message,t.stack,a),{}}},onRender:function(){h.decorate(this),d.decorate(this),p.decorate(this)},getTimeTooltip:function(){var t=this.model.get("sent");return F(t)}}),a=l.ItemView.extend({tagName:"li",className:"activity-tip",template:B,serializeData:function(){var t=O().isNativeDesktopApp;return{integrationsUrl:(t?P.basePath+O.troupe().get("url"):"")+"#integrations",isNativeDesktopApp:t}}}),l.CompositeView.extend({template:L,className:"gtrActivityContainer",childViewContainer:"#activity-list",childView:i,collectionEvents:{"add reset sync reset loaded loading":"_showHideHeader",reset:"onCollectionReset"},childViewOptions:function(t){if(t&&t.id){var e=this.$el.find(".model-id-"+t.id)[0];if(e)return{el:e}}},getEmptyView:function(){if(O.isTroupeAdmin())return a},ui:{header:"#activity-header"},onCollectionReset:function(){if(!this.collection.length){var t=this.$el.find(this.childViewContainer)[0];if(t)for(var e;e=t.firstChild;)t.removeChild(e)}},onRender:function(){this._showHideHeader()},_showHideHeader:function(){var t=0===this.collection.length&&this.collection.loading;this.$el.toggleClass("loading",t);var e=!(O.inOneToOneTroupeContext()||!O.isTroupeAdmin()&&!this.collection.length);this.ui.header.toggle(e)},_renderTemplate:U}))},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i,o,r){var a,s=e.helperMissing,l=this.escapeExpression;return'<span data-link-type="commit" data-commit-sha="'+l("function"==typeof(a=null!=(a=e.id||(null!=t?t.id:t))?a:s)?a.call(t,{name:"id",hash:{},data:i}):a)+'" data-commit-repo="'+l(this.lambda(null!=r[1]?r[1].repo:r[1],t))+'" class="commit">'+l("function"==typeof(a=null!=(a=e.short_message||(null!=t?t.short_message:t))?a:s)?a.call(t,{name:"short_message",hash:{},data:i}):a)+"</span> "},3:function(t,e,n,i){var o;return"and "+this.escapeExpression("function"==typeof(o=null!=(o=e.hidden_commit_count||(null!=t?t.hidden_commit_count:t))?o:e.helperMissing)?o.call(t,{name:"hidden_commit_count",hash:{},data:i}):o)+" more "},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i,o,r){var a,s,l=e.helperMissing,c=this.escapeExpression,u=this.lambda;return'<div class="activity-item-inner github-push">\n  <i class=\'octicon octicon-repo-push activity-item__icon\'></i>\n  <div class="activity-time" id="time">'+c("function"==typeof(s=null!=(s=e.sentFormatted||(null!=t?t.sentFormatted:t))?s:l)?s.call(t,{name:"sentFormatted",hash:{},data:i}):s)+'</div>\n\n  <div class="gtrActivityItemText">\n    <p class="activity-commit">\n      <span class=\'mention\' data-link-type="mention" data-screen-name="'+c(u(null!=(a=null!=(a=null!=t?t.payload:t)?a.pusher:a)?a.name:a,t))+'">'+c(u(null!=(a=null!=(a=null!=t?t.payload:t)?a.pusher:a)?a.name:a,t))+"</span> on "+c("function"==typeof(s=null!=(s=e.branch_name||(null!=t?t.branch_name:t))?s:l)?s.call(t,{name:"branch_name",hash:{},data:i}):s)+'\n    </p>\n    <p class="activity-commit">\n      '+(null!=(a=e.each.call(t,null!=t?t.commits:t,{name:"each",hash:{},fn:this.program(1,i,0,o,r),inverse:this.noop,data:i}))?a:"")+(null!=(a=e.if.call(t,null!=t?t.hidden_commit_count:t,{name:"if",hash:{},fn:this.program(3,i,0,o,r),inverse:this.noop,data:i}))?a:"")+'<a href="'+c((e.sanitizeHref||t&&t.sanitizeHref||l).call(t,null!=(a=null!=t?t.payload:t)?a.compare:a,{name:"sanitizeHref",hash:{},data:i}))+'" target="_blank" style="opacity: 0.6">(compare)</a>\n    </p>\n  </div>\n</div>\n'},useData:!0,useDepths:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=this.lambda,s=this.escapeExpression;return'<div class="activity-item-inner github-issue github-issue-'+s(a(null!=(o=null!=t?t.payload:t)?o.action:o,t))+'">\n  <i class=\'octicon octicon-issue-opened activity-item__icon\'></i>\n  <div class="activity-time" id="time">'+s("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:e.helperMissing)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+s(a(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'">'+s(a(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+"</span> "+s(a(null!=(o=null!=t?t.payload:t)?o.action:o,t))+' <span class="issue '+s(a(null!=(o=null!=(o=null!=t?t.payload:t)?o.issue:o)?o.state:o,t))+'" data-link-type="issue" data-issue="'+s(a(null!=(o=null!=(o=null!=t?t.payload:t)?o.issue:o)?o.number:o,t))+'" data-issue-repo="'+s(a(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.full_name:o,t))+'">#'+s(a(null!=(o=null!=(o=null!=t?t.payload:t)?o.issue:o)?o.number:o,t))+"</span></div>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=this.escapeExpression,s=this.lambda;return'<div class="activity-item-inner github-comment">\n  <i class="octicon octicon-comment activity-item__icon"></i>\n  <div class="activity-time" id="time">'+a("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:e.helperMissing)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'">'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'</span> commented <span class="issue '+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.issue:o)?o.state:o,t))+'" data-link-type="issue" data-issue="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.issue:o)?o.number:o,t))+'" data-issue-repo="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.full_name:o,t))+'">#'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.issue:o)?o.number:o,t))+"</span></div>\n\n</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=this.escapeExpression,s=this.lambda;return'<div class="activity-item-inner github-comment">\n  <i class="octicon octicon-comment activity-item__icon"></i>\n  <div class="activity-time" id="time">'+a("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:e.helperMissing)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+a(s(null!=(o=null!=t?t.meta:t)?o.user:o,t))+'">'+a(s(null!=(o=null!=t?t.meta:t)?o.user:o,t))+'</span> commented on <span data-link-type="commit" data-commit-sha="'+a(s(null!=(o=null!=t?t.commit:t)?o.id:o,t))+'" data-commit-repo="'+a(s(null!=(o=null!=t?t.meta:t)?o.repo:o,t))+'" class="commit">'+a(s(null!=(o=null!=t?t.commit:t)?o.short_sha:o,t))+"</span></span>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression,l=this.lambda;return'<div class="activity-item-inner github-pull-request">\n  <i class=\'octicon octicon-git-pull-request activity-item__icon\'></i>\n  <div class="activity-time" id="time">'+s("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:a)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'">'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+"</span> "+s(l(null!=(o=null!=t?t.payload:t)?o.action:o,t))+' <a class="issue '+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.pull_request:o)?o.state:o,t))+'" href="'+s((e.sanitizeHref||t&&t.sanitizeHref||a).call(t,null!=(o=null!=(o=null!=t?t.payload:t)?o.pull_request:o)?o.html_url:o,{name:"sanitizeHref",hash:{},data:i}))+'" target="_blank" data-link-type="issue" data-issue="'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.pull_request:o)?o.number:o,t))+'" data-issue-repo="'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.full_name:o,t))+'">#'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.pull_request:o)?o.number:o,t))+"</a></div>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression,l=this.lambda;return'<div class="activity-item-inner github-wiki">\n  <i class=\'octicon octicon-book activity-item__icon\'></i>\n  <div class="activity-time" id="time">'+s("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:a)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n\n  <div class="gtrActivityItemText"><a href="https://github.com/'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'" target="_blank"><span class=\'mention\' data-link-type="mention" data-screen-name="'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'">'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'</span></a> updated the wiki</div>\n  <div class="gtrActivityItemText activity-detail"><a href="'+s((e.sanitizeHref||t&&t.sanitizeHref||a).call(t,null!=t?t.wiki_url:t,{name:"sanitizeHref",hash:{},data:i}))+'" target="_blank">'+s("function"==typeof(r=null!=(r=e.wiki_page||(null!=t?t.wiki_page:t))?r:a)?r.call(t,{name:"wiki_page",hash:{},data:i}):r)+"</a></div>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression,l=this.lambda;return'<div class="activity-item-inner github-fork">\n  <i class=\'octicon octicon-repo-forked activity-item__icon\'></i>\n  <div class="activity-time" id="time">'+s("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:a)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n  <div class="gtrActivityItemText">\n    <a href="https://github.com/'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'" target="_blank"><span class=\'mention\' data-link-type="mention" data-screen-name="'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'">'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'</span></a> forked<br>\n    <span class="activity-detail"> <a href="'+s((e.sanitizeHref||t&&t.sanitizeHref||a).call(t,null!=(o=null!=(o=null!=t?t.payload:t)?o.forkee:o)?o.html_url:o,{name:"sanitizeHref",hash:{},data:i}))+'" target="_blank">'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.forkee:o)?o.full_name:o,t))+"</a></span>\n  </div>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=this.escapeExpression,s=this.lambda;return'<div class="activity-item-inner github-member-add">\n  <i class=\'octicon octicon-person activity-item__icon\'></i>\n  <div class="activity-time" id="time">'+a("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:e.helperMissing)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.member:o)?o.login:o,t))+'">'+a(s(null!=(o=null!=(o=null!=t?t.payload:t)?o.member:o)?o.login:o,t))+"</span> "+a(s(null!=(o=null!=t?t.payload:t)?o.action:o,t))+" as member</div>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression,l=this.lambda;return'<div class="activity-item-inner github-public">\n  <i class=\'octicon octicon-repo activity-item__icon\'></i>\n  <div class="activity-time" id="time">'+s("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:a)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'">'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'</span> made <a href="'+s((e.sanitizeHref||t&&t.sanitizeHref||a).call(t,null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.html_url:o,{name:"sanitizeHref",hash:{},data:i}))+'" target="_blank">'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.full_name:o,t))+'</a> public</div>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression,l=this.lambda;return'<div class="activity-item-inner github-watch">\n  <i class=\'octicon octicon-star activity-item__icon\'></i>\n  <div class="activity-time" id="time">'+s("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:a)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'">'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.sender:o)?o.login:o,t))+'</span> starred <a href="'+s((e.sanitizeHref||t&&t.sanitizeHref||a).call(t,null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.html_url:o,{name:"sanitizeHref",hash:{},data:i}))+'" target="_blank">'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.full_name:o,t))+"</a></div>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o,r=this.escapeExpression;return"      "+r(this.lambda(null!=(o=null!=t?t.first_commit:t)?o.message:o,t))+' <a href="'+r((e.sanitizeHref||t&&t.sanitizeHref||e.helperMissing).call(t,null!=(o=null!=t?t.first_commit:t)?o.url:o,{name:"sanitizeHref",hash:{},data:i}))+'" target="_blank" style="opacity: 0.6">(compare)</a>\n'},3:function(t,e,n,i){var o;return"      "+this.escapeExpression("function"==typeof(o=null!=(o=e.commits_count||(null!=t?t.commits_count:t))?o:e.helperMissing)?o.call(t,{name:"commits_count",hash:{},data:i}):o)+" commits\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=this.escapeExpression,s=this.lambda;return'<div class="activity-item-inner bitbucket">\n  <div class="activity-item__icon"><img src="/_s/l/images/icon-bitbucket@2x.png" width="16" height="16"></div>\n  <div class="activity-time" id="time">'+a("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:e.helperMissing)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n  <div class="gtrActivityItemText"><a href="https://bitbucket.com/'+a(s(null!=(o=null!=t?t.meta:t)?o.user:o,t))+'" target="_blank">'+a(s(null!=(o=null!=t?t.meta:t)?o.user:o,t))+'</a> pushed to <a href="https://bitbucket.org/'+a(s(null!=(o=null!=t?t.meta:t)?o.repo:o,t))+'" target="_blank">'+a(s(null!=(o=null!=t?t.meta:t)?o.repo:o,t))+'</a><br>\n    <span class="activity-commit">\n'+(null!=(o=e.if.call(t,null!=t?t.is_single_commit:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?o:"")+"    </span>\n  </div>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o,r=this.lambda,a=this.escapeExpression;return'to <span class=\'mention\' data-link-type="mention" data-screen-name="'+a(r(null!=(o=null!=t?t.meta:t)?o.assignee:o,t))+'">'+a(r(null!=(o=null!=t?t.meta:t)?o.assignee:o,t))+"</span>"},3:function(t,e,n,i){var o;return this.escapeExpression("function"==typeof(o=null!=(o=e.context||(null!=t?t.context:t))?o:e.helperMissing)?o.call(t,{name:"context",hash:{},data:i}):o)},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=this.escapeExpression,s=this.lambda;return'<div class="activity-item-inner huboard">\n  <div class="service-sprite huboard-logo activity-item__icon"></div>\n  <div class="activity-time" id="time">'+a("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:e.helperMissing)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n\n  <div class="gtrActivityItemText"><span class=\'mention\' data-link-type="mention" data-screen-name="'+a(s(null!=(o=null!=t?t.meta:t)?o.user:o,t))+'">'+a(s(null!=(o=null!=t?t.meta:t)?o.user:o,t))+"</span> "+a(s(null!=(o=null!=t?t.meta:t)?o.action:o,t))+' <span class="issue" data-link-type="issue" data-issue="'+a(s(null!=(o=null!=t?t.meta:t)?o.number:o,t))+'" data-issue-repo="'+a(s(null!=(o=null!=t?t.meta:t)?o.repo:o,t))+'">#'+a(s(null!=(o=null!=t?t.meta:t)?o.number:o,t))+"</span> "+(null!=(o=e.if.call(t,null!=(o=null!=t?t.meta:t)?o.assignee:o,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?o:"")+"</div>\n\n</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression;return'<div class="activity-item-inner build-'+s("function"==typeof(r=null!=(r=e.build_status||(null!=t?t.build_status:t))?r:a)?r.call(t,{name:"build_status",hash:{},data:i}):r)+'">\n  <div class="activity-time" id="time">'+s("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:a)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n\n  <div class="gtrActivityItemText">Jenkins <a href="'+s((e.sanitizeHref||t&&t.sanitizeHref||a).call(t,null!=(o=null!=(o=null!=t?t.payload:t)?o.build:o)?o.full_url:o,{name:"sanitizeHref",hash:{},data:i}))+'" target="_blank">'+s(this.lambda(null!=(o=null!=t?t.payload:t)?o.name:o,t))+"</a> "+s("function"==typeof(r=null!=(r=e.build_status||(null!=t?t.build_status:t))?r:a)?r.call(t,{name:"build_status",hash:{},data:i}):r)+'</div>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression,l=this.lambda;return'<div class="activity-item-inner build-'+s("function"==typeof(r=null!=(r=e.build_status||(null!=t?t.build_status:t))?r:a)?r.call(t,{name:"build_status",hash:{},data:i}):r)+'">\n  <div class="service-sprite travis-logo activity-item__icon"></div>\n  <div class="activity-time" id="time">'+s("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:a)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n\n  <div class="gtrActivityItemText">Travis <a href="'+s((e.sanitizeHref||t&&t.sanitizeHref||a).call(t,null!=(o=null!=t?t.payload:t)?o.compare_url:o,{name:"sanitizeHref",hash:{},data:i}))+'" target="_blank">'+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.owner_name:o,t))+"/"+s(l(null!=(o=null!=(o=null!=t?t.payload:t)?o.repository:o)?o.name:o,t))+"</a> <small>("+s(l(null!=(o=null!=t?t.payload:t)?o.branch:o,t))+')</small> <a href="'+s((e.sanitizeHref||t&&t.sanitizeHref||a).call(t,null!=(o=null!=t?t.payload:t)?o.build_url:o,{name:"sanitizeHref",hash:{},data:i}))+'" target="_blank">'+s("function"==typeof(r=null!=(r=e.build_status||(null!=t?t.build_status:t))?r:a)?r.call(t,{name:"build_status",hash:{},data:i}):r)+'</a></div>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o;return" "+this.escapeExpression(this.lambda(null!=(o=null!=(o=null!=t?t.payload:t)?o.attributes:o)?o.title:o,t))+" "},3:function(t,e,n,i){var o;return" "+this.escapeExpression(this.lambda(null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.attributes:o)?o.item:o)?o.title:o,t))+" "},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression,l=this.lambda;return'<div class="activity-item-inner sprintly">\n  <div class="service-sprite sprintly-logo activity-item__icon"></div>\n  <div class="activity-time" id="time">'+s("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:a)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n\n  <div class="gtrActivityItemText">'+s(l(null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.attributes:o)?o.created_by:o)?o.first_name:o,t))+" "+s(l(null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.attributes:o)?o.created_by:o)?o.last_name:o,t))+" "+s("function"==typeof(r=null!=(r=e.sprintly_action||(null!=t?t.sprintly_action:t))?r:a)?r.call(t,{name:"sprintly_action",hash:{},data:i}):r)+'<br>\n    <div class="activity-detail"><a href="'+s((e.sanitizeHref||t&&t.sanitizeHref||a).call(t,null!=(o=null!=(o=null!=t?t.payload:t)?o.attributes:o)?o.short_url:o,{name:"sanitizeHref",hash:{},data:i}))+'" target="_blank">\n      '+(null!=(o=e.if.call(t,null!=(o=null!=(o=null!=t?t.payload:t)?o.attributes:o)?o.title:o,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+"\n      "+(null!=(o=e.if.call(t,null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.attributes:o)?o.item:o)?o.title:o,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.noop,data:i}))?o:"")+"\n    </a></div>\n  </div>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){var o,r=this.lambda,a=this.escapeExpression;return"      <br>\n      <span>("+a(r(null!=(o=null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.action:o)?o.data:o)?o.listBefore:o)?o.name:o,t))+" &rarr; "+a(r(null!=(o=null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.action:o)?o.data:o)?o.listAfter:o)?o.name:o,t))+")</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=e.helperMissing,s=this.escapeExpression,l=this.lambda;return'<div class="activity-item-inner trello-card-'+s("function"==typeof(r=null!=(r=e.trello_action||(null!=t?t.trello_action:t))?r:a)?r.call(t,{name:"trello_action",hash:{},data:i}):r)+'">\n  <div class="activity-item__icon"><img src="/_s/l/images/icon-trello@2x.png" width="16" height="16"></div>\n  <div class="activity-time" id="time">'+s("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:a)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n\n  <div class="gtrActivityItemText">'+s(l(null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.action:o)?o.memberCreator:o)?o.fullName:o,t))+" "+s("function"==typeof(r=null!=(r=e.trello_action||(null!=t?t.trello_action:t))?r:a)?r.call(t,{name:"trello_action",hash:{},data:i}):r)+'<br>\n    <div class="activity-detail">\n    <a href="https://trello.com/c/'+s(l(null!=(o=null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.action:o)?o.data:o)?o.card:o)?o.shortLink:o,t))+'" target="_blank">'+s(l(null!=(o=null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.action:o)?o.data:o)?o.card:o)?o.name:o,t))+"</a>\n"+(null!=(o=e.if.call(t,null!=(o=null!=(o=null!=(o=null!=t?t.payload:t)?o.action:o)?o.data:o)?o.listBefore:o,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+'  </div>\n  </div>\n\n  <div style="clear: both;"></div>\n</div>\n'},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r,a=this.lambda,s=this.escapeExpression,l=e.helperMissing;return'<div class="activity-item-inner prerendered '+s(a(null!=(o=null!=t?t.meta:t)?o.errorLevel:o,t))+'">\n  <div class="service-sprite '+s(a(null!=(o=null!=t?t.meta:t)?o.service:o,t))+"-"+s(a(null!=(o=null!=t?t.meta:t)?o.icon:o,t))+' activity-item__icon"></div>\n  <div class="activity-time" id="time">'+s("function"==typeof(r=null!=(r=e.sentFormatted||(null!=t?t.sentFormatted:t))?r:l)?r.call(t,{name:"sentFormatted",hash:{},data:i}):r)+'</div>\n  <div class="gtrActivityItemText">'+(null!=(o="function"==typeof(r=null!=(r=e.html||(null!=t?t.html:t))?r:l)?r.call(t,{name:"html",hash:{},data:i}):r)?o:"")+"</div>\n</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r;return'\n<div class="trpToolbarHeader">\n  <h5 class="trpToolbarHeaderItem selected" id="activity-header">Activity</h5>\n</div>\n\n<ul class="right-toolbar-activity-list u-font-smaller" id="activity-list">'+(null!=(o="function"==typeof(r=null!=(r=e._prerender_inner||(null!=t?t._prerender_inner:t))?r:e.helperMissing)?r.call(t,{name:"_prerender_inner",hash:{},data:i}):r)?o:"")+"</ul>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({1:function(t,e,n,i){return'data-disable-routing="1" target="_blank"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r;return"<p>We haven't seen any activity yet.</p>\n<p><a href=\""+this.escapeExpression("function"==typeof(r=null!=(r=e.integrationsUrl||(null!=t?t.integrationsUrl:t))?r:e.helperMissing)?r.call(t,{name:"integrationsUrl",hash:{},data:i}):r)+'" '+(null!=(o=e.if.call(t,null!=t?t.isNativeDesktopApp:t,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?o:"")+">Configure\nyour integrations &rarr;</a></p>\n"},useData:!0})},function(t,e,n){"use strict";var r={trello:function(t,e){return{trello_action:{updateCard:"updated",createCard:"created",commentCard:"commented",voteOnCard:"voted"}[e.action.type]}},sprintly:function(t,e){var n={};return"Item"==e.model?n.sprintly_action="created":"Comment"==e.model&&(n.sprintly_action="commented on"),n},bitbucket:function(t){var e=t.commits||[];return{first_commit:e[0],is_single_commit:1===e.length,commits_count:e.length}},github:function(t,e){var n={};if("push"==t.event){var i=e.commits||[],o=i.length;n.commits=i,n.commits.forEach(function(t){t.short_sha=t.id.substring(0,7);var e=t.message;t.short_message=32<e.length?e.substr(0,31)+"":e}),3<o&&(n.commits=n.commits.slice(0,3),n.hidden_commit_count=o-3),n.commits_count=o}else"gollum"==t.event?(n.wiki_url=e.pages[0].html_url,n.wiki_page=e.pages[0].page_name):"commit_comment"===t.event&&(n.commit=t.commit||{id:e.comment.commit_id,short_sha:e.comment.commit_id.substring(0,7)});return n},jenkins:function(t,e){return{build_status:e.build.status?e.build.status.toLowerCase():e.build.phase.toLowerCase()}},travis:function(t,e){var n={},i=e.status_message?e.status_message.toLowerCase():"";return n.build_status="still failing"===i?"failing":i,n},huboard:function(t){var e={},n=t.column,i=t.previousColumn;return t.milestone?e.context="to "+t.milestone:t.status?e.context="to "+t.status:n&&(e.context=i?"from "+i+" to "+n:"in "+n),e}};t.exports=function(t,e){var n=r[t.service],i=n?n(t,e):{};if(e&&e.ref){var o=e.ref.split("/");i.branch_name=o[3]?o[3]:o[2],i.repo=e.repository.owner.name+"/"+e.repository.name}return i}},function(t,e,n){"use strict";var i=n(4);t.exports=function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t),this.triggerMethod("before:render:template");var e=this.getTemplate();if(!1!==e){var n=i.Renderer.render(e,t,this);this.attachElContent(n)}this.bindUIElements(),this.triggerMethod("render:template")}},function(t,e,n){"use strict";var i=n(5),o=n(18),r=i.Model.extend({url:"/v1/repo-info",sync:o.sync});t.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var o,r=this.escapeExpression,a=e.helperMissing;return'<div class="people-modal-result__avatar">\n  '+r(e.widget.call(t,"avatar",{name:"widget",hash:{showStatus:!0,showTooltip:!1,size:"m",user:t},data:i}))+"\n</div>\n<h4>"+r("function"==typeof(o=null!=(o=e.displayName||(null!=t?t.displayName:t))?o:a)?o.call(t,{name:"displayName",hash:{},data:i}):o)+'</h4>\n<div class="people-modal-result__username">@'+r("function"==typeof(o=null!=(o=e.username||(null!=t?t.username:t))?o:a)?o.call(t,{name:"username",hash:{},data:i}):o)+"</div>\n"},useData:!0})},function(t,e,n){var i=n(3);t.exports=(i.default||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){return'<i class="people-modal__search-icon octicon octicon-search"></i>\n<input class="people-modal__search" placeholder="Search" />\n<i class="js-people-modal-search-clear people-modal__search-clear icon-cancel-circle"></i>\n<ul class="people-modal__results">\n</ul>\n'},useData:!0})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i(136);var o=i(1),r=i(5),a=i(294),s=i(245),l=i(288),c=i(271),n=i(31),u=i(375),h=i(44);i(169),i(142),i(196),i(51),i(143),i(41),i(94),n(function(){i(73).installLinkHandler(),o.on("navigation",function(t){window.parent.location.href=t});var n=new u({template:!1,el:"body",chatCollection:s});n.render();var e=new(r.Router.extend({routes:{"":"hideModal",people:"people",login:"login"},hideModal:function(){n.dialogRegion.destroy()},people:function(){n.dialogRegion.show(new l({rosterCollection:a.roster}))},login:function(t){var e=t?h("?"+t,!0).query:{};n.dialogRegion.show(new c(e))}}));o.on("loginClicked",function(t){e.navigate(t,{trigger:!0})}),r.history.stop(),r.history.start()})}],[[541,1,0]]]);
//# sourceMappingURL=router-nli-chat.chunk.js.map
